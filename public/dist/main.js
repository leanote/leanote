function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}window.rangy=function(){function t(t,e){var n=typeof t[e];return n==h||!(n!=u||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=u||!t[e])}function n(t,e){return typeof t[e]!=f}function r(t){return function(e,n){for(var r=n.length;r--;)if(!t(e,n[r]))return!1;return!0}}function i(t){return t&&v(t,m)&&b(t,g)}function a(t){window.alert("Rangy not supported in your browser. Reason: "+t),x.initialized=!0,x.supported=!1}function o(t){var e="Rangy warning: "+t;x.config.alertOnWarn?window.alert(e):typeof window.console!=f&&typeof window.console.log!=f&&window.console.log(e)}function s(){if(!x.initialized){var n,r=!1,o=!1;t(document,"createRange")&&(n=document.createRange(),v(n,p)&&b(n,d)&&(r=!0),n.detach());var s=e(document,"body")?document.body:document.getElementsByTagName("body")[0];s&&t(s,"createTextRange")&&(n=s.createTextRange(),i(n)&&(o=!0)),r||o||a("Neither Range nor TextRange are implemented"),x.initialized=!0,x.features={implementsDomRange:r,implementsTextRange:o};for(var l=_.concat(w),c=0,u=l.length;u>c;++c)try{l[c](x)}catch(h){e(window,"console")&&t(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",h)}}}function l(t){t=t||window,s();for(var e=0,n=C.length;n>e;++e)C[e](t)}function c(t){this.name=t,this.initialized=!1,this.supported=!1}var u="object",h="function",f="undefined",d=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],g=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],m=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=r(t),y=r(e),b=r(n),x={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:v,areHostObjects:y,areHostProperties:b,isTextRange:i},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};x.fail=a,x.warn=o,{}.hasOwnProperty?x.util.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}:a("hasOwnProperty not supported");var w=[],_=[];x.init=s,x.addInitListener=function(t){x.initialized?t(x):w.push(t)};var C=[];x.addCreateMissingNativeApiListener=function(t){C.push(t)},x.createMissingNativeApi=l,c.prototype.fail=function(t){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+t)},c.prototype.warn=function(t){x.warn("Module "+this.name+": "+t)},c.prototype.createError=function(t){return new Error("Error in Rangy "+this.name+" module: "+t)},x.createModule=function(t,e){var n=new c(t);x.modules[t]=n,_.push(function(t){e(t,n),n.initialized=!0,n.supported=!0})},x.requireModules=function(t){for(var e,n,r=0,i=t.length;i>r;++r){if(n=t[r],e=x.modules[n],!(e&&e instanceof c))throw new Error("Module '"+n+"' not found");if(!e.supported)throw new Error("Module '"+n+"' not supported")}};var S=!1,E=function(){S||(S=!0,x.initialized||s())};return typeof window==f?void a("No window found"):typeof document==f?void a("No document found"):(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",E,!1),t(window,"addEventListener")?window.addEventListener("load",E,!1):t(window,"attachEvent")?window.attachEvent("onload",E):a("Window does not have required addEventListener or attachEvent method"),x)}(),rangy.createModule("DomUtil",function(t,e){function n(t){var e;return typeof t.namespaceURI==E||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function r(t){var e=t.parentNode;return 1==e.nodeType?e:null}function i(t){for(var e=0;t=t.previousSibling;)e++;return e}function a(t){var e;return c(t)?t.length:(e=t.childNodes)?e.length:0}function o(t,e){var n,r=[];for(n=t;n;n=n.parentNode)r.push(n);for(n=e;n;n=n.parentNode)if(N(r,n))return n;return null}function s(t,e,n){for(var r=n?e:e.parentNode;r;){if(r===t)return!0;r=r.parentNode}return!1}function l(t,e,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.parentNode,r===e)return i;i=r}return null}function c(t){var e=t.nodeType;return 3==e||4==e||8==e}function u(t,e){var n=e.nextSibling,r=e.parentNode;return n?r.insertBefore(t,n):r.appendChild(t),t}function h(t,e){var n=t.cloneNode(!1);return n.deleteData(0,e),t.deleteData(e,t.length-e),u(n,t),n}function f(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=E)return t.ownerDocument;if(typeof t.document!=E)return t.document;if(t.parentNode)return f(t.parentNode);throw new Error("getDocument: no document found for node")}function d(t){var e=f(t);if(typeof e.defaultView!=E)return e.defaultView;if(typeof e.parentWindow!=E)return e.parentWindow;throw new Error("Cannot get a window object for node")}function p(t){if(typeof t.contentDocument!=E)return t.contentDocument;if(typeof t.contentWindow!=E)return t.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function g(t){if(typeof t.contentWindow!=E)return t.contentWindow;if(typeof t.contentDocument!=E)return t.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function m(t){return k.isHostObject(t,"body")?t.body:t.getElementsByTagName("body")[0]}function v(t){for(var e;e=t.parentNode;)t=e;return t}function y(t,e,n,r){var a,s,c,u,h;if(t==n)return e===r?0:r>e?-1:1;if(a=l(n,t,!0))return e<=i(a)?-1:1;if(a=l(t,n,!0))return i(a)<r?-1:1;if(s=o(t,n),c=t===s?s:l(t,s,!0),u=n===s?s:l(n,s,!0),c===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(h=s.firstChild;h;){if(h===c)return-1;if(h===u)return 1;h=h.nextSibling}throw new Error("Should not be here!")}function b(t){for(var e,n=f(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function x(t){if(!t)return"[No node]";if(c(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">["+t.childNodes.length+"]"}return t.nodeName}function w(t){this.root=t,this._next=t}function _(t){return new w(t)}function C(t,e){this.node=t,this.offset=e}function S(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var E="undefined",k=t.util;k.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),k.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var T=document.createElement("div");k.areHostMethods(T,["insertBefore","appendChild","cloneNode"]||!k.areHostObjects(T,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),k.isHostProperty(T,"innerHTML")||e.fail("Element is missing innerHTML property");var I=document.createTextNode("test");k.areHostMethods(I,["splitText","deleteData","insertData","appendData","cloneNode"]||!k.areHostObjects(T,["previousSibling","nextSibling","childNodes","parentNode"])||!k.areHostProperties(I,["data"]))||e.fail("Incomplete Text Node implementation");var N=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1};w.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},C.prototype={equals:function(t){return this.node===t.node&this.offset==t.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"}},S.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},S.prototype.toString=function(){return this.message},t.dom={arrayContains:N,isHtmlNamespace:n,parentElement:r,getNodeIndex:i,getNodeLength:a,getCommonAncestor:o,isAncestorOf:s,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:u,splitDataNode:h,getDocument:f,getWindow:d,getIframeWindow:g,getIframeDocument:p,getBody:m,getRootContainer:v,comparePoints:y,inspectNode:x,fragmentFromNodeChildren:b,createIterator:_,DomPosition:C},t.DOMException=S}),rangy.createModule("DomRange",function(t){function e(t,e){return 3!=t.nodeType&&(P.isAncestorOf(t,e.startContainer,!0)||P.isAncestorOf(t,e.endContainer,!0))}function n(t){return P.getDocument(t.startContainer)}function r(t,e,n){var r=t._listeners[e];if(r)for(var i=0,a=r.length;a>i;++i)r[i].call(t,{target:t,args:n})}function i(t){return new B(t.parentNode,P.getNodeIndex(t))}function a(t){return new B(t.parentNode,P.getNodeIndex(t)+1)}function o(t,e,n){var r=11==t.nodeType?t.firstChild:t;return P.isCharacterDataNode(e)?n==e.length?P.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:P.splitDataNode(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),r}function s(t){for(var e,r,i,a=n(t.range).createDocumentFragment();r=t.next();){if(e=t.isPartiallySelectedSubtree(),r=r.cloneNode(!e),e&&(i=t.getSubtreeIterator(),r.appendChild(s(i)),i.detach(!0)),10==r.nodeType)throw new j("HIERARCHY_REQUEST_ERR");a.appendChild(r)}return a}function l(t,e,n){var r,i;n=n||{stop:!1};for(var a,o;a=t.next();)if(t.isPartiallySelectedSubtree()){if(e(a)===!1)return void(n.stop=!0);if(o=t.getSubtreeIterator(),l(o,e,n),o.detach(!0),n.stop)return}else for(r=P.createIterator(a);i=r.next();)if(e(i)===!1)return void(n.stop=!0)}function c(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),c(e),e.detach(!0)):t.remove()}function u(t){for(var e,r,i=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),r=t.getSubtreeIterator(),e.appendChild(u(r)),r.detach(!0)):t.remove(),10==e.nodeType)throw new j("HIERARCHY_REQUEST_ERR");i.appendChild(e)}return i}function h(t,e,n){var r,i=!(!e||!e.length),a=!!n;i&&(r=new RegExp("^("+e.join("|")+")$"));var o=[];return l(new d(t,!1),function(t){i&&!r.test(t.nodeType)||a&&!n(t)||o.push(t)}),o}function f(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+P.inspectNode(t.startContainer)+":"+t.startOffset+", "+P.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function d(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&P.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||P.isCharacterDataNode(this.sc)?P.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||P.isCharacterDataNode(this.ec)?P.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(t){this.code=this[t],this.codeName=t,this.message="RangeException: "+this.codeName}function g(t,e,n){this.nodes=h(t,e,n),this._next=this.nodes[0],this._position=0}function m(t){return function(e,n){for(var r,i=n?e:e.parentNode;i;){if(r=i.nodeType,P.arrayContains(t,r))return i;i=i.parentNode}return null}}function v(t,e){if(V(t,e))throw new p("INVALID_NODE_TYPE_ERR")}function y(t){if(!t.startContainer)throw new j("INVALID_STATE_ERR")}function b(t,e){if(!P.arrayContains(e,t.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function x(t,e){if(0>e||e>(P.isCharacterDataNode(t)?t.length:t.childNodes.length))throw new j("INDEX_SIZE_ERR")}function w(t,e){if(W(t,!0)!==W(e,!0))throw new j("WRONG_DOCUMENT_ERR")}function _(t){if(X(t,!0))throw new j("NO_MODIFICATION_ALLOWED_ERR")}function C(t,e){if(!t)throw new j(e)}function S(t){return!P.arrayContains(H,t.nodeType)&&!W(t,!0)}function E(t,e){return e<=(P.isCharacterDataNode(t)?t.length:t.childNodes.length)}function k(t){return!!t.startContainer&&!!t.endContainer&&!S(t.startContainer)&&!S(t.endContainer)&&E(t.startContainer,t.startOffset)&&E(t.endContainer,t.endOffset)}function T(t){if(y(t),!k(t))throw new Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function I(){}function N(t){t.START_TO_START=te,t.START_TO_END=ee,t.END_TO_END=ne,t.END_TO_START=re,t.NODE_BEFORE=ie,t.NODE_AFTER=ae,t.NODE_BEFORE_AND_AFTER=oe,t.NODE_INSIDE=se}function R(t){N(t),N(t.prototype)}function A(t,e){return function(){T(this);var n,r,i=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,c=new d(this,!0);i!==s&&(n=P.getClosestAncestorIn(i,s,!0),r=a(n),i=r.node,o=r.offset),l(c,_),c.reset();var u=t(c);return c.detach(),e(this,i,o,i,o),u}}function M(n,r,o){function s(t,e){return function(n){y(this),b(n,$),b(G(n),H);var r=(t?i:a)(n);(e?l:h)(this,r.node,r.offset)}}function l(t,e,n){var i=t.endContainer,a=t.endOffset;(e!==t.startContainer||n!==t.startOffset)&&((G(e)!=G(i)||1==P.comparePoints(e,n,i,a))&&(i=e,a=n),r(t,e,n,i,a))}function h(t,e,n){var i=t.startContainer,a=t.startOffset;(e!==t.endContainer||n!==t.endOffset)&&((G(e)!=G(i)||-1==P.comparePoints(e,n,i,a))&&(i=e,a=n),r(t,i,a,e,n))}function f(t,e,n){(e!==t.startContainer||n!==t.startOffset||e!==t.endContainer||n!==t.endOffset)&&r(t,e,n,e,n)}n.prototype=new I,t.util.extend(n.prototype,{setStart:function(t,e){y(this),v(t,!0),x(t,e),l(this,t,e)},setEnd:function(t,e){y(this),v(t,!0),x(t,e),h(this,t,e)},setStartBefore:s(!0,!0),setStartAfter:s(!1,!0),setEndBefore:s(!0,!1),setEndAfter:s(!1,!1),collapse:function(t){T(this),t?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){y(this),v(t,!0),r(this,t,0,t,P.getNodeLength(t))},selectNode:function(t){y(this),v(t,!1),b(t,$);var e=i(t),n=a(t);r(this,e.node,e.offset,n.node,n.offset)},extractContents:A(u,r),deleteContents:A(c,r),canSurroundContents:function(){T(this),_(this.startContainer),_(this.endContainer);var t=new d(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},detach:function(){o(this)},splitBoundaries:function(){T(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,a=t===n;P.isCharacterDataNode(n)&&i>0&&i<n.length&&P.splitDataNode(n,i),P.isCharacterDataNode(t)&&e>0&&e<t.length&&(t=P.splitDataNode(t,e),a?(i-=e,n=t):n==t.parentNode&&i>=P.getNodeIndex(t)&&i++,e=0),r(this,t,e,n,i)},normalizeBoundaries:function(){T(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,a=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(n=t,i=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},o=function(r){var a=r.previousSibling;if(a&&a.nodeType==r.nodeType){t=r;var o=r.length;if(e=a.length,r.insertData(0,a.data),a.parentNode.removeChild(a),t==n)i+=e,n=t;else if(n==r.parentNode){var s=P.getNodeIndex(r);i==s?(n=r,i=o):i>s&&i--}}},s=!0;if(P.isCharacterDataNode(n))n.length==i&&a(n);else{if(i>0){var l=n.childNodes[i-1];l&&P.isCharacterDataNode(l)&&a(l)}s=!this.collapsed}if(s){if(P.isCharacterDataNode(t))0==e&&o(t);else if(e<t.childNodes.length){var c=t.childNodes[e];c&&P.isCharacterDataNode(c)&&o(c)}}else t=n,e=i;r(this,t,e,n,i)},collapseToPoint:function(t,e){y(this),v(t,!0),x(t,e),f(this,t,e)}}),R(n)}function L(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:P.getCommonAncestor(t.startContainer,t.endContainer)}function O(t,e,n,i,a){var o=t.startContainer!==e||t.startOffset!==n,s=t.endContainer!==i||t.endOffset!==a;t.startContainer=e,t.startOffset=n,t.endContainer=i,t.endOffset=a,L(t),r(t,"boundarychange",{startMoved:o,endMoved:s})}function D(t){y(t),t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.collapsed=t.commonAncestorContainer=null,r(t,"detach",null),t._listeners=null}function F(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},L(this)}t.requireModules(["DomUtil"]);var P=t.dom,B=P.DomPosition,j=t.DOMException;d.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,P.isCharacterDataNode(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!P.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return e(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse();else{t=new F(n(this.range));var e=this._current,r=e,i=0,a=e,o=P.getNodeLength(e);P.isAncestorOf(e,this.sc,!0)&&(r=this.sc,i=this.so),P.isAncestorOf(e,this.ec,!0)&&(a=this.ec,o=this.eo),O(t,r,i,a,o)}return new d(t,this.clonePartiallySelectedTextNodes)},detach:function(t){t&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},g.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var $=[1,3,4,5,7,8,10],H=[2,9,11],U=[5,6,10,12],q=[1,3,4,5,7,8,10,11],z=[1,3,4,5,7,8],G=P.getRootContainer,W=m([9,11]),X=m(U),V=m([6,10,12]),Y=document.createElement("style"),J=!1;try{Y.innerHTML="<b>x</b>",J=3==Y.firstChild.nodeType}catch(Q){}t.features.htmlParsingConforms=J;var K=J?function(t){var e=this.startContainer,n=P.getDocument(e);if(!e)throw new j("INVALID_STATE_ERR");var r=null;return 1==e.nodeType?r=e:P.isCharacterDataNode(e)&&(r=P.parentElement(e)),r=null===r||"HTML"==r.nodeName&&P.isHtmlNamespace(P.getDocument(r).documentElement)&&P.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=t,P.fragmentFromNodeChildren(r)}:function(t){y(this);var e=n(this),r=e.createElement("body");return r.innerHTML=t,P.fragmentFromNodeChildren(r)},Z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],te=0,ee=1,ne=2,re=3,ie=0,ae=1,oe=2,se=3;I.prototype={attachListener:function(t,e){this._listeners[t].push(e)},compareBoundaryPoints:function(t,e){T(this),w(this.startContainer,e.startContainer);var n,r,i,a,o=t==re||t==te?"start":"end",s=t==ee||t==te?"start":"end";return n=this[o+"Container"],r=this[o+"Offset"],i=e[s+"Container"],a=e[s+"Offset"],P.comparePoints(n,r,i,a)},insertNode:function(t){if(T(this),b(t,q),_(this.startContainer),P.isAncestorOf(t,this.startContainer,!0))throw new j("HIERARCHY_REQUEST_ERR");var e=o(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){T(this);var t,e;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&P.isCharacterDataNode(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=n(this).createDocumentFragment(),e.appendChild(t),e;var r=new d(this,!0);return t=s(r),r.detach(),t},canSurroundContents:function(){T(this),_(this.startContainer),_(this.endContainer);var t=new d(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(b(t,z),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);o(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){T(this);for(var t,e=new F(n(this)),r=Z.length;r--;)t=Z[r],e[t]=this[t];return e},toString:function(){T(this);var t=this.startContainer;if(t===this.endContainer&&P.isCharacterDataNode(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new d(this,!0);return l(n,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){T(this);var e=t.parentNode,n=P.getNodeIndex(t);if(!e)throw new j("NOT_FOUND_ERR");var r=this.comparePoint(e,n),i=this.comparePoint(e,n+1);return 0>r?i>0?oe:ie:i>0?ae:se},comparePoint:function(t,e){return T(this),C(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),P.comparePoints(t,e,this.startContainer,this.startOffset)<0?-1:P.comparePoints(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:K,toHtml:function(){T(this);var t=n(this).createElement("div");return t.appendChild(this.cloneContents()),t.innerHTML},intersectsNode:function(t,e){if(T(this),C(t,"NOT_FOUND_ERR"),P.getDocument(t)!==n(this))return!1;var r=t.parentNode,i=P.getNodeIndex(t);C(r,"NOT_FOUND_ERR");var a=P.comparePoints(r,i,this.endContainer,this.endOffset),o=P.comparePoints(r,i+1,this.startContainer,this.startOffset);return e?0>=a&&o>=0:0>a&&o>0},isPointInRange:function(t,e){return T(this),C(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),P.comparePoints(t,e,this.startContainer,this.startOffset)>=0&&P.comparePoints(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t,e){if(T(this),n(t)!=n(this))throw new j("WRONG_DOCUMENT_ERR");var r=P.comparePoints(this.startContainer,this.startOffset,t.endContainer,t.endOffset),i=P.comparePoints(this.endContainer,this.endOffset,t.startContainer,t.startOffset);return e?0>=r&&i>=0:0>r&&i>0},intersection:function(t){if(this.intersectsRange(t)){var e=P.comparePoints(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=P.comparePoints(this.endContainer,this.endOffset,t.endContainer,t.endOffset),r=this.cloneRange();return-1==e&&r.setStart(t.startContainer,t.startOffset),1==n&&r.setEnd(t.endContainer,t.endOffset),r}return null},union:function(t){if(this.intersectsRange(t,!0)){var e=this.cloneRange();return-1==P.comparePoints(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==P.comparePoints(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new p("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==se},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,P.getNodeLength(t))<=0},containsRange:function(t){return this.intersection(t).equals(t)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var r=n.pop();e.setEnd(r,r.length);var i=this.containsRange(e);return e.detach(),i}return this.containsNodeContents(t)},createNodeIterator:function(t,e){return T(this),new g(this,t,e)},getNodes:function(t,e){return T(this),h(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){y(this),this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){y(this),this.setStartAfter(t),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(t){return F.rangesEqual(this,t)},isValid:function(){return k(this)},inspect:function(){return f(this)}},M(F,O,D),t.rangePrototype=I.prototype,F.rangeProperties=Z,F.RangeIterator=d,F.copyComparisonConstants=R,F.createPrototypeRange=M,F.inspect=f,F.getRangeDocument=n,F.rangesEqual=function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},t.DomRange=F,t.RangeException=p}),rangy.createModule("WrappedRange",function(t){function e(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var r=n.parentElement();n=t.duplicate(),n.collapse(!1);var i=n.parentElement(),a=r==i?r:o.getCommonAncestor(r,i);return a==e?a:o.getCommonAncestor(e,a)}function n(t){return 0==t.compareEndPoints("StartToEnd",t)}function r(t,e,n,r){var i=t.duplicate();i.collapse(n);var a=i.parentElement();if(o.isAncestorOf(e,a,!0)||(a=e),!a.canHaveHTML)return new s(a.parentNode,o.getNodeIndex(a));var l,c,u,h,f,d=o.getDocument(a).createElement("span"),p=n?"StartToStart":"StartToEnd";do a.insertBefore(d,d.previousSibling),i.moveToElementText(d);while((l=i.compareEndPoints(p,t))>0&&d.previousSibling);if(f=d.nextSibling,-1==l&&f&&o.isCharacterDataNode(f)){i.setEndPoint(n?"EndToStart":"EndToEnd",t);var g;if(/[\r\n]/.test(f.data)){var m=i.duplicate(),v=m.text.replace(/\r\n/g,"\r").length;for(g=m.moveStart("character",v);-1==(l=m.compareEndPoints("StartToEnd",m));)g++,m.moveStart("character",1)}else g=i.text.length;h=new s(f,g)}else c=(r||!n)&&d.previousSibling,u=(r||n)&&d.nextSibling,h=u&&o.isCharacterDataNode(u)?new s(u,0):c&&o.isCharacterDataNode(c)?new s(c,c.length):new s(a,o.getNodeIndex(d));return d.parentNode.removeChild(d),h}function i(t,e){var n,r,i,a,s=t.offset,l=o.getDocument(t.node),c=l.body.createTextRange(),u=o.isCharacterDataNode(t.node);return u?(n=t.node,r=n.parentNode):(a=t.node.childNodes,n=s<a.length?a[s]:null,r=t.node),i=l.createElement("span"),i.innerHTML="&#feff;",n?r.insertBefore(i,n):r.appendChild(i),c.moveToElementText(i),c.collapse(!e),r.removeChild(i),u&&c[e?"moveStart":"moveEnd"]("character",s),c}t.requireModules(["DomUtil","DomRange"]);var a,o=t.dom,s=o.DomPosition,l=t.DomRange;if(!t.features.implementsDomRange||t.features.implementsTextRange&&t.config.preferTextRange){if(t.features.implementsTextRange){a=function(t){this.textRange=t,this.refresh()},a.prototype=new l(document),a.prototype.refresh=function(){var t,i,a=e(this.textRange);n(this.textRange)?i=t=r(this.textRange,a,!0,!0):(t=r(this.textRange,a,!0,!1),i=r(this.textRange,a,!1,!1)),this.setStart(t.node,t.offset),this.setEnd(i.node,i.offset)},l.copyComparisonConstants(a);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=a),t.createNativeRange=function(t){return t=t||document,t.body.createTextRange()}}}else!function(){function e(t){for(var e,n=u.length;n--;)e=u[n],t[e]=t.nativeRange[e]}function n(t,e,n,r,i){var a=t.startContainer!==e||t.startOffset!=n,o=t.endContainer!==r||t.endOffset!=i;(a||o)&&(t.setEnd(r,i),t.setStart(e,n))}function r(t){t.nativeRange.detach(),t.detached=!0;for(var e,n=u.length;n--;)e=u[n],t[e]=null}var i,s,c,u=l.rangeProperties;a=function(t){if(!t)throw new Error("Range must be specified");this.nativeRange=t,e(this)},l.createPrototypeRange(a,n,r),i=a.prototype,i.selectNode=function(t){this.nativeRange.selectNode(t),e(this)},i.deleteContents=function(){this.nativeRange.deleteContents(),e(this)},i.extractContents=function(){var t=this.nativeRange.extractContents();return e(this),t},i.cloneContents=function(){return this.nativeRange.cloneContents()},i.surroundContents=function(t){this.nativeRange.surroundContents(t),e(this)},i.collapse=function(t){this.nativeRange.collapse(t),e(this)},i.cloneRange=function(){return new a(this.nativeRange.cloneRange())},i.refresh=function(){e(this)},i.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");o.getBody(document).appendChild(h);var f=document.createRange();f.setStart(h,0),f.setEnd(h,0);try{f.setStart(h,1),s=!0,i.setStart=function(t,n){this.nativeRange.setStart(t,n),e(this)},i.setEnd=function(t,n){this.nativeRange.setEnd(t,n),e(this)},c=function(t){return function(n){this.nativeRange[t](n),e(this)}}}catch(d){s=!1,i.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(r){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}e(this)},i.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(r){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}e(this)},c=function(t,n){return function(r){try{this.nativeRange[t](r)}catch(i){this.nativeRange[n](r),this.nativeRange[t](r)}e(this)}}}i.setStartBefore=c("setStartBefore","setEndBefore"),i.setStartAfter=c("setStartAfter","setEndAfter"),i.setEndBefore=c("setEndBefore","setStartBefore"),i.setEndAfter=c("setEndAfter","setStartAfter"),f.selectNodeContents(h),i.selectNodeContents=f.startContainer==h&&f.endContainer==h&&0==f.startOffset&&f.endOffset==h.length?function(t){this.nativeRange.selectNodeContents(t),e(this)}:function(t){this.setStart(t,0),this.setEnd(t,l.getEndOffset(t))},f.selectNodeContents(h),f.setEnd(h,3);var p=document.createRange();p.selectNodeContents(h),p.setEnd(h,4),p.setStart(h,2),i.compareBoundaryPoints=-1==f.compareBoundaryPoints(f.START_TO_END,p)&1==f.compareBoundaryPoints(f.END_TO_START,p)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)},t.util.isHostMethod(f,"createContextualFragment")&&(i.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),o.getBody(document).removeChild(h),f.detach(),p.detach()}(),t.createNativeRange=function(t){return t=t||document,t.createRange()};t.features.implementsTextRange&&(a.rangeToTextRange=function(t){if(t.collapsed){var e=i(new s(t.startContainer,t.startOffset),!0);return e}var n=i(new s(t.startContainer,t.startOffset),!0),r=i(new s(t.endContainer,t.endOffset),!1),a=o.getDocument(t.startContainer).body.createTextRange();return a.setEndPoint("StartToStart",n),a.setEndPoint("EndToEnd",r),a}),a.prototype.getName=function(){return"WrappedRange"},t.WrappedRange=a,t.createRange=function(e){return e=e||document,new a(t.createNativeRange(e))},t.createRangyRange=function(t){return t=t||document,new l(t)},t.createIframeRange=function(e){return t.createRange(o.getIframeDocument(e))},t.createIframeRangyRange=function(e){return t.createRangyRange(o.getIframeDocument(e))},t.addCreateMissingNativeApiListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(this)}),n=e=null})}),rangy.createModule("WrappedSelection",function(t,e){function n(t){return(t||window).getSelection()}function r(t){return(t||window).document.selection}function i(t,e,n){var r=n?"end":"start",i=n?"start":"end";t.anchorNode=e[r+"Container"],t.anchorOffset=e[r+"Offset"],t.focusNode=e[i+"Container"],t.focusOffset=e[i+"Offset"]}function a(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function o(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function s(e){var n;return e instanceof S?(n=e._selectionNativeRange,n||(n=t.createNativeRange(_.getDocument(e.startContainer)),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=n,e.attachListener("detach",function(){this._selectionNativeRange=null}))):e instanceof E?n=e.nativeRange:t.features.implementsDomRange&&e instanceof _.getWindow(e.startContainer).Range&&(n=e),n}function l(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!_.isAncestorOf(t[0],t[e]))return!1;return!0}function c(t){var e=t.getNodes();if(!l(e))throw new Error("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return e[0]}function u(t){return!!t&&"undefined"!=typeof t.text}function h(t,e){var n=new E(e);t._ranges=[n],i(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function f(e){if(e._ranges.length=0,"None"==e.docSelection.type)o(e);
else{var n=e.docSelection.createRange();if(u(n))h(e,n);else{e.rangeCount=n.length;for(var r,a=_.getDocument(n.item(0)),s=0;s<e.rangeCount;++s)r=t.createRange(a),r.selectNode(n.item(s)),e._ranges.push(r);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,i(e,e._ranges[e.rangeCount-1],!1)}}}function d(t,e){for(var n=t.docSelection.createRange(),r=c(e),i=_.getDocument(n.item(0)),a=_.getBody(i).createControlRange(),o=0,s=n.length;s>o;++o)a.add(n.item(o));try{a.add(r)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),f(t)}function p(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function g(t,e){for(var n,r=_.getDocument(e[0].startContainer),i=_.getBody(r).createControlRange(),a=0;rangeCount>a;++a){n=c(e[a]);try{i.add(n)}catch(o){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),f(t)}function m(t,e){if(t.anchorNode&&_.getDocument(t.anchorNode)!==_.getDocument(e))throw new k("WRONG_DOCUMENT_ERR")}function v(t){var e=[],n=new T(t.anchorNode,t.anchorOffset),r=new T(t.focusNode,t.focusOffset),i="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var a=0,o=t.rangeCount;o>a;++a)e[a]=S.inspect(t.getRangeAt(a));return"["+i+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}t.requireModules(["DomUtil","DomRange","WrappedRange"]),t.config.checkSelectionRanges=!0;var y,b,x="boolean",w="_rangySelection",_=t.dom,C=t.util,S=t.DomRange,E=t.WrappedRange,k=t.DOMException,T=_.DomPosition,I="Control",N=t.util.isHostMethod(window,"getSelection"),R=t.util.isHostObject(document,"selection"),A=R&&(!N||t.config.preferTextRange);A?(y=r,t.isSelectionValid=function(t){var e=(t||window).document,n=e.selection;return"None"!=n.type||_.getDocument(n.createRange().parentElement())==e}):N?(y=n,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=y;var M=y(),L=t.createNativeRange(document),O=_.getBody(document),D=C.areHostObjects(M,["anchorNode","focusNode"]&&C.areHostProperties(M,["anchorOffset","focusOffset"]));t.features.selectionHasAnchorAndFocus=D;var F=C.isHostMethod(M,"extend");t.features.selectionHasExtend=F;var P="number"==typeof M.rangeCount;t.features.selectionHasRangeCount=P;var B=!1,j=!0;C.areHostMethods(M,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof M.rangeCount&&t.features.implementsDomRange&&!function(){var t=document.createElement("iframe");t.frameBorder=0,t.style.position="absolute",t.style.left="-10000px",O.appendChild(t);var e=_.getIframeDocument(t);e.open(),e.write("<html><head></head><body>12</body></html>"),e.close();var n=_.getIframeWindow(t).getSelection(),r=e.documentElement,i=r.lastChild,a=i.firstChild,o=e.createRange();o.setStart(a,1),o.collapse(!0),n.addRange(o),j=1==n.rangeCount,n.removeAllRanges();var s=o.cloneRange();o.setStart(a,0),s.setEnd(a,2),n.addRange(o),n.addRange(s),B=2==n.rangeCount,o.detach(),s.detach(),O.removeChild(t)}(),t.features.selectionSupportsMultipleRanges=B,t.features.collapsedNonEditableSelectionsSupported=j;var $,H=!1;O&&C.isHostMethod(O,"createControlRange")&&($=O.createControlRange(),C.areHostProperties($,["item","add"])&&(H=!0)),t.features.implementsControlRange=H,b=D?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var U;C.isHostMethod(M,"getRangeAt")?U=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:D&&(U=function(e){var n=_.getDocument(e.anchorNode),r=t.createRange(n);return r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset),r.collapsed!==this.isCollapsed&&(r.setStart(e.focusNode,e.focusOffset),r.setEnd(e.anchorNode,e.anchorOffset)),r}),t.getSelection=function(t){t=t||window;var e=t[w],n=y(t),i=R?r(t):null;return e?(e.nativeSelection=n,e.docSelection=i,e.refresh(t)):(e=new p(n,i,t),t[w]=e),e},t.getIframeSelection=function(e){return t.getSelection(_.getIframeWindow(e))};var q=p.prototype;if(!A&&D&&C.areHostMethods(M,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),o(this)};var z=function(e,n){var r=S.getRangeDocument(n),i=t.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),e.nativeSelection.addRange(s(i)),e.nativeSelection.extend(n.startContainer,n.startOffset),e.refresh()};q.addRange=P?function(e,n){if(H&&R&&this.docSelection.type==I)d(this,e);else if(n&&F)z(this,e);else{var r;if(B?r=this.rangeCount:(this.removeAllRanges(),r=0),this.nativeSelection.addRange(s(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==r+1){if(t.config.checkSelectionRanges){var a=U(this.nativeSelection,this.rangeCount-1);a&&!S.rangesEqual(a,e)&&(e=new E(a))}this._ranges[this.rangeCount-1]=e,i(this,e,X(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(t,e){e&&F?z(this,t):(this.nativeSelection.addRange(s(t)),this.refresh())},q.setRanges=function(t){if(H&&t.length>1)g(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(C.isHostMethod(M,"empty")&&C.isHostMethod(L,"select")&&H&&A))return e.fail("No means of selecting a Range or TextRange was found"),!1;q.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=_.getDocument(this.anchorNode);else if(this.docSelection.type==I){var e=this.docSelection.createRange();e.length&&(t=_.getDocument(e.item(0)).body.createTextRange())}if(t){var n=t.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(r){}o(this)},q.addRange=function(t){this.docSelection.type==I?d(this,t):(E.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,i(this,t,!1))},q.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?g(this,t):e&&this.addRange(t[0])}}q.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new k("INDEX_SIZE_ERR");return this._ranges[t]};var G;if(A)G=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=_.getBody(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==I?f(e):u(n)?h(e,n):o(e)};else if(C.isHostMethod(M,"getRangeAt")&&"number"==typeof M.rangeCount)G=function(e){if(H&&R&&e.docSelection.type==I)f(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,r=e.rangeCount;r>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));i(e,e._ranges[e.rangeCount-1],X(e.nativeSelection)),e.isCollapsed=b(e)}else o(e)};else{if(!D||typeof M.isCollapsed!=x||typeof L.collapsed!=x||!t.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;G=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=U(n,0),t._ranges=[e],t.rangeCount=1,a(t),t.isCollapsed=b(t)):o(t)}}q.refresh=function(t){var e=t?this._ranges.slice(0):null;if(G(this),t){var n=e.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!S.rangesEqual(e[n],this._ranges[n]))return!1;return!0}};var W=function(t,e){var n=t.getAllRanges(),r=!1;t.removeAllRanges();for(var i=0,a=n.length;a>i;++i)r||e!==n[i]?t.addRange(n[i]):r=!0;t.rangeCount||o(t)};q.removeRange=H?function(t){if(this.docSelection.type==I){for(var e,n=this.docSelection.createRange(),r=c(t),i=_.getDocument(n.item(0)),a=_.getBody(i).createControlRange(),o=!1,s=0,l=n.length;l>s;++s)e=n.item(s),e!==r||o?a.add(n.item(s)):o=!0;a.select(),f(this)}else W(this,t)}:function(t){W(this,t)};var X;!A&&D&&t.features.implementsDomRange?(X=function(t){var e=!1;return t.anchorNode&&(e=1==_.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e},q.isBackwards=function(){return X(this)}):X=q.isBackwards=function(){return!1},q.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},q.collapse=function(e,n){m(this,e);var r=t.createRange(_.getDocument(e));r.collapseToPoint(e,n),this.removeAllRanges(),this.addRange(r),this.isCollapsed=!0},q.collapseToStart=function(){if(!this.rangeCount)throw new k("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},q.collapseToEnd=function(){if(!this.rangeCount)throw new k("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},q.selectAllChildren=function(e){m(this,e);var n=t.createRange(_.getDocument(e));n.selectNodeContents(e),this.removeAllRanges(),this.addRange(n)},q.deleteFromDocument=function(){if(H&&R&&this.docSelection.type==I){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,i=n.length;i>r;++r)n[r].deleteContents();this.addRange(n[i-1])}},q.getAllRanges=function(){return this._ranges.slice(0)},q.setSingleRange=function(t){this.setRanges([t])},q.containsNode=function(t,e){for(var n=0,r=this._ranges.length;r>n;++n)if(this._ranges[n].containsNode(t,e))return!0;return!1},q.toHtml=function(){var t="";if(this.rangeCount){for(var e=S.getRangeDocument(this._ranges[0]).createElement("div"),n=0,r=this._ranges.length;r>n;++n)e.appendChild(this._ranges[n].cloneContents());t=e.innerHTML}return t},q.getName=function(){return"WrappedSelection"},q.inspect=function(){return v(this)},q.detach=function(){this.win[w]=null,this.win=this.anchorNode=this.focusNode=null},p.inspect=v,t.Selection=p,t.selectionPrototype=q,t.addCreateMissingNativeApiListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return t.getSelection(this)}),e=null})}),define("rangy",function(t){return function(){var e;return e||t.rangy}}(this)),function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,a=Function.prototype,o=r.push,s=r.slice,l=r.concat,c=i.toString,u=i.hasOwnProperty,h=r.forEach,f=r.map,d=r.reduce,p=r.reduceRight,g=r.filter,m=r.every,v=r.some,y=r.indexOf,b=r.lastIndexOf,x=Array.isArray,w=Object.keys,_=a.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.5.1";var S=C.each=C.forEach=function(t,e,r){if(null!=t)if(h&&t.forEach===h)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,a=t.length;a>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var o in t)if(C.has(t,o)&&e.call(r,t[o],o,t)===n)return};C.map=C.collect=function(t,e,n){var r=[];return null==t?r:f&&t.map===f?t.map(e,n):(S(t,function(t,i,a){r.push(e.call(n,t,i,a))}),r)};var E="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return r&&(e=C.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(S(t,function(t,a,o){i?n=e.call(r,n,t,a,o):(n=t,i=!0)}),!i)throw new TypeError(E);return n},C.reduceRight=C.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return r&&(e=C.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var o=C.keys(t);a=o.length}if(S(t,function(s,l,c){l=o?o[--a]:--a,i?n=e.call(r,n,t[l],l,c):(n=t[l],i=!0)}),!i)throw new TypeError(E);return n},C.find=C.detect=function(t,e,n){var r;return k(t,function(t,i,a){return e.call(n,t,i,a)?(r=t,!0):void 0}),r},C.filter=C.select=function(t,e,n){var r=[];return null==t?r:g&&t.filter===g?t.filter(e,n):(S(t,function(t,i,a){e.call(n,t,i,a)&&r.push(t)}),r)},C.reject=function(t,e,n){return C.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},C.every=C.all=function(t,e,r){e||(e=C.identity);var i=!0;return null==t?i:m&&t.every===m?t.every(e,r):(S(t,function(t,a,o){return(i=i&&e.call(r,t,a,o))?void 0:n}),!!i)};var k=C.some=C.any=function(t,e,r){e||(e=C.identity);var i=!1;return null==t?i:v&&t.some===v?t.some(e,r):(S(t,function(t,a,o){return i||(i=e.call(r,t,a,o))?n:void 0}),!!i)};C.contains=C.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):k(t,function(t){return t===e})},C.invoke=function(t,e){var n=s.call(arguments,2),r=C.isFunction(e);return C.map(t,function(t){return(r?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.where=function(t,e,n){return C.isEmpty(e)?n?void 0:[]:C[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return S(t,function(t,i,a){var o=e?e.call(n,t,i,a):t;o>r.computed&&(r={value:t,computed:o})}),r.value},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return S(t,function(t,i,a){var o=e?e.call(n,t,i,a):t;o<r.computed&&(r={value:t,computed:o})}),r.value},C.shuffle=function(t){var e,n=0,r=[];return S(t,function(t){e=C.random(n++),r[n-1]=r[e],r[e]=t}),r};var T=function(t){return C.isFunction(t)?t:function(e){return e[t]}};C.sortBy=function(t,e,n){var r=T(e);return C.pluck(C.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index<e.index?-1:1}),"value")};var I=function(t,e,n,r){var i={},a=T(null==e?C.identity:e);return S(t,function(e,o){var s=a.call(n,e,o,t);r(i,s,e)}),i};C.groupBy=function(t,e,n){return I(t,e,n,function(t,e,n){(C.has(t,e)?t[e]:t[e]=[]).push(n)})},C.countBy=function(t,e,n){return I(t,e,n,function(t,e){C.has(t,e)||(t[e]=0),t[e]++})},C.sortedIndex=function(t,e,n,r){n=null==n?C.identity:T(n);for(var i=n.call(r,e),a=0,o=t.length;o>a;){var s=a+o>>>1;n.call(r,t[s])<i?a=s+1:o=s}return a},C.toArray=function(t){return t?C.isArray(t)?s.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:s.call(t,0,e)},C.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var N=function(t,e,n){return e&&C.every(t,C.isArray)?l.apply(n,t):(S(t,function(t){C.isArray(t)||C.isArguments(t)?e?o.apply(n,t):N(t,e,n):n.push(t)}),n)};C.flatten=function(t,e){return N(t,e,[])},C.without=function(t){return C.difference(t,s.call(arguments,1))},C.uniq=C.unique=function(t,e,n,r){C.isFunction(e)&&(r=n,n=e,e=!1);var i=n?C.map(t,n,r):t,a=[],o=[];return S(i,function(n,r){(e?r&&o[o.length-1]===n:C.contains(o,n))||(o.push(n),a.push(t[r]))}),a},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=s.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.indexOf(e,t)>=0})})},C.difference=function(t){var e=l.apply(r,s.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=C.pluck(arguments,""+n);return e},C.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=C.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(b&&t.lastIndexOf===b)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,a=new Array(r);r>i;)a[i++]=t,t+=n;return a};var R=function(){};C.bind=function(t,e){var n,r;if(_&&t.bind===_)return _.apply(t,s.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return n=s.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(s.call(arguments)));R.prototype=t.prototype;var i=new R;R.prototype=null;var a=t.apply(i,n.concat(s.call(arguments)));return Object(a)===a?a:i}},C.partial=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},C.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return S(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var r=e.apply(this,arguments);return C.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},C.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(s.call(arguments,1)))},C.throttle=function(t,e,n){var r,i,a,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:new Date,o=null,a=t.apply(r,i)};return function(){var c=new Date;s||n.leading!==!1||(s=c);var u=e-(c-s);return r=this,i=arguments,0>=u?(clearTimeout(o),o=null,s=c,a=t.apply(r,i)):o||n.trailing===!1||(o=setTimeout(l,u)),a}},C.debounce=function(t,e,n){var r,i=null;return function(){var a=this,o=arguments,s=function(){i=null,n||(r=t.apply(a,o))},l=n&&!i;return clearTimeout(i),i=setTimeout(s,e),l&&(r=t.apply(a,o)),r}},C.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&e.push(n);return e},C.values=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push(t[n]);return e},C.pairs=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push([n,t[n]]);return e},C.invert=function(t){var e={};for(var n in t)C.has(t,n)&&(e[t[n]]=n);return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return S(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},C.pick=function(t){var e={},n=l.apply(r,s.call(arguments,1));return S(n,function(n){n in t&&(e[n]=t[n])}),e},C.omit=function(t){var e={},n=l.apply(r,s.call(arguments,1));for(var i in t)C.contains(n,i)||(e[i]=t[i]);return e},C.defaults=function(t){return S(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var A=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var i=c.call(t);if(i!=c.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return r[a]==e;var o=t.constructor,s=e.constructor;if(o!==s&&!(C.isFunction(o)&&o instanceof o&&C.isFunction(s)&&s instanceof s))return!1;n.push(t),r.push(e);var l=0,u=!0;if("[object Array]"==i){if(l=t.length,u=l==e.length)for(;l--&&(u=A(t[l],e[l],n,r)););}else{for(var h in t)if(C.has(t,h)&&(l++,!(u=C.has(e,h)&&A(t[h],e[h],n,r))))break;if(u){for(h in e)if(C.has(e,h)&&!l--)break;u=!l}}return n.pop(),r.pop(),u};C.isEqual=function(t,e){return A(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=x||function(t){return"[object Array]"==c.call(t)},C.isObject=function(t){return t===Object(t)},S(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return u.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=C.invert(M.escape);var L={escape:new RegExp("["+C.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(M.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(L[t],function(e){return M[t][e]})}}),C.result=function(t,e){if(null==t)return void 0;var n=t[e];return C.isFunction(n)?n.call(t):n},C.mixin=function(t){S(C.functions(t),function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),B.call(this,n.apply(C,t))}})};var O=0;C.uniqueId=function(t){var e=++O+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,n){var r;n=C.defaults({},n,C.templateSettings);var i=new RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),a=0,o="__p+='";t.replace(i,function(e,n,r,i,s){return o+=t.slice(a,s).replace(P,function(t){return"\\"+F[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),a=s+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(e)return r(e,C);var l=function(t){return r.call(this,t,C)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},C.chain=function(t){return C(t).chain()};var B=function(t){return this._chain?C(t).chain():t};C.mixin(C),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],B.call(this,n)}}),S(["concat","join","slice"],function(t){var e=r[t];C.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(t){return function(){var e;return e||t._}}(this)),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("crel",e):t.crel=e()}(this,function(){function t(){var n,r=window.document,i=arguments,a=r.createElement(i[0]),o=i[1],s=2,l=i.length,c=t.attrMap;if(1===l)return a;if(("object"!=typeof o||e(o))&&(--s,o=null),l-s===1&&"string"==typeof i[s]&&void 0!==a.textContent)a.textContent=i[s];else for(;l>s;++s)n=i[s],null!=n&&(e(n)||(n=r.createTextNode(n)),a.appendChild(n));for(var u in o)if(c[u]){var h=t.attrMap[u];"function"==typeof h?h(a,o[u]):a.setAttribute(h,o[u])}else a.setAttribute(u,o[u]);return a}var e="object"==typeof Node?function(t){return t instanceof Node}:function(t){return t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName};return t.attrMap={},t.isNode=e,t}),define("storage",["underscore"],function(t){function e(e){try{return t.compact(localStorage[e].split(";"))}catch(n){return localStorage[e]=";",[]}}var n,r,i=e("file.list"),a=localStorage.version;if(void 0===a&&(localStorage.removeItem("sync.queue"),localStorage.removeItem("sync.current"),localStorage.removeItem("file.counter"),t.each(i,function(n){localStorage[n+".publish"]=";";var r=e(n+".sync");t.each(r,function(t){localStorage[t+".contentCRC"]="0",void 0!==localStorage[t+".etag"]&&(localStorage[t+".titleCRC"]="0")})}),a="v1"),"v1"==a){var o=localStorage["sync.gdrive.lastChangeId"];o&&(localStorage["gdrive.lastChangeId"]=o,localStorage.removeItem("sync.gdrive.lastChangeId"));var s=localStorage["sync.dropbox.lastChangeId"];s&&(localStorage["dropbox.lastChangeId"]=s,localStorage.removeItem("sync.dropbox.lastChangeId"));var l="gdrive",c="dropbox",u="sync."+l+".",h="sync."+c+".";t.each(i,function(n){var r=e(n+".sync");t.each(r,function(t){var e={};0===t.indexOf(u)?(e.provider=l,e.id=t.substring(u.length),e.etag=localStorage[t+".etag"],e.contentCRC=localStorage[t+".contentCRC"],e.titleCRC=localStorage[t+".titleCRC"]):0===t.indexOf(h)&&(e.provider=c,e.path=decodeURIComponent(t.substring(h.length)),e.version=localStorage[t+".version"],e.contentCRC=localStorage[t+".contentCRC"]),localStorage[t]=JSON.stringify(e),localStorage.removeItem(t+".etag"),localStorage.removeItem(t+".version"),localStorage.removeItem(t+".contentCRC"),localStorage.removeItem(t+".titleCRC")})}),a="v2"}return"v2"==a&&(t.each(i,function(e){t.has(localStorage,e+".sync")||(localStorage.removeItem(e+".title"),localStorage.removeItem(e+".publish"),localStorage.removeItem(e+".content"),localStorage["file.list"].replace(";"+e+";",";"))}),a="v3"),"v3"==a&&(n=localStorage["file.current"],void 0!==n&&-1===localStorage["file.list"].indexOf(";"+n+";")&&localStorage.removeItem("file.current"),a="v4"),"v4"==a&&(localStorage.removeItem("githubToken"),a="v5"),"v5"==a&&(t.each(i,function(n){var r=e(n+".publish");t.each(r,function(t){var e=JSON.parse(localStorage[t]);"gdrive"==e.provider&&(e.id=e.fileId,e.fileId=void 0,localStorage[t]=JSON.stringify(e))})}),a="v6"),"v6"==a&&(n=localStorage["file.current"],void 0!==n&&(localStorage[n+".selectTime"]=(new Date).getTime(),localStorage.removeItem("file.current")),a="v7"),("v7"==a||"v8"==a||"v9"==a)&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),delete r.editorFontFamily,delete r.editorFontSize,r.template&&(r.template=r.template.replace("http://benweet.github.io/stackedit/css/main-min.css","http://benweet.github.io/stackedit/res-min/themes/default.css")),localStorage.settings=JSON.stringify(r)),a="v10"),"v10"==a&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),((r.extensionSettings||{}).markdownExtra||{}).extensions&&r.extensionSettings.markdownExtra.extensions.push("smartypants"),"http://stackedit-ssh-proxy.herokuapp.com/"==r.sshProxy&&(r.sshProxy="https://stackedit-ssh-proxy.herokuapp.com/"),r.template&&(r.template=r.template.replace("http://benweet.github.io/stackedit/lib/","https://stackedit.io/libs/")),r.template&&(r.template=r.template.replace("http://benweet.github.io/stackedit/","https://stackedit.io/")),r.pdfTemplate&&(r.pdfTemplate=r.pdfTemplate.replace("http://benweet.github.io/stackedit/lib/","https://stackedit.io/libs/")),r.pdfTemplate&&(r.pdfTemplate=r.pdfTemplate.replace("http://benweet.github.io/stackedit/","https://stackedit.io/")),r.defaultContent&&(r.defaultContent=r.defaultContent.replace("http://benweet.github.io/stackedit/","https://stackedit.io/")),r.commitMsg&&(r.commitMsg=r.commitMsg.replace("http://benweet.github.io/stackedit/","https://stackedit.io/")),localStorage.settings=JSON.stringify(r)),a="v11"),"v11"==a&&(localStorage.removeItem("theme"),t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),delete r.editorFontFamily,delete r.editorFontSize,r.template&&(r.template=r.template.replace("https://stackedit.io/res-min/themes/default.css","https://stackedit.io/res-min/themes/base.css")),r.pdfTemplate&&(r.pdfTemplate=r.pdfTemplate.replace("https://stackedit.io/res-min/themes/default.css","https://stackedit.io/res-min/themes/base.css")),localStorage.settings=JSON.stringify(r)),a="v12"),("v12"==a||"v13"==a)&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),delete r.editorFontFamily,localStorage.settings=JSON.stringify(r)),a="v14"),"v14"==a&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),r.template&&(r.template=r.template.replace("https://stackedit.io/res-min/themes/default.css","https://stackedit.io/res-min/themes/base.css")),r.pdfTemplate&&(r.pdfTemplate=r.pdfTemplate.replace("https://stackedit.io/res-min/themes/default.css","https://stackedit.io/res-min/themes/base.css")),localStorage.settings=JSON.stringify(r)),a="v15"),"v15"==a&&(localStorage.removeItem("gdrivePermissions"),t.has(localStorage,"gdrive.lastChangeId")&&(localStorage["google.gdrive0.gdrive.lastChangeId"]=localStorage["gdrive.lastChangeId"],localStorage.removeItem("gdrive.lastChangeId")),t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),((r.extensionSettings||{}).markdownExtra||{}).extensions&&(r.extensionSettings.markdownExtra.extensions.push("newlines"),r.extensionSettings.markdownExtra.extensions.push("strikethrough")),localStorage.settings=JSON.stringify(r)),a="v16"),("v16"==a||"v17"==a)&&(localStorage.removeItem("focusMode"),localStorage.removeItem("mode"),localStorage.removeItem("gdrive.state"),localStorage.removeItem("google.picasa0.permissions"),localStorage.removeItem("google.picasa0.userId"),t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),delete r.shortcuts,delete r.editorFontFamily,delete r.editorFontSize,delete r.maxWidth,localStorage.settings=JSON.stringify(r)),a="v18"),"v18"==a&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),((r.extensionSettings||{}).markdownExtra||{}).diagrams=!0,localStorage.settings=JSON.stringify(r)),a="v19"),"v19"==a&&(localStorage.removeItem("themeV3"),localStorage.removeItem("welcomeTour"),t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),delete r.pdfTemplate,delete r.pdfPageSize,delete r.sshProxy,localStorage.settings=JSON.stringify(r)),a="v20"),"v20"==a&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),delete r.markdownMimeType,localStorage.settings=JSON.stringify(r)),a="v21"),"v21"==a&&(t.has(localStorage,"settings")&&(r=JSON.parse(localStorage.settings),r.template&&(r.template=r.template.replace("https://stackedit.io/libs/MathJax/","https://cdn.mathjax.org/mathjax/latest/")),r.pdfTemplate&&(r.pdfTemplate=r.pdfTemplate.replace("/libs/MathJax/","/res/bower-libs/MathJax/")),localStorage.settings=JSON.stringify(r)),a="v22"),localStorage.version=a,localStorage}),function(t){var e;"function"==typeof define?define("xregexp",t):"object"==typeof exports?(e=t(),("object"==typeof module?module.exports=e:exports).XRegExp=e):XRegExp=t()}(function(){var t=function(t){function e(t,e,n){var r;if(n)if(t.__proto__)t.__proto__=m.prototype;else for(r in m.prototype)t[r]=m.prototype[r];return t[y]={captureNames:e},t}function n(t){return x.replace.call(t,/([\s\S])(?=[\s\S]*\1)/g,"")}function r(t,r){if(!m.isRegExp(t))throw new TypeError("Type RegExp expected");
var i=x.exec.call(/\/([a-z]*)$/i,String(t))[1];return r=r||{},r.add&&(i=n(i+r.add)),r.remove&&(i=x.replace.call(i,new RegExp("["+r.remove+"]+","g"),"")),t=e(new RegExp(t.source,i),a(t)?t[y].captureNames.slice(0):null,r.addProto)}function i(){return{captureNames:null}}function a(t){return!(!t[y]||!t[y].captureNames)}function o(t,e){if(Array.prototype.indexOf)return t.indexOf(e);var n,r=t.length;for(n=0;r>n;++n)if(t[n]===e)return n;return-1}function s(t,e){return M.call(t)==="[object "+e+"]"}function l(t,e,n){return x.test.call(n.indexOf("x")>-1?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,t.slice(e))}function c(t,e){var r;if(n(e)!==e)throw new SyntaxError("Invalid duplicate regex flag "+e);for(t=x.replace.call(t,/^\(\?([\w$]+)\)/,function(t,r){if(x.test.call(/[gy]/,r))throw new SyntaxError("Cannot use flag g or y in mode modifier "+t);return e=n(e+r),""}),r=0;r<e.length;++r)if(!A[e.charAt(r)])throw new SyntaxError("Unknown regex flag "+e.charAt(r));return{pattern:t,flags:e}}function u(t){return t=t||{},s(t,"String")&&(t=m.forEach(t,/[^\s,]+/,function(t){this[t]=!0},{})),t}function h(t){if(!/^[\w$]$/.test(t))throw new Error("Flag must be a single character A-Za-z0-9_$");A[t]=!0}function f(t,e,n,r,i){for(var a,o,s=S.length,l=null;s--;)if(o=S[s],(o.scope===r||"all"===o.scope)&&(!o.flag||e.indexOf(o.flag)>-1)&&(a=m.exec(t,o.regex,n,"sticky"))){l={matchLength:a[0].length,output:o.handler.call(i,a,r,e),reparse:o.reparse};break}return l}function d(t){m.cache.flush("patterns"),b.astral=t}function p(t){RegExp.prototype.exec=(t?w:x).exec,RegExp.prototype.test=(t?w:x).test,String.prototype.match=(t?w:x).match,String.prototype.replace=(t?w:x).replace,String.prototype.split=(t?w:x).split,b.natives=t}function g(t){if(null==t)throw new TypeError("Cannot convert null or undefined to object");return t}var m,v,y="xregexp",b={astral:!1,natives:!1},x={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},w={},_={},C={},S=[],E="default",k="class",T={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},I=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,N=x.exec.call(/()??/,"")[1]===t,R=RegExp.prototype.sticky!==t,A={g:!0,i:!0,m:!0,y:R},M={}.toString;return m=function(n,i){var a,o,s,l={hasNamedCapture:!1,captureNames:[]},u=E,h="",d=0;if(m.isRegExp(n)){if(i!==t)throw new TypeError("Cannot supply flags when copying a RegExp");return r(n,{addProto:!0})}if(n=n===t?"":String(n),i=i===t?"":String(i),s=n+"***"+i,!C[s]){for(a=c(n,i),n=a.pattern,i=a.flags;d<n.length;){do a=f(n,i,d,u,l),a&&a.reparse&&(n=n.slice(0,d)+a.output+n.slice(d+a.matchLength));while(a&&a.reparse);a?(h+=a.output,d+=a.matchLength||1):(o=m.exec(n,T[u],d,"sticky")[0],h+=o,d+=o.length,"["===o&&u===E?u=k:"]"===o&&u===k&&(u=E))}C[s]={pattern:x.replace.call(h,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:x.replace.call(i,/[^gimy]+/g,""),captures:l.hasNamedCapture?l.captureNames:null}}return s=C[s],e(new RegExp(s.pattern,s.flags),s.captures,!0)},m.prototype=new RegExp,m.version="3.0.0-pre",m.addToken=function(t,e,n){n=n||{};var i,a=n.optionalFlags;if(n.flag&&h(n.flag),a)for(a=x.split.call(a,""),i=0;i<a.length;++i)h(a[i]);S.push({regex:r(t,{add:"g"+(R?"y":"")}),handler:e,scope:n.scope||E,flag:n.flag,reparse:n.reparse}),m.cache.flush("patterns")},m.cache=function(t,e){var n=t+"***"+(e||"");return _[n]||(_[n]=m(t,e))},m.cache.flush=function(t){"patterns"===t?C={}:_={}},m.escape=function(t){return x.replace.call(g(t),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},m.exec=function(t,e,n,a){var o,s,l="g";return R&&(a||e.sticky&&a!==!1)&&(l+="y"),e[y]=e[y]||i(),s=e[y][l]||(e[y][l]=r(e,{add:l,remove:a===!1?"y":""})),s.lastIndex=n=n||0,o=w.exec.call(s,t),a&&o&&o.index!==n&&(o=null),e.global&&(e.lastIndex=o?s.lastIndex:0),o},m.forEach=function(t,e,n,r){for(var i,a=0,o=-1;i=m.exec(t,e,a);)n.call(r,i,++o,t,e),a=i.index+(i[0].length||1);return r},m.globalize=function(t){return r(t,{add:"g",addProto:!0})},m.install=function(t){t=u(t),!b.astral&&t.astral&&d(!0),!b.natives&&t.natives&&p(!0)},m.isInstalled=function(t){return!!b[t]},m.isRegExp=function(t){return"[object RegExp]"===M.call(t)},m.match=function(t,e,n){var a,o,s=e.global&&"one"!==n||"all"===n,l=(s?"g":"")+(e.sticky?"y":"");return e[y]=e[y]||i(),o=e[y][l||"noGY"]||(e[y][l||"noGY"]=r(e,{add:l,remove:"one"===n?"g":""})),a=x.match.call(g(t),o),e.global&&(e.lastIndex="one"===n&&a?a.index+a[0].length:0),s?a||[]:a&&a[0]},m.matchChain=function(t,e){return function n(t,r){var i,a=e[r].regex?e[r]:{regex:e[r]},o=[],s=function(t){if(a.backref){if(!(t.hasOwnProperty(a.backref)||+a.backref<t.length))throw new ReferenceError("Backreference to undefined group: "+a.backref);o.push(t[a.backref]||"")}else o.push(t[0])};for(i=0;i<t.length;++i)m.forEach(t[i],a.regex,s);return r!==e.length-1&&o.length?n(o,r+1):o}([t],0)},m.replace=function(t,e,n,a){var o,s=m.isRegExp(e),l=e.global&&"one"!==a||"all"===a,c=(l?"g":"")+(e.sticky?"y":""),u=e;return s?(e[y]=e[y]||i(),u=e[y][c||"noGY"]||(e[y][c||"noGY"]=r(e,{add:c,remove:"one"===a?"g":""}))):l&&(u=new RegExp(m.escape(String(e)),"g")),o=w.replace.call(g(t),u,n),s&&e.global&&(e.lastIndex=0),o},m.replaceEach=function(t,e){var n,r;for(n=0;n<e.length;++n)r=e[n],t=m.replace(t,r[0],r[1],r[2]);return t},m.split=function(t,e,n){return w.split.call(g(t),e,n)},m.test=function(t,e,n,r){return!!m.exec(t,e,n,r)},m.uninstall=function(t){t=u(t),b.astral&&t.astral&&d(!1),b.natives&&t.natives&&p(!1)},m.union=function(t,e){var n,r,i,a,o=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,l=[],c=0,u=function(t,e,i){var a=r[c-n];if(e){if(++c,a)return"(?<"+a+">"}else if(i)return"\\"+(+i+n);return t};if(!s(t,"Array")||!t.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(a=0;a<t.length;++a)i=t[a],m.isRegExp(i)?(n=c,r=i[y]&&i[y].captureNames||[],l.push(x.replace.call(m(i.source).source,o,u))):l.push(m.escape(i));return m(l.join("|"),e)},w.exec=function(e){var n,i,a,s=this.lastIndex,l=x.exec.apply(this,arguments);if(l){if(!N&&l.length>1&&o(l,"")>-1&&(i=r(this,{remove:"g"}),x.replace.call(String(e).slice(l.index),i,function(){var e,n=arguments.length;for(e=1;n-2>e;++e)arguments[e]===t&&(l[e]=t)})),this[y]&&this[y].captureNames)for(a=1;a<l.length;++a)n=this[y].captureNames[a-1],n&&(l[n]=l[a]);this.global&&!l[0].length&&this.lastIndex>l.index&&(this.lastIndex=l.index)}return this.global||(this.lastIndex=s),l},w.test=function(t){return!!w.exec.call(this,t)},w.match=function(t){var e;if(m.isRegExp(t)){if(t.global)return e=x.match.apply(this,arguments),t.lastIndex=0,e}else t=new RegExp(t);return w.exec.call(t,g(this))},w.replace=function(e,n){var r,i,a,l=m.isRegExp(e);return l?(e[y]&&(i=e[y].captureNames),r=e.lastIndex):e+="",a=s(n,"Function")?x.replace.call(String(this),e,function(){var r,a=arguments;if(i)for(a[0]=new String(a[0]),r=0;r<i.length;++r)i[r]&&(a[0][i[r]]=a[r+1]);return l&&e.global&&(e.lastIndex=a[a.length-2]+a[0].length),n.apply(t,a)}):x.replace.call(null==this?this:String(this),e,function(){var t=arguments;return x.replace.call(String(n),I,function(e,n,r){var a;if(n){if(a=+n,a<=t.length-3)return t[a]||"";if(a=i?o(i,n):-1,0>a)throw new SyntaxError("Backreference to undefined group "+e);return t[a+1]||""}if("$"===r)return"$";if("&"===r||0===+r)return t[0];if("`"===r)return t[t.length-1].slice(0,t[t.length-2]);if("'"===r)return t[t.length-1].slice(t[t.length-2]+t[0].length);if(r=+r,!isNaN(r)){if(r>t.length-3)throw new SyntaxError("Backreference to undefined group "+e);return t[r]||""}throw new SyntaxError("Invalid token "+e)})}),l&&(e.lastIndex=e.global?0:r),a},w.split=function(e,n){if(!m.isRegExp(e))return x.split.apply(this,arguments);var r,i=String(this),a=[],o=e.lastIndex,s=0;return n=(n===t?-1:n)>>>0,m.forEach(i,e,function(t){t.index+t[0].length>s&&(a.push(i.slice(s,t.index)),t.length>1&&t.index<i.length&&Array.prototype.push.apply(a,t.slice(1)),r=t[0].length,s=t.index+r)}),s===i.length?(!x.test.call(e,"")||r)&&a.push(""):a.push(i.slice(s)),e.lastIndex=o,a.length>n?a.slice(0,n):a},v=m.addToken,v(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(t,e){if("B"===t[1]&&e===E)return t[0];throw new SyntaxError("Invalid escape "+t[0])},{scope:"all"}),v(/\[(\^?)]/,function(t){return t[1]?"[\\s\\S]":"\\b\\B"}),v(/\(\?#[^)]*\)/,function(t,e,n){return l(t.input,t.index+t[0].length,n)?"":"(?:)"}),v(/\s+|#.*/,function(t,e,n){return l(t.input,t.index+t[0].length,n)?"":"(?:)"},{flag:"x"}),v(/\./,function(){return"[\\s\\S]"},{flag:"s"}),v(/\\k<([\w$]+)>/,function(t){var e=isNaN(t[1])?o(this.captureNames,t[1])+1:+t[1],n=t.index+t[0].length;if(!e||e>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+t[0]);return"\\"+e+(n===t.input.length||isNaN(t.input.charAt(n))?"":"(?:)")}),v(/\\(\d+)/,function(t,e){if(!(e===E&&/^[1-9]/.test(t[1])&&+t[1]<=this.captureNames.length)&&"0"!==t[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+t[0]);return t[0]},{scope:"all"}),v(/\(\?P?<([\w$]+)>/,function(t){if(!isNaN(t[1]))throw new SyntaxError("Cannot use integer as capture name "+t[0]);if("length"===t[1]||"__proto__"===t[1])throw new SyntaxError("Cannot use reserved word as capture name "+t[0]);if(o(this.captureNames,t[1])>-1)throw new SyntaxError("Cannot use same name for multiple groups "+t[0]);return this.captureNames.push(t[1]),this.hasNamedCapture=!0,"("}),v(/\((?!\?)/,function(t,e,n){return n.indexOf("n")>-1?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n"}),m}();return function(t){function e(t){var e=/^\^/,n=/\$$/;return e.test(t)&&n.test(t.replace(/\\[\s\S]/g,""))?t.replace(e,"").replace(n,""):t}function n(e){return t.isRegExp(e)?e[r]&&e[r].captureNames?e:t(e.source):t(e)}var r="xregexp",i=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,a=t.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,i],"g");t.build=function(o,s,l){var c,u,h,f,d=/^\(\?([\w$]+)\)/.exec(o),p={},g=0,m=0,v=[0];d&&(l=l||"",d[1].replace(/./g,function(t){l+=l.indexOf(t)>-1?"":t}));for(f in s)s.hasOwnProperty(f)&&(h=n(s[f]),p[f]={pattern:e(h.source),names:h[r].captureNames||[]});return o=n(o),u=o[r].captureNames||[],o=o.source.replace(a,function(t,e,n,r,a){var o,s,l=e||n;if(l){if(!p.hasOwnProperty(l))throw new ReferenceError("Undefined property "+t);return e?(o=u[m],v[++m]=++g,s="(?<"+(o||l)+">"):s="(?:",c=g,s+p[l].pattern.replace(i,function(t,e,n){if(e){if(o=p[l].names[g-c],++g,o)return"(?<"+o+">"}else if(n)return"\\"+(+n+c);return t})+")"}if(r){if(o=u[m],v[++m]=++g,o)return"(?<"+o+">"}else if(a)return"\\"+v[+a];return t}),t(o,l)}}(t),function(t){function e(t,e,n,r){return{name:t,value:e,start:n,end:r}}t.matchRecursive=function(n,r,i,a,o){a=a||"",o=o||{};var s,l,c,u,h,f=a.indexOf("g")>-1,d=a.indexOf("y")>-1,p=a.replace(/y/g,""),g=o.escapeChar,m=o.valueNames,v=[],y=0,b=0,x=0,w=0;if(r=t(r,p),i=t(i,p),g){if(g.length>1)throw new Error("Cannot use more than one escape character");g=t.escape(g),h=new RegExp("(?:"+g+"[\\S\\s]|(?:(?!"+t.union([r,i]).source+")[^"+g+"])+)+",a.replace(/[^im]+/g,""))}for(;;){if(g&&(x+=(t.exec(n,h,x,"sticky")||[""])[0].length),c=t.exec(n,r,x),u=t.exec(n,i,x),c&&u&&(c.index<=u.index?u=null:c=null),c||u)b=(c||u).index,x=b+(c||u)[0].length;else if(!y)break;if(d&&!y&&b>w)break;if(c)y||(s=b,l=x),++y;else{if(!u||!y)throw new Error("Unbalanced delimiter found in string");if(!--y&&(m?(m[0]&&s>w&&v.push(e(m[0],n.slice(w,s),w,s)),m[1]&&v.push(e(m[1],n.slice(s,l),s,l)),m[2]&&v.push(e(m[2],n.slice(l,b),l,b)),m[3]&&v.push(e(m[3],n.slice(b,x),b,x))):v.push(n.slice(l,b)),w=x,!f))break}b===x&&++x}return f&&!d&&m&&m[0]&&n.length>w&&v.push(e(m[0],n.slice(w),w,n.length)),v}}(t),function(t){function e(t){return t.replace(/[- _]+/g,"").toLowerCase()}function n(t){for(;t.length<4;)t="0"+t;return t}function r(t){return parseInt(t,16)}function i(t){return parseInt(t,10).toString(16)}function a(t){var e=/^\\[xu](.+)/.exec(t);return e?r(e[1]):t.charCodeAt("\\"===t.charAt(0)?1:0)}function o(e){var r,o="",s=-1;return t.forEach(e,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(t){r=a(t[1]),r>s+1&&(o+="\\u"+n(i(s+1)),r>s+2&&(o+="-\\u"+n(i(r-1)))),s=a(t[2]||t[1])}),65535>s&&(o+="\\u"+n(i(s+1)),65534>s&&(o+="-\\uFFFF")),o}function s(t){var e="b!";return u[t][e]||(u[t][e]=o(u[t].bmp))}function l(t,e){var n=u[t],r="";return n.bmp&&!n.isBmpLast&&(r="["+n.bmp+"]"+(n.astral?"|":"")),n.astral&&(r+=n.astral),n.isBmpLast&&n.bmp&&(r+=(n.astral?"|":"")+"["+n.bmp+"]"),e?"(?:(?!"+r+")(?:[-][-]|[\x00-]))":"(?:"+r+")"}function c(t,e){var n=e?"a!":"a=";return u[t][n]||(u[t][n]=l(t,e))}var u={};t.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(n,r,i){var a="Invalid double negation ",o="Unknown Unicode token ",l="Unicode token missing data ",h="Astral mode required for Unicode token ",f="Astral mode does not support Unicode tokens within character classes",d="P"===n[1]||!!n[2],p=i.indexOf("A")>-1||t.isInstalled("astral"),g=e(n[4]||n[3]),m=u[g];if("P"===n[1]&&n[2])throw new SyntaxError(a+n[0]);if(!u.hasOwnProperty(g))throw new SyntaxError(o+n[0]);if(m.inverseOf){if(g=e(m.inverseOf),!u.hasOwnProperty(g))throw new ReferenceError(l+n[0]+" -> "+m.inverseOf);m=u[g],d=!d}if(!m.bmp&&!p)throw new SyntaxError(h+n[0]);if(p){if("class"===r)throw new SyntaxError(f);return c(g,d)}return"class"===r?d?s(g):m.bmp:(d?"[^":"[")+m.bmp+"]"},{scope:"all",optionalFlags:"A"}),t.addUnicodeData=function(n){var r,i,a="Unicode token requires name",o="Unicode token has no character data ";for(i=0;i<n.length;++i){if(r=n[i],!r.name)throw new Error(a);if(!(r.inverseOf||r.bmp||r.astral))throw new Error(o+r.name);u[e(r.name)]=r,r.alias&&(u[e(r.alias)]=r)}t.cache.flush("patterns")},t.addUnicodeData([{name:"L",alias:"Letter",bmp:"A-Za-z-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[-------------]|[-]|[--------------]|[-]|[------]|[-]|[--]|[-]|[-]|[-]|[-]|[--]|[--]|[]|[--][-]|[--------------]|[-------------------------]|[-]"}])}(t),function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Blocks");t.addUnicodeData([{name:"InAegean_Numbers",astral:"[-]"},{name:"InAlchemical_Symbols",astral:"[-]"},{name:"InAlphabetic_Presentation_Forms",bmp:"-"},{name:"InAncient_Greek_Musical_Notation",astral:"[-]"},{name:"InAncient_Greek_Numbers",astral:"[-]"},{name:"InAncient_Symbols",astral:"[-]"},{name:"InArabic",bmp:"-"},{name:"InArabic_Extended_A",bmp:"-"},{name:"InArabic_Mathematical_Alphabetic_Symbols",astral:"[-]"},{name:"InArabic_Presentation_Forms_A",bmp:"-"},{name:"InArabic_Presentation_Forms_B",bmp:"-"},{name:"InArabic_Supplement",bmp:"-"},{name:"InArmenian",bmp:"-"},{name:"InArrows",bmp:"-"},{name:"InAvestan",astral:"[-]"},{name:"InBalinese",bmp:"-"},{name:"InBamum",bmp:"-"},{name:"InBamum_Supplement",astral:"[-]"},{name:"InBasic_Latin",bmp:"\x00-"},{name:"InBatak",bmp:"-"},{name:"InBengali",bmp:"-"},{name:"InBlock_Elements",bmp:"-"},{name:"InBopomofo",bmp:"-"},{name:"InBopomofo_Extended",bmp:"-"},{name:"InBox_Drawing",bmp:"-"},{name:"InBrahmi",astral:"[-]"},{name:"InBraille_Patterns",bmp:"-"},{name:"InBuginese",bmp:"-"},{name:"InBuhid",bmp:"-"},{name:"InByzantine_Musical_Symbols",astral:"[-]"},{name:"InCJK_Compatibility",bmp:"-"},{name:"InCJK_Compatibility_Forms",bmp:"-"},{name:"InCJK_Compatibility_Ideographs",bmp:"-"},{name:"InCJK_Compatibility_Ideographs_Supplement",astral:"[-]"},{name:"InCJK_Radicals_Supplement",bmp:"-"},{name:"InCJK_Strokes",bmp:"-"},{name:"InCJK_Symbols_and_Punctuation",bmp:"-"},{name:"InCJK_Unified_Ideographs",bmp:"-"},{name:"InCJK_Unified_Ideographs_Extension_A",bmp:"-"},{name:"InCJK_Unified_Ideographs_Extension_B",astral:"[-][-]|[-]"},{name:"InCJK_Unified_Ideographs_Extension_C",astral:"[-]|[-][-]|[-]"},{name:"InCJK_Unified_Ideographs_Extension_D",astral:"[-]|[-]"},{name:"InCarian",astral:"[-]"},{name:"InChakma",astral:"[-]"},{name:"InCham",bmp:"-"},{name:"InCherokee",bmp:"-"},{name:"InCombining_Diacritical_Marks",bmp:"-"},{name:"InCombining_Diacritical_Marks_Supplement",bmp:"-"},{name:"InCombining_Diacritical_Marks_for_Symbols",bmp:"-"},{name:"InCombining_Half_Marks",bmp:"-"},{name:"InCommon_Indic_Number_Forms",bmp:"-"},{name:"InControl_Pictures",bmp:"-"},{name:"InCoptic",bmp:"-"},{name:"InCounting_Rod_Numerals",astral:"[-]"},{name:"InCuneiform",astral:"[-]"},{name:"InCuneiform_Numbers_and_Punctuation",astral:"[-]"},{name:"InCurrency_Symbols",bmp:"-"},{name:"InCypriot_Syllabary",astral:"[-]"},{name:"InCyrillic",bmp:"-"},{name:"InCyrillic_Extended_A",bmp:"-"},{name:"InCyrillic_Extended_B",bmp:"-"},{name:"InCyrillic_Supplement",bmp:"-"},{name:"InDeseret",astral:"[-]"},{name:"InDevanagari",bmp:"-"},{name:"InDevanagari_Extended",bmp:"-"},{name:"InDingbats",bmp:"-"},{name:"InDomino_Tiles",astral:"[-]"},{name:"InEgyptian_Hieroglyphs",astral:"[-]|[-]"},{name:"InEmoticons",astral:"[-]"},{name:"InEnclosed_Alphanumeric_Supplement",astral:"[-]"},{name:"InEnclosed_Alphanumerics",bmp:"-"},{name:"InEnclosed_CJK_Letters_and_Months",bmp:"-"},{name:"InEnclosed_Ideographic_Supplement",astral:"[-]"},{name:"InEthiopic",bmp:"-"},{name:"InEthiopic_Extended",bmp:"-"},{name:"InEthiopic_Extended_A",bmp:"-"},{name:"InEthiopic_Supplement",bmp:"-"},{name:"InGeneral_Punctuation",bmp:"-"},{name:"InGeometric_Shapes",bmp:"-"},{name:"InGeorgian",bmp:"-"},{name:"InGeorgian_Supplement",bmp:"-"},{name:"InGlagolitic",bmp:"-"},{name:"InGothic",astral:"[-]"},{name:"InGreek_Extended",bmp:"-"},{name:"InGreek_and_Coptic",bmp:"-"},{name:"InGujarati",bmp:"-"},{name:"InGurmukhi",bmp:"-"},{name:"InHalfwidth_and_Fullwidth_Forms",bmp:"-"},{name:"InHangul_Compatibility_Jamo",bmp:"-"},{name:"InHangul_Jamo",bmp:"-"},{name:"InHangul_Jamo_Extended_A",bmp:"-"},{name:"InHangul_Jamo_Extended_B",bmp:"-"},{name:"InHangul_Syllables",bmp:"-"},{name:"InHanunoo",bmp:"-"},{name:"InHebrew",bmp:"-"},{name:"InHigh_Private_Use_Surrogates",bmp:"-"},{name:"InHigh_Surrogates",bmp:"-"},{name:"InHiragana",bmp:"-"},{name:"InIPA_Extensions",bmp:"-"},{name:"InIdeographic_Description_Characters",bmp:"-"},{name:"InImperial_Aramaic",astral:"[-]"},{name:"InInscriptional_Pahlavi",astral:"[-]"},{name:"InInscriptional_Parthian",astral:"[-]"},{name:"InJavanese",bmp:"-"},{name:"InKaithi",astral:"[-]"},{name:"InKana_Supplement",astral:"[-]"},{name:"InKanbun",bmp:"-"},{name:"InKangxi_Radicals",bmp:"-"},{name:"InKannada",bmp:"-"},{name:"InKatakana",bmp:"-"},{name:"InKatakana_Phonetic_Extensions",bmp:"-"},{name:"InKayah_Li",bmp:"-"},{name:"InKharoshthi",astral:"[-]"},{name:"InKhmer",bmp:"-"},{name:"InKhmer_Symbols",bmp:"-"},{name:"InLao",bmp:"-"},{name:"InLatin_Extended_Additional",bmp:"-"},{name:"InLatin_Extended_A",bmp:"-"},{name:"InLatin_Extended_B",bmp:"-"},{name:"InLatin_Extended_C",bmp:"-"},{name:"InLatin_Extended_D",bmp:"-"},{name:"InLatin_1_Supplement",bmp:"-"},{name:"InLepcha",bmp:"-"},{name:"InLetterlike_Symbols",bmp:"-"},{name:"InLimbu",bmp:"-"},{name:"InLinear_B_Ideograms",astral:"[-]"},{name:"InLinear_B_Syllabary",astral:"[-]"},{name:"InLisu",bmp:"-"},{name:"InLow_Surrogates",bmp:"-"},{name:"InLycian",astral:"[-]"},{name:"InLydian",astral:"[-]"},{name:"InMahjong_Tiles",astral:"[-]"},{name:"InMalayalam",bmp:"-"},{name:"InMandaic",bmp:"-"},{name:"InMathematical_Alphanumeric_Symbols",astral:"[-]"},{name:"InMathematical_Operators",bmp:"-"},{name:"InMeetei_Mayek",bmp:"-"},{name:"InMeetei_Mayek_Extensions",bmp:"-"},{name:"InMeroitic_Cursive",astral:"[-]"},{name:"InMeroitic_Hieroglyphs",astral:"[-]"},{name:"InMiao",astral:"[-]"},{name:"InMiscellaneous_Mathematical_Symbols_A",bmp:"-"},{name:"InMiscellaneous_Mathematical_Symbols_B",bmp:"-"},{name:"InMiscellaneous_Symbols",bmp:"-"},{name:"InMiscellaneous_Symbols_And_Pictographs",astral:"[-]|[-]"},{name:"InMiscellaneous_Symbols_and_Arrows",bmp:"-"},{name:"InMiscellaneous_Technical",bmp:"-"},{name:"InModifier_Tone_Letters",bmp:"-"},{name:"InMongolian",bmp:"-"},{name:"InMusical_Symbols",astral:"[-]"},{name:"InMyanmar",bmp:"-"},{name:"InMyanmar_Extended_A",bmp:"-"},{name:"InNKo",bmp:"-"},{name:"InNew_Tai_Lue",bmp:"-"},{name:"InNumber_Forms",bmp:"-"},{name:"InOgham",bmp:"-"},{name:"InOl_Chiki",bmp:"-"},{name:"InOld_Italic",astral:"[-]"},{name:"InOld_Persian",astral:"[-]"},{name:"InOld_South_Arabian",astral:"[-]"},{name:"InOld_Turkic",astral:"[-]"},{name:"InOptical_Character_Recognition",bmp:"-"},{name:"InOriya",bmp:"-"},{name:"InOsmanya",astral:"[-]"},{name:"InPhags_pa",bmp:"-"},{name:"InPhaistos_Disc",astral:"[-]"},{name:"InPhoenician",astral:"[-]"},{name:"InPhonetic_Extensions",bmp:"-"},{name:"InPhonetic_Extensions_Supplement",bmp:"-"},{name:"InPlaying_Cards",astral:"[-]"},{name:"InPrivate_Use_Area",bmp:"-"},{name:"InRejang",bmp:"-"},{name:"InRumi_Numeral_Symbols",astral:"[-]"},{name:"InRunic",bmp:"-"},{name:"InSamaritan",bmp:"-"},{name:"InSaurashtra",bmp:"-"},{name:"InSharada",astral:"[-]"},{name:"InShavian",astral:"[-]"},{name:"InSinhala",bmp:"-"},{name:"InSmall_Form_Variants",bmp:"-"},{name:"InSora_Sompeng",astral:"[-]"},{name:"InSpacing_Modifier_Letters",bmp:"-"},{name:"InSpecials",bmp:"-"},{name:"InSundanese",bmp:"-"},{name:"InSundanese_Supplement",bmp:"-"},{name:"InSuperscripts_and_Subscripts",bmp:"-"},{name:"InSupplemental_Arrows_A",bmp:"-"},{name:"InSupplemental_Arrows_B",bmp:"-"},{name:"InSupplemental_Mathematical_Operators",bmp:"-"},{name:"InSupplemental_Punctuation",bmp:"-"},{name:"InSupplementary_Private_Use_Area_A",astral:"[-][-]"},{name:"InSupplementary_Private_Use_Area_B",astral:"[-][-]"},{name:"InSyloti_Nagri",bmp:"-"},{name:"InSyriac",bmp:"-"},{name:"InTagalog",bmp:"-"},{name:"InTagbanwa",bmp:"-"},{name:"InTags",astral:"[-]"},{name:"InTai_Le",bmp:"-"},{name:"InTai_Tham",bmp:"-"},{name:"InTai_Viet",bmp:"-"},{name:"InTai_Xuan_Jing_Symbols",astral:"[-]"},{name:"InTakri",astral:"[-]"},{name:"InTamil",bmp:"-"},{name:"InTelugu",bmp:"-"},{name:"InThaana",bmp:"-"},{name:"InThai",bmp:"-"},{name:"InTibetan",bmp:"-"},{name:"InTifinagh",bmp:"-"},{name:"InTransport_And_Map_Symbols",astral:"[-]"},{name:"InUgaritic",astral:"[-]"},{name:"InUnified_Canadian_Aboriginal_Syllabics",bmp:"-"},{name:"InUnified_Canadian_Aboriginal_Syllabics_Extended",bmp:"-"},{name:"InVai",bmp:"-"},{name:"InVariation_Selectors",bmp:"-"},{name:"InVariation_Selectors_Supplement",astral:"[-]"},{name:"InVedic_Extensions",bmp:"-"},{name:"InVertical_Forms",bmp:"-"},{name:"InYi_Radicals",bmp:"-"},{name:"InYi_Syllables",bmp:"-"},{name:"InYijing_Hexagram_Symbols",bmp:"-"}])}(t),function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");t.addUnicodeData([{name:"C",alias:"Other",isBmpLast:!0,bmp:"\x00-----------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[-]|[--]|[--------]|[----------------]|[-]|[----]|[-]|[-------------]|[-]|[------]|[-]|[--]|[--]|[-]|[-------][-]|[-------]|[---------------]|[-]|[-]|[------]|[-]|[---]|[-]"},{name:"Cc",alias:"Control",bmp:"\x00--"},{name:"Cf",alias:"Format",bmp:"------",astral:"[-]|[-]|"},{name:"Cn",alias:"Unassigned",bmp:"------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[-]|[---]|[-----]|[----------------]|[-]|[----]|[--]|[-------------]|[-]|[--------]|[------]|[][]|[-]|[--]|[-]|[-------][-]|[-------]|[-]|[---------------]|[-]|[-]|[-]|[---]|[-]"},{name:"Co",alias:"Private_Use",bmp:"-",astral:"[--][-]|[][-]"},{name:"Cs",alias:"Surrogate",bmp:"-"},{name:"Ll",alias:"Lowercase_Letter",bmp:"a-z-------------------------------------------",astral:"[--------------------------]|[-]"},{name:"Lm",alias:"Modifier_Letter",bmp:"-----------",astral:"[-]"},{name:"Lo",alias:"Other_Letter",bmp:"----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[-------------]|[--------------]|[-]|[------]|[-]|[--]|[-]|[-]|[-]|[-]|[-]|[-]|[]|[--][-]|[--------------]|[-]|[--]"},{name:"Lt",alias:"Titlecase_Letter",bmp:"---"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-Z------------------------------------",astral:"[-----------------------]|[-]"},{name:"M",alias:"Mark",bmp:"----------------------------------------------------------------------------------------------------------",astral:"[------]|[---]|[--]|[--------]|[-]||[-]"},{name:"Mc",alias:"Spacing_Mark",bmp:"-------------------------------",astral:"[-]|[--]|[]|[-]"},{name:"Me",alias:"Enclosing_Mark",bmp:"---"},{name:"Mn",alias:"Nonspacing_Mark",bmp:"------------------------------------------------------------------------------",astral:"[---]|[-----]|[-]|[-]|[------]||[-]"},{name:"N",alias:"Number",bmp:"0-9----------------------------------------------------------",astral:"[-----]|[-]|[-]|[-]|[----]|[-]|[-]|[-]|[-]|[----]"},{name:"Nd",alias:"Decimal_Number",bmp:"0-9----------------------------------",astral:"[----]|[-]|[-]|[-]"},{name:"Nl",alias:"Letter_Number",bmp:"------",astral:"[--]|[-]"},{name:"No",alias:"Other_Number",bmp:"----------------------",astral:"[-----]|[-]|[-]|[---]|[-]|[-]"},{name:"P",alias:"Punctuation",bmp:"!-#%-\\x2A,-/:;\\x3F@\\x5B-\\x5D_\\x7B}------------------------------------------------",astral:"[-]|[--]|[-]|[----]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_-"},{name:"Pd",alias:"Dash_Punctuation",bmp:"\\x2D-"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\x29\\x5D}"},{name:"Pf",alias:"Final_Punctuation",bmp:""},{name:"Pi",alias:"Initial_Punctuation",bmp:""},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\x2A,\\x2E/:;\\x3F@\\x5C---------------------------------------------",astral:"[-]|[--]|[-]|[----]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\x28\\x5B\\x7B"},{name:"S",alias:"Symbol",bmp:"\\x24\\x2B<->\\x5E`\\x7C~--------------------------------------------------------------------",astral:"[----------]|[]|[-------------------]|[--------]|[----]|[]"},{name:"Sc",alias:"Currency_Symbol",bmp:"\\x24--"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\x5E`----------"},{name:"Sm",alias:"Math_Symbol",bmp:"\\x2B<->\\x7C~----------------------",astral:"[]|[]"},{name:"So",alias:"Other_Symbol",bmp:"-------------------------------------------------------",astral:"[----------]|[--------]|[-------------------]|[----]"},{name:"Z",alias:"Separator",bmp:" -\u2028\u2029"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:" -"}])
}(t),function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Properties");t.addUnicodeData([{name:"ASCII",bmp:"\x00-"},{name:"Alphabetic",bmp:"A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",astral:"[-]|[-]|[-]|[-]|[------]|[--][-]|[-]|[--]|[-]|[-]|[--------------]|[---------------]|[---]|[-------------------------]|[--------------]|[--]|[]|[-]|[-]"},{name:"Any",isBmpLast:!0,bmp:"\x00-",astral:"[-][-]"},{name:"Assigned",inverseOf:"Cn"},{name:"Default_Ignorable_Code_Point",bmp:"------",astral:"[-][-]|[-]"},{name:"Lowercase",bmp:"a-z----------------------------------------------",astral:"[--------------------------]|[-]"},{name:"Noncharacter_Code_Point",bmp:"-",astral:"[][]"},{name:"Uppercase",bmp:"A-Z--------------------------------------",astral:"[-----------------------]|[-]"},{name:"White_Space",bmp:"	-\r -\u2028\u2029"}])}(t),function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Scripts");t.addUnicodeData([{name:"Arabic",bmp:"-------------------",astral:"[-]|[--------------]"},{name:"Armenian",bmp:"----"},{name:"Avestan",astral:"[--]"},{name:"Balinese",bmp:"--"},{name:"Bamum",bmp:"-",astral:"[-]"},{name:"Batak",bmp:"--"},{name:"Bengali",bmp:"---------"},{name:"Bopomofo",bmp:"--"},{name:"Brahmi",astral:"[--]"},{name:"Braille",bmp:"-"},{name:"Buginese",bmp:"-"},{name:"Buhid",bmp:"-"},{name:"Canadian_Aboriginal",bmp:"--"},{name:"Carian",astral:"[-]"},{name:"Chakma",astral:"[--]"},{name:"Cham",bmp:"----"},{name:"Cherokee",bmp:"-"},{name:"Common",bmp:"\x00-@\\x5B-`\\x7B------------------------------------------------------",astral:"[-----]|[--------------------]|[-]|[----------------]|[--------]|[----------]"},{name:"Coptic",bmp:"---"},{name:"Cuneiform",astral:"[--]|[-]"},{name:"Cypriot",astral:"[--]"},{name:"Cyrillic",bmp:"----"},{name:"Deseret",astral:"[-]"},{name:"Devanagari",bmp:"-----"},{name:"Egyptian_Hieroglyphs",astral:"[-]|[-]"},{name:"Ethiopic",bmp:"------------------------------"},{name:"Georgian",bmp:"----"},{name:"Glagolitic",bmp:"--"},{name:"Gothic",astral:"[-]"},{name:"Greek",bmp:"-----------------------",astral:"[-]|[-]"},{name:"Gujarati",bmp:"-----------"},{name:"Gurmukhi",bmp:"--------"},{name:"Han",bmp:"---------",astral:"[--][-]|[--]|[-]|[--]|[-]"},{name:"Hangul",bmp:"-------------"},{name:"Hanunoo",bmp:"-"},{name:"Hebrew",bmp:"------"},{name:"Hiragana",bmp:"--",astral:"|"},{name:"Imperial_Aramaic",astral:"[--]"},{name:"Inherited",bmp:"-----------",astral:"[----]||[-]"},{name:"Inscriptional_Pahlavi",astral:"[--]"},{name:"Inscriptional_Parthian",astral:"[--]"},{name:"Javanese",bmp:"--"},{name:"Kaithi",astral:"[-]"},{name:"Kannada",bmp:"----------"},{name:"Katakana",bmp:"-------",astral:""},{name:"Kayah_Li",bmp:"-"},{name:"Kharoshthi",astral:"[-------]"},{name:"Khmer",bmp:"----"},{name:"Lao",bmp:"---------"},{name:"Latin",bmp:"A-Za-z---------------------"},{name:"Lepcha",bmp:"---"},{name:"Limbu",bmp:"----"},{name:"Linear_B",astral:"[------]"},{name:"Lisu",bmp:"-"},{name:"Lycian",astral:"[-]"},{name:"Lydian",astral:"[-]"},{name:"Malayalam",bmp:"---------"},{name:"Mandaic",bmp:"-"},{name:"Meetei_Mayek",bmp:"---"},{name:"Meroitic_Cursive",astral:"[-]"},{name:"Meroitic_Hieroglyphs",astral:"[-]"},{name:"Miao",astral:"[---]"},{name:"Mongolian",bmp:"----"},{name:"Myanmar",bmp:"--"},{name:"New_Tai_Lue",bmp:"---"},{name:"Nko",bmp:"-"},{name:"Ogham",bmp:"-"},{name:"Ol_Chiki",bmp:"-"},{name:"Old_Italic",astral:"[--]"},{name:"Old_Persian",astral:"[--]"},{name:"Old_South_Arabian",astral:"[-]"},{name:"Old_Turkic",astral:"[-]"},{name:"Oriya",bmp:"---------"},{name:"Osmanya",astral:"[--]"},{name:"Phags_Pa",bmp:"-"},{name:"Phoenician",astral:"[-]"},{name:"Rejang",bmp:"-"},{name:"Runic",bmp:"--"},{name:"Samaritan",bmp:"--"},{name:"Saurashtra",bmp:"--"},{name:"Sharada",astral:"[--]"},{name:"Shavian",astral:"[-]"},{name:"Sinhala",bmp:"-------"},{name:"Sora_Sompeng",astral:"[--]"},{name:"Sundanese",bmp:"--"},{name:"Syloti_Nagri",bmp:"-"},{name:"Syriac",bmp:"---"},{name:"Tagalog",bmp:"--"},{name:"Tagbanwa",bmp:"--"},{name:"Tai_Le",bmp:"--"},{name:"Tai_Tham",bmp:"-----"},{name:"Tai_Viet",bmp:"--"},{name:"Takri",astral:"[--]"},{name:"Tamil",bmp:"---------"},{name:"Telugu",bmp:"------------"},{name:"Thaana",bmp:"-"},{name:"Thai",bmp:"--"},{name:"Tibetan",bmp:"------"},{name:"Tifinagh",bmp:"-"},{name:"Ugaritic",astral:"[-]"},{name:"Vai",bmp:"-"},{name:"Yi",bmp:"--"}])}(t),t}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("stacktrace",e):t.printStackTrace=e()}(this,function(){function t(e){e=e||{guess:!0};var n=e.e||null,r=!!e.guess,i=e.mode||null,a=new t.implementation,o=a.run(n,i);return r?a.guessAnonymousFunctions(o):o}return t.implementation=function(){},t.implementation.prototype={run:function(t,e){return t=t||this.createException(),e=e||this.mode(t),"other"===e?this.other(arguments.callee):this[e](t)},createException:function(){try{this.undef()}catch(t){return t}},mode:function(t){return"undefined"!=typeof window&&window.navigator.userAgent.indexOf("PhantomJS")>-1?"phantomjs":t.arguments&&t.stack?"chrome":t.stack&&t.sourceURL?"safari":t.stack&&t.number?"ie":t.stack&&t.fileName?"firefox":t.message&&t["opera#sourceloc"]?t.stacktrace?t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":t.message&&t.stack&&t.stacktrace?t.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":t.stack&&!t.fileName?"chrome":"other"},instrumentFunction:function(e,n,r){e=e||window;var i=e[n];e[n]=function(){return r.call(this,t().slice(4)),e[n]._instrumented.apply(this,arguments)},e[n]._instrumented=i},deinstrumentFunction:function(t,e){t[e].constructor===Function&&t[e]._instrumented&&t[e]._instrumented.constructor===Function&&(t[e]=t[e]._instrumented)},chrome:function(t){return(t.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(t){return t.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(t){return t.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(t){return t.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(t){for(var e="{anonymous}",n=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,r=t.stacktrace.split("\n"),i=[],a=0,o=r.length;o>a;a+=2){var s=n.exec(r[a]);if(s){var l=s[4]+":"+s[1]+":"+s[2],c=s[3]||"global code";c=c.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,e),i.push(c+"@"+l+" -- "+r[a+1].replace(/^\s+/,""))}}return i},opera10b:function(t){for(var e=/^(.*)@(.+):(\d+)$/,n=t.stacktrace.split("\n"),r=[],i=0,a=n.length;a>i;i++){var o=e.exec(n[i]);if(o){var s=o[1]?o[1]+"()":"global code";r.push(s+"@"+o[2]+":"+o[3])}}return r},opera10a:function(t){for(var e="{anonymous}",n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],a=0,o=r.length;o>a;a+=2){var s=n.exec(r[a]);if(s){var l=s[3]||e;i.push(l+"()@"+s[2]+":"+s[1]+" -- "+r[a+1].replace(/^\s+/,""))}}return i},opera9:function(t){for(var e="{anonymous}",n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],a=2,o=r.length;o>a;a+=2){var s=n.exec(r[a]);s&&i.push(e+"()@"+s[2]+":"+s[1]+" -- "+r[a+1].replace(/^\s+/,""))}return i},phantomjs:function(t){for(var e="{anonymous}",n=/(\S+) \((\S+)\)/i,r=t.stack.split("\n"),i=[],a=1,o=r.length;o>a;a++){r[a]=r[a].replace(/^\s+at\s+/gm,"");var s=n.exec(r[a]);i.push(s?s[1]+"()@"+s[2]:e+"()@"+r[a])}return i},other:function(t){for(var e,n,r="{anonymous}",i=/function(?:\s+([\w$]+))?\s*\(/,a=[],o=10,s=Array.prototype.slice;t&&a.length<o;){e=i.test(t.toString())?RegExp.$1||r:r;try{n=s.call(t.arguments||[])}catch(l){n=["Cannot access arguments: "+l]}a[a.length]=e+"("+this.stringifyArguments(n)+")";try{t=t.caller}catch(l){a[a.length]="Cannot access caller: "+l;break}}return a},stringifyArguments:function(t){for(var e=[],n=Array.prototype.slice,r=0;r<t.length;++r){var i=t[r];void 0===i?e[r]="undefined":null===i?e[r]="null":i.constructor&&(e[r]=i.constructor===Array?i.length<3?"["+this.stringifyArguments(i)+"]":"["+this.stringifyArguments(n.call(i,0,1))+"..."+this.stringifyArguments(n.call(i,-1))+"]":i.constructor===Object?"#object":i.constructor===Function?"#function":i.constructor===String?'"'+i+'"':i.constructor===Number?i:"?")}return e.join(",")},sourceCache:{},ajax:function(t){var e=this.createXMLHTTPObject();if(e)try{return e.open("GET",t,!1),e.send(null),e.responseText}catch(n){}return""},createXMLHTTPObject:function(){for(var t,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<e.length;n++)try{return t=e[n](),this.createXMLHTTPObject=e[n],t}catch(r){}},isSameDomain:function(t){return"undefined"!=typeof location&&-1!==t.indexOf(location.hostname)},getSource:function(t){return t in this.sourceCache||(this.sourceCache[t]=this.ajax(t).split("\n")),this.sourceCache[t]},guessAnonymousFunctions:function(t){for(var e=0;e<t.length;++e){var n=/\{anonymous\}\(.*\)@(.*)/,r=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,i=t[e],a=n.exec(i);if(a){var o=r.exec(a[1]);if(o){var s=o[1],l=o[2],c=o[3]||0;if(s&&this.isSameDomain(s)&&l){var u=this.guessAnonymousFunction(s,l,c);t[e]=i.replace("{anonymous}",u)}}}}return t},guessAnonymousFunction:function(t,e){var n;try{n=this.findFunctionName(this.getSource(t),e)}catch(r){n="getSource failed with url: "+t+", exception: "+r.toString()}return n},findFunctionName:function(t,e){for(var n,r,i,a=/function\s+([^(]*?)\s*\(([^)]*)\)/,o=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,s=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,l="",c=Math.min(e,20),u=0;c>u;++u)if(n=t[e-u-1],i=n.indexOf("//"),i>=0&&(n=n.substr(0,i)),n){if(l=n+l,r=o.exec(l),r&&r[1])return r[1];if(r=a.exec(l),r&&r[1])return r[1];if(r=s.exec(l),r&&r[1])return r[1]}return"(?)"}},t});var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,a=function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},o=t.webkitRequestFileSystem,s=t.requestFileSystem||o||t.mozRequestFileSystem,l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",u=0,h=500,f=function(e){var r=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};t.chrome?r():setTimeout(r,h)},d=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(a){l(a)}}},p=function(e,l){var h,p,g,m=this,v=e.type,y=!1,b=function(){d(m,"writestart progress write writeend".split(" "))},x=function(){if((y||!h)&&(h=n().createObjectURL(e)),p)p.location.href=h;else{var r=t.open(h,"_blank");void 0==r&&"undefined"!=typeof safari&&(t.location.href=h)}m.readyState=m.DONE,b(),f(h)},w=function(t){return function(){return m.readyState!==m.DONE?t.apply(this,arguments):void 0}},_={create:!0,exclusive:!1};return m.readyState=m.INIT,l||(l="download"),i?(h=n().createObjectURL(e),r.href=h,r.download=l,a(r),m.readyState=m.DONE,b(),void f(h)):(t.chrome&&v&&v!==c&&(g=e.slice||e.webkitSlice,e=g.call(e,0,e.size,c),y=!0),o&&"download"!==l&&(l+=".download"),(v===c||o)&&(p=t),s?(u+=e.size,void s(t.TEMPORARY,u,w(function(t){t.root.getDirectory("saved",_,w(function(t){var n=function(){t.getFile(l,_,w(function(t){t.createWriter(w(function(n){n.onwriteend=function(e){p.location.href=t.toURL(),m.readyState=m.DONE,d(m,"writeend",e),f(t)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=m["on"+t]}),n.write(e),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),x)}),x)};t.getFile(l,{create:!1},w(function(t){t.remove(),n()}),w(function(t){t.code===t.NOT_FOUND_ERR?n():x()}))}),x)}),x)):void x())},g=p.prototype,m=function(t,e){return new p(t,e)};return g.abort=function(){var t=this;t.readyState=t.DONE,d(t,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,m}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("FileSaver",[],function(){return saveAs}),define("utils",["underscore","storage","crel","xregexp","stacktrace","FileSaver"],function(_,storage,crel,XRegExp,printStackTrace,saveAs){function jqElt(t){return _.isString(t)||!t.val?$(t):t}function inputError(t,e){void 0!==e&&(t.stop(!0,!0).addClass("error").delay(3e3).queue(function(){$(this).removeClass("error"),$(this).dequeue()}),e.stopPropagation())}function getInputNumValue(t,e,n,r,i){e=jqElt(e);var a=utils.getInputTextValue(e,n);return void 0===a?void 0:(a=t?parseFloat(a):parseInt(a,10),isNaN(a)||void 0!==r&&r>a||void 0!==i&&a>i?void inputError(e,n):a)}function padNumber(t,e,n){var r="";for(0>t&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function dateGetter(t,e,n,r){return n=n||0,function(i){var a=i["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),padNumber(a,e,r)}}function dateStrGetter(t,e){return function(n,r){var i=n["get"+t](),a=(e?"SHORT"+t:t).toUpperCase();return r[a][i]}}var utils={};utils.msie=function(){var t=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10);return isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10)),t}(),utils.urlResolve=function(){var t=document.createElement("a");return function(e){var n=e;return utils.msie&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}}(),utils.defer=function(){var t=[],e="deferMsg";return window.addEventListener("message",function(n){n.source==window&&n.data==e&&(n.stopPropagation(),t.length>0&&t.shift()())},!0),function(n){t.push(n),window.postMessage(e,"*")}}(),utils.debounce=function(t,e){function n(){r=!1,t.call(e)}var r=!1;return function(){r!==!0&&(r=!0,utils.defer(n))}};var idAlphabet="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";utils.id=function(){for(var t=[],e=0;24>e;e++)t.push(idAlphabet[Math.random()*idAlphabet.length|0]);return t.join("")},utils.getURLParameter=function(t){var e=new RegExp("(?:\\?|\\#\\!|&)"+t+"=(.+?)(?:&|\\#|$)");try{return decodeURIComponent(e.exec(location.search+location.hash)[1])}catch(n){return void 0}},utils.getInputValue=function(t){return t=jqElt(t),t.val()},utils.setInputValue=function(t,e){t=jqElt(t),t.val(e)},utils.getInputTextValue=function(t,e,n){t=jqElt(t);var r=t.val();return void 0===r?void inputError(t,e):(r=utils.trim(r),0===r.length||void 0!==n&&!r.match(n)?void inputError(t,e):r)},utils.getInputIntValue=_.partial(getInputNumValue,!1),utils.getInputFloatValue=_.partial(getInputNumValue,!0),utils.getInputRegExpValue=function(t,e){t=jqElt(t);var n=utils.getInputTextValue(t,e);if(void 0===n)return void 0;try{new RegExp(n)}catch(r){return void inputError(t,e)}return n},utils.getInputJsValue=function(element,event){element=jqElt(element);var value=utils.getInputTextValue(element,event);if(void 0===value)return void 0;try{eval("var test="+value)}catch(e){return void inputError(element,event)}return value},utils.getInputJSONValue=function(t,e){t=jqElt(t);var n=utils.getInputTextValue(t,e);if(void 0===n)return void 0;try{JSON.parse(n)}catch(r){return void inputError(t,e)}return n},utils.getInputChecked=function(t){return t=jqElt(t),t.prop("checked")},utils.setInputChecked=function(t,e){t=jqElt(t),t.prop("checked",e).change()},utils.getInputRadio=function(t){return $("input:radio[name="+t+"]:checked").prop("value")},utils.setInputRadio=function(t,e){$("input:radio[name="+t+"][value="+e+"]").prop("checked",!0).change()},utils.resetModalInputs=function(){$(".modal input[type=text]:not([disabled]), .modal input[type=password], .modal textarea").val(""),$(".modal input[type=checkbox]").prop("checked",!1).change()},utils.trim=function(t){return $.trim(t)};var nonWordChars=XRegExp("[^\\p{L}\\p{N}-]","g");utils.slugify=function(t){return t.toLowerCase().replace(/\s/g,"-").replace(nonWordChars,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},utils.checkUrl=function(t,e){return t?(0!==t.indexOf("http")&&(t="http://"+t),e&&-1===t.indexOf("/",t.length-1)&&(t+="/"),t):t},utils.addModal=function(t,e){var n=crel("div",{"class":"modal "+t});n.innerHTML=e,document.body.appendChild(n)},utils.createBackdrop=function(t){var e=crel("div",{"class":"modal-backdrop fade"});return t=t||document.body,t.appendChild(e),e.offsetWidth,e.className=e.className+" in",e.removeBackdrop=function(){e.className="modal-backdrop fade",setTimeout(function(){e.parentNode.removeChild(e)},150)},e},utils.popupWindow=function(t,e,n,r){var i=screen.width/2-n/2,a=screen.height/2-r/2;return window.open(t,e,["toolbar=no, ","location=no, ","directories=no, ","status=no, ","menubar=no, ","scrollbars=no, ","resizable=no, ","copyhistory=no, ","width="+n+", ","height="+r+", ","top="+a+", ","left="+i].join(""))};var $windowElt=$(window);utils.iframe=function(t,e,n){function r(){var t=window.innerWidth-20;t>e&&(t=e);var r=window.innerHeight-50;r>n&&(r=n),o.setAttribute("width",t),o.setAttribute("height",r)}function i(){a.off("click.backdrop"),a[0].removeBackdrop(),$windowElt.off("resize.iframe"),o.parentNode.removeChild(o)}var a=$(utils.createBackdrop()),o=crel("iframe",{src:t,frameborder:0,"class":"modal-content modal-iframe"});return document.body.appendChild(o),r(),$windowElt.on("resize.iframe",r),o.removeIframe=i,a.on("click.backdrop",i),o};var redirectCallbackConfirm,redirectCallbackCancel;utils.redirectConfirm=function(t,e,n){redirectCallbackConfirm=e,redirectCallbackCancel=n,$(".modal-redirect-confirm .redirect-msg").html(t),$(".modal-redirect-confirm").modal("show")},utils.init=function(){$(".action-redirect-confirm").click(function(){redirectCallbackCancel=void 0,redirectCallbackConfirm()}),$(".modal-redirect-confirm").on("hidden.bs.modal",function(){_.defer(function(){redirectCallbackCancel&&redirectCallbackCancel()})})},utils.lockUI=function(t){var e=$(["#wmd-input","#preview-contents",".navbar .file-title-navbar",".navbar .left-buttons",".navbar .right-buttons",".navbar .buttons-dropdown"].join(",")).hide();return function(){e.show(),t&&t.apply(null,arguments)}};var entityMap={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","":" "};utils.escape=function(t){return String(t).replace(/[&<"'\/\u00a0]/g,function(t){return entityMap[t]})},utils.saveAs=function(t,e){if(void 0===saveAs||/constructor/i.test(window.HTMLElement))if(_.isString(t)){var n="data:application/octet-stream;base64,"+utils.encodeBase64(t);window.open(n,"file")}else{var r=new FileReader;r.onload=function(t){utils.redirectConfirm("You are opening a PDF document.",function(){var e="data:application/pdf;"+t.target.result.substring(t.target.result.indexOf("base64"));window.open(e,"file")})},r.readAsDataURL(t)}else _.isString(t)&&(t=new Blob([t],{type:"text/plain;charset=utf-8"})),saveAs(t,e)},utils.updateCurrentTime=function(){utils.currentTime=Date.now()},utils.updateCurrentTime(),utils.storeAttributes=function(t){var e=t.syncIndex||t.publishIndex,n=_.omit(t,"syncIndex","publishIndex","provider");n.provider=t.provider.providerId,storage[e]=JSON.stringify(n)},utils.retrieveIndexArray=function(t){try{return _.compact(storage[t].split(";"))}catch(e){return storage[t]=";",[]}},utils.appendIndexToArray=function(t,e){storage[t]+=e+";"},utils.removeIndexFromArray=function(t,e){storage[t]=storage[t].replace(";"+e+";",";")},utils.retrieveIgnoreError=function(t){try{return JSON.parse(storage[t])}catch(e){return void 0}};var eventList=[];utils.logValue=function(t){eventList.unshift(t),eventList.length>5&&eventList.pop()},utils.logStackTrace=function(){eventList.unshift(printStackTrace()),eventList.length>5&&eventList.pop()},utils.formatEventList=function(){var t=[];return _.each(eventList,function(e){t.push("\n"),_.isString(e)?t.push(e):_.isArray(e)&&(t.push(e[5]||""),t.push(e[6]||""))}),t.join("")};var DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0)},DATETIME_FORMATS={MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"};utils.formatDate=function(t){var e,n,r="",i=[],a=Date.now()-t,o="HH:mm";for(a>3155694e4?o="y":a>864e5&&(o="MMM d"),t=new Date(t);o;)n=DATE_FORMATS_SPLIT.exec(o),n?(i=i.concat(n.slice(1)),o=i.pop()):(i.push(o),o=null);return i.forEach(function(n){e=DATE_FORMATS[n],r+=e?e(t,DATETIME_FORMATS):n.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),r},utils.encodeBase64=function(t){if(0===t.length)return"";var e,n,r=[],i=0;for(t=encodeURI(t),e=t.length;e>i;)n=t[i],i+=1,"%"!==n?r.push(n.charCodeAt(0)):(n=t[i]+t[i+1],r.push(parseInt(n,16)),i+=2);var a,o,s="=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=[],u=r.length-r.length%3;for(a=0;u>a;a+=3)o=r[a]<<16|r[a+1]<<8|r[a+2],c.push(l.charAt(o>>18)),c.push(l.charAt(o>>12&63)),c.push(l.charAt(o>>6&63)),c.push(l.charAt(63&o));switch(r.length-u){case 1:o=r[a]<<16,c.push(l.charAt(o>>18)+l.charAt(o>>12&63)+s+s);break;case 2:o=r[a]<<16|r[a+1]<<8,c.push(l.charAt(o>>18)+l.charAt(o>>12&63)+l.charAt(o>>6&63)+s)}return c.join("")},utils.decodeBase64=function(t){return decodeURIComponent(window.escape(window.atob(t)))};var mHash=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];return utils.crc32=function(t){var e=0,n=-1;return t.split("").forEach(function(t){e=255&(n^t.charCodeAt(0)),n=n>>>8^mHash[e]}),n=-1^n,0>n&&(n=4294967295+n+1),n.toString(16)},window.perfTest=function(t){for(var e=Date.now(),n=0;1e4>n;n++)t();console.log("Run 10,000 times in "+(Date.now()-e)+"ms")},utils}),define("constants",[],function(){var t={};return t.VERSION="4.3.8",t.MAIN_URL="https://stackedit.io/",t.GOOGLE_ANALYTICS_ACCOUNT_ID="UA-39556145-1",t.GOOGLE_API_KEY="AIzaSyAeCU8CGcSkn0z9js6iocHuPBX4f_mMWkw",t.GOOGLE_DRIVE_APP_ID="241271498917",t.DROPBOX_APP_KEY="lq6mwopab8wskas",t.DROPBOX_APP_SECRET="851fgnucpezy84t",t.DROPBOX_RESTRICTED_APP_KEY="sw0hlixhr8q1xk0",t.DROPBOX_RESTRICTED_APP_SECRET="1r808p2xygs6lbg",t.BITLY_ACCESS_TOKEN="317e033bfd48cf31155a68a536b1860013b09c4c",t.DEFAULT_FILE_TITLE="Title",t.DEFAULT_FOLDER_NAME="New folder",t.GDRIVE_DEFAULT_FILE_TITLE="New Markdown document",t.EDITOR_DEFAULT_PADDING=35,t.CHECK_ONLINE_PERIOD=12e4,t.AJAX_TIMEOUT=3e4,t.ASYNC_TASK_DEFAULT_TIMEOUT=6e4,t.ASYNC_TASK_LONG_TIMEOUT=18e4,t.USER_IDLE_THRESHOLD=3e5,t.IMPORT_FILE_MAX_CONTENT_SIZE=1e5,t.IMPORT_IMG_MAX_CONTENT_SIZE=1e7,t.COUCHDB_PAGE_SIZE=25,t.TEMPORARY_FILE_INDEX="file.tempIndex",t.WELCOME_DOCUMENT_TITLE="Hello!",t.DOWNLOAD_IMPORT_URL="/downloadImport",t.PICASA_IMPORT_IMG_URL="/picasaImportImg",t.SSH_PUBLISH_URL="/sshPublish",t.PDF_EXPORT_URL="/pdfExport",t.COUCHDB_URL="https://stackedit.couchappy.com/documents",t.BASE_URL="http://localhost/",t.GOOGLE_CLIENT_ID="241271498917-lev37kef013q85avc91am1gccg5g8lrb.apps.googleusercontent.com",t.GITHUB_CLIENT_ID="e47fef6055344579799d",t.GATEKEEPER_URL="https://stackedit-gatekeeper-localhost.herokuapp.com/",t.TUMBLR_PROXY_URL="https://stackedit-tumblr-proxy-local.herokuapp.com/",t.WORDPRESS_CLIENT_ID="23361",t.WORDPRESS_PROXY_URL="https://stackedit-io-wordpress-proxy.herokuapp.com/",0===location.hostname.indexOf("stackedit.io")?(t.BASE_URL=t.MAIN_URL,t.GOOGLE_CLIENT_ID="241271498917-t4t7d07qis7oc0ahaskbif3ft6tk63cd.apps.googleusercontent.com",t.GITHUB_CLIENT_ID="710fc67886ab1ae8fee6",t.GATEKEEPER_URL="https://stackedit-io-gatekeeper.herokuapp.com/",t.TUMBLR_PROXY_URL="https://stackedit-io-tumblr-proxy.herokuapp.com/"):0===location.hostname.indexOf("benweet.github.io")?(t.BASE_URL="http://benweet.github.io/stackedit/",t.GOOGLE_CLIENT_ID="241271498917-jpto9lls9fqnem1e4h6ppds9uob8rpvu.apps.googleusercontent.com",t.GITHUB_CLIENT_ID="fa0d09514da8377ee32e",t.GATEKEEPER_URL="https://stackedit-gatekeeper.herokuapp.com/",t.TUMBLR_PROXY_URL="https://stackedit-tumblr-proxy.herokuapp.com/",t.WORDPRESS_CLIENT_ID="3185",t.WORDPRESS_PROXY_URL="https://stackedit-wordpress-proxy.herokuapp.com/"):0===location.hostname.indexOf("stackedit-beta.herokuapp.com")?(t.BASE_URL="https://stackedit-beta.herokuapp.com/",t.GOOGLE_CLIENT_ID="241271498917-9bbplknkt0ljv5gaudhoiogp13hd18be.apps.googleusercontent.com",t.GITHUB_CLIENT_ID="e9034ae191c3a8a1c5ed",t.GATEKEEPER_URL="https://stackedit-beta-gatekeeper.herokuapp.com/",t.TUMBLR_PROXY_URL="https://stackedit-beta-tumblr-proxy.herokuapp.com/",t.WORDPRESS_CLIENT_ID="34786",t.WORDPRESS_PROXY_URL="https://stackedit-beta-wordpress-proxy.herokuapp.com/"):0===location.hostname.indexOf("benweet.insomnia247.nl")&&(t.BASE_URL="http://benweet.insomnia247.nl/stackedit/",t.GOOGLE_CLIENT_ID="241271498917-52hae7a08hv7ltenv7km8h7lghno9sk3.apps.googleusercontent.com",t.GITHUB_CLIENT_ID="d2943d6074b2d9c4a830",t.GATEKEEPER_URL="https://stackedit-gatekeeper-insomnia.herokuapp.com/",t.TUMBLR_PROXY_URL="https://stackedit-tumblr-proxy-beta.herokuapp.com/"),t.THEME_LIST={blue:"Blue","default":"Default",gray:"Gray",night:"Night",school:"School","solarized-light":"Solarized Light","solarized-dark":"Solarized Dark"},t
}),define("settings",["underscore","constants","storage"],function(t,e,n){var r={layoutOrientation:"horizontal",editMode:"ltr",lazyRendering:!0,editorFontClass:"font-rich",fontSizeRatio:1,maxWidthRatio:1,cursorFocusRatio:.5,defaultContent:"\n\n\n> Written with [StackEdit]("+e.MAIN_URL+").",commitMsg:"Published with "+e.MAIN_URL,conflictMode:"merge",markdownMimeType:"text/plain",gdriveMultiAccount:1,gdriveFullAccess:!0,dropboxFullAccess:!0,githubFullAccess:!0,template:["<!DOCTYPE html>","<html>","<head>",'<meta charset="utf-8">','<meta name="viewport" content="width=device-width, initial-scale=1.0">',"<title><%= documentTitle %></title>",'<link rel="stylesheet" href="'+e.MAIN_URL+'res-min/themes/base.css" />','<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>',"</head>",'<body><div class="container"><%= documentHTML %></div></body>',"</html>"].join("\n"),pdfTemplate:["<!DOCTYPE html>","<html>","<head>",'<meta charset="utf-8">',"<title><%= documentTitle %></title>",'<link rel="stylesheet" href="http://localhost/res-min/themes/base.css" />','<script type="text/x-mathjax-config">','MathJax.Hub.Config({ messageStyle: "none" });',"</script>",'<script type="text/javascript" src="http://localhost/res/bower-libs/MathJax/MathJax.js?config=TeX-AMS_HTML"></script>',"</head>","<body><%= documentHTML %></body>","</html>"].join("\n"),pdfOptions:["{",'    "marginTop": 25,','    "marginRight": 25,','    "marginBottom": 25,','    "marginLeft": 25,','    "pageSize": "A4"',"}"].join("\n"),couchdbUrl:e.COUCHDB_URL,extensionSettings:{}};try{t.extend(r,JSON.parse(n.settings))}catch(i){}return r}),function(t,e){function n(t,e,n){return t.addEventListener?void t.addEventListener(e,n,!1):void t.attachEvent("on"+e,n)}function r(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return S[t.which]?S[t.which]:E[t.which]?E[t.which]:String.fromCharCode(t.which).toLowerCase()}function i(t,e){return t.sort().join(",")===e.sort().join(",")}function a(t){t=t||{};var e,n=!1;for(e in R)t[e]?n=!0:R[e]=0;n||(L=!1)}function o(t,e,n,r,a,o){var s,l,c=[],u=n.type;if(!I[t])return[];for("keyup"==u&&d(t)&&(e=[t]),s=0;s<I[t].length;++s)if(l=I[t][s],(r||!l.seq||R[l.seq]==l.level)&&u==l.action&&("keypress"==u&&!n.metaKey&&!n.ctrlKey||i(e,l.modifiers))){var h=!r&&l.combo==a,f=r&&l.seq==r&&l.level==o;(h||f)&&I[t].splice(s,1),c.push(l)}return c}function s(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function l(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function c(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function u(t,e,n,r){D.stopCallback(e,e.target||e.srcElement,n,r)||t(e,n)===!1&&(l(e),c(e))}function h(t,e,n){var r,i=o(t,e,n),s={},l=0,c=!1;for(r=0;r<i.length;++r)i[r].seq&&(l=Math.max(l,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=l)continue;c=!0,s[i[r].seq]=1,u(i[r].callback,n,i[r].combo,i[r].seq)}else c||u(i[r].callback,n,i[r].combo);var h="keypress"==n.type&&M;n.type!=L||d(t)||h||a(s),M=c&&"keydown"==n.type}function f(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=r(t);if(e)return"keyup"==t.type&&A===e?void(A=!1):void D.handleKey(e,s(t),t)}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function p(){clearTimeout(C),C=setTimeout(a,1e3)}function g(){if(!_){_={};for(var t in S)t>95&&112>t||S.hasOwnProperty(t)&&(_[S[t]]=t)}return _}function m(t,e,n){return n||(n=g()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function v(t,e,n,i){function o(e){return function(){L=e,++R[t],p()}}function s(e){u(n,e,t),"keyup"!==i&&(A=r(e)),setTimeout(a,10)}R[t]=0;for(var l=0;l<e.length;++l){var c=l+1===e.length,h=c?s:o(i||b(e[l+1]).action);x(e[l],h,i,t,l)}}function y(t){return"+"===t?["+"]:t.split("+")}function b(t,e){var n,r,i,a=[];for(n=y(t),i=0;i<n.length;++i)r=n[i],T[r]&&(r=T[r]),e&&"keypress"!=e&&k[r]&&(r=k[r],a.push("shift")),d(r)&&a.push(r);return e=m(r,a,e),{key:r,modifiers:a,action:e}}function x(t,e,n,r,i){N[t+":"+n]=e,t=t.replace(/\s+/g," ");var a,s=t.split(" ");return s.length>1?void v(t,s,e,n):(a=b(t,n),I[a.key]=I[a.key]||[],o(a.key,a.modifiers,{type:a.action},r,t,i),void I[a.key][r?"unshift":"push"]({callback:e,modifiers:a.modifiers,action:a.action,seq:r,level:i,combo:t}))}function w(t,e,n){for(var r=0;r<t.length;++r)x(t[r],e,n)}for(var _,C,S={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},k={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},T={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},I={},N={},R={},A=!1,M=!1,L=!1,O=1;20>O;++O)S[111+O]="f"+O;for(O=0;9>=O;++O)S[O+96]=O;n(e,"keypress",f),n(e,"keydown",f),n(e,"keyup",f);var D={bind:function(t,e,n){return t=t instanceof Array?t:[t],w(t,e,n),this},unbind:function(t,e){return D.bind(t,function(){},e)},trigger:function(t,e){return N[t+":"+e]&&N[t+":"+e]({},t),this},reset:function(){return I={},N={},this},stopCallback:function(t,e){return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},handleKey:h};t.Mousetrap=D,"function"==typeof define&&define.amd&&define("mousetrap",D)}(window,document),define("logger",[],function(){var t={log:function(){},info:function(){},warn:function(){},error:function(){}};return/(\?|&)console($|&)/.test(location.search)?console:t}),define("classes/Extension",[],function(){function t(t,e,n,r){this.extensionId=t,this.extensionName=e,this.isOptional=n,this.disableInViewer=r}return t}),function(){var t=function(t,e,n,r){this.rawMessage=t,this.parsedLine=void 0!==e?e:-1,this.snippet=void 0!==n?n:null,this.parsedFile=void 0!==r?r:null,this.updateRepr(),this.message=t};t.prototype={name:"YamlParseException",message:null,parsedFile:null,parsedLine:-1,snippet:null,rawMessage:null,isDefined:function(t){return void 0!=t&&null!=t},getSnippet:function(){return this.snippet},setSnippet:function(t){this.snippet=t,this.updateRepr()},getParsedFile:function(){return this.parsedFile},setParsedFile:function(t){this.parsedFile=t,this.updateRepr()},getParsedLine:function(){return this.parsedLine},setParsedLine:function(t){this.parsedLine=t,this.updateRepr()},updateRepr:function(){this.message=this.rawMessage;var t=!1;"."===this.message.charAt(this.message.length-1)&&(this.message=this.message.substring(0,this.message.length-1),t=!0),null!==this.parsedFile&&(this.message+=" in "+JSON.stringify(this.parsedFile)),this.parsedLine>=0&&(this.message+=" at line "+this.parsedLine),this.snippet&&(this.message+=' (near "'+this.snippet+'")'),t&&(this.message+=".")}};var e=!1,n=function(){};n.prototype={parseFile:function(e,r){if(null==r){var i=this.getFileContents(e),a=null;try{a=this.parse(i)}catch(o){throw o instanceof t&&o.setParsedFile(e),o}return a}this.getFileContents(e,function(t){r((new n).parse(t))})},parse:function(t){var e=new a;return e.parse(t)},dump:function(t,e,n){null==e&&(e=2);var r=new s;return n&&(r.numSpacesForIndentation=n),r.dump(t,e)},getXHR:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],e=0;4>e;e++)try{return new ActiveXObject(t[e])}catch(n){}return null},getFileContents:function(t,n){if(e){var r=require("fs");if(null==n){var i=r.readFileSync(t);return null==i?null:""+i}r.readFile(t,function(t,e){n(t?null:e)})}else{var a=this.getXHR();if(null==n)return a.open("GET",t,!1),a.send(null),200==a.status||0==a.status?a.responseText:null;a.onreadystatechange=function(){4==a.readyState&&n(200==a.status||0==a.status?a.responseText:null)},a.open("GET",t,!0),a.send(null)}}};var r={stringify:function(t,e,r){return(new n).dump(t,e,r)},parse:function(t){return(new n).parse(t)},load:function(t,e){return(new n).parseFile(t,e)}};"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=r,e=!0,function(){var t=function(t,e){t.exports=r.load(e)};void 0!==require.extensions&&(require.extensions[".yml"]=t,require.extensions[".yaml"]=t)}()),"undefined"!=typeof window&&(window.YAML=r);var i=function(){};i.prototype={i:null,parse:function(e){var n=null;if(e=this.trim(e),0==e.length)return"";switch(e.charAt(0)){case"[":n=this.parseSequence(e);break;case"{":n=this.parseMapping(e);break;default:n=this.parseScalar(e)}if(""!=e.substr(this.i+1).replace(/^\s*#.*$/,""))throw console.log("oups "+e.substr(this.i+1)),new t('Unexpected characters near "'+e.substr(this.i)+'".');return n},dump:function(t){if(void 0==t||null==t)return"null";if(t instanceof Date)return t.toISOString();if("object"==typeof t)return this.dumpObject(t);if("boolean"==typeof t)return t?"true":"false";if(/^\d+$/.test(t))return"string"==typeof t?"'"+t+"'":parseInt(t);if(this.isNumeric(t))return"string"==typeof t?"'"+t+"'":parseFloat(t);if("number"==typeof t)return 1/0==t?".Inf":t==-1/0?"-.Inf":isNaN(t)?".NAN":t;var e=new YamlEscaper;return e.requiresDoubleQuoting(t)?e.escapeWithDoubleQuotes(t):e.requiresSingleQuoting(t)?e.escapeWithSingleQuotes(t):""==t?'""':this.getTimestampRegex().test(t)?"'"+t+"'":this.inArray(t.toLowerCase(),["null","~","true","false"])?"'"+t+"'":t},dumpObject:function(t){var e,n=this.getKeys(t),r=null,i=n.length;if(t instanceof Array){for(r=[],e=0;i>e;e++)r.push(this.dump(t[n[e]]));return"["+r.join(", ")+"]"}for(r=[],e=0;i>e;e++)r.push(this.dump(n[e])+": "+this.dump(t[n[e]]));return"{ "+r.join(", ")+" }"},parseScalar:function(e,n,r,i,a){void 0==n&&(n=null),void 0==r&&(r=['"',"'"]),void 0==i&&(i=0),void 0==a&&(a=!0);var o=null,s=null,l=null;if(this.inArray(e[i],r)){if(o=this.parseQuotedScalar(e,i),i=this.i,null!==n){var c=e.substr(i).replace(/^\s+/,"");if(!this.inArray(c.charAt(0),n))throw new t("Unexpected characters ("+e.substr(i)+").")}}else{if(n){if(!(l=new RegExp("^(.+?)("+n.join("|")+")").exec((e+"").substring(i))))throw new t("Malformed inline YAML string ("+e+").");o=l[1],i+=o.length}else o=(e+"").substring(i),i+=o.length,s=o.indexOf(" #"),-1!=s&&(o=o.substr(0,s).replace(/\s+$/g,""));o=a?this.evaluateScalar(o):o}return this.i=i,o},parseQuotedScalar:function(e,n){var r=null;if(!(r=new RegExp("^"+i.REGEX_QUOTED_STRING).exec((e+"").substring(n))))throw new t("Malformed inline YAML string ("+(e+"").substring(n)+").");var a=r[0].substr(1,r[0].length-2),s=new o;return a='"'==(e+"").charAt(n)?s.unescapeDoubleQuotedString(a):s.unescapeSingleQuotedString(a),n+=r[0].length,this.i=n,a},parseSequence:function(e,n){void 0==n&&(n=0);var r=[],i=e.length;for(n+=1;i>n;){switch(e.charAt(n)){case"[":r.push(this.parseSequence(e,n)),n=this.i;break;case"{":r.push(this.parseMapping(e,n)),n=this.i;break;case"]":return this.i=n,r;case",":case" ":break;default:var a=this.inArray(e.charAt(n),['"',"'"]),o=this.parseScalar(e,[",","]"],['"',"'"],n);if(n=this.i,!a&&-1!=(o+"").indexOf(": "))try{o=this.parseMapping("{"+o+"}")}catch(s){if(!(s instanceof t))throw s}r.push(o),n--}n++}throw new t('Malformed inline YAML string "'+e+'"')},parseMapping:function(e,n){void 0==n&&(n=0);var r={},i=e.length;n+=1;for(var a=!1,o=!1;i>n;){switch(o=!1,e.charAt(n)){case" ":case",":n++,o=!0;break;case"}":return this.i=n,r}if(!o){var s=this.parseScalar(e,[":"," "],['"',"'"],n,!1);for(n=this.i,a=!1;i>n;){switch(e.charAt(n)){case"[":r[s]=this.parseSequence(e,n),n=this.i,a=!0;break;case"{":r[s]=this.parseMapping(e,n),n=this.i,a=!0;break;case":":case" ":break;default:r[s]=this.parseScalar(e,[",","}"],['"',"'"],n),n=this.i,a=!0,n--}if(++n,a){o=!0;break}}}}throw new t('Malformed inline YAML string "'+e+'"')},evaluateScalar:function(t){t=this.trim(t);var e=null,n=null;return"null"==t.toLowerCase()||""==t||"~"==t?null:0==(t+"").indexOf("!str ")?(""+t).substring(5):0==(t+"").indexOf("! ")?parseInt(this.parseScalar((t+"").substr(2))):/^\d+$/.test(t)?(e=t,n=parseInt(t),"0"==t.charAt(0)?this.octdec(t):""+e==""+n?n:e):"true"==(t+"").toLowerCase()?!0:"false"==(t+"").toLowerCase()?!1:this.isNumeric(t)?"0x"==(t+"").substr(0,2)?this.hexdec(t):parseFloat(t):".inf"==t.toLowerCase()?1/0:".nan"==t.toLowerCase()?0/0:"-.inf"==t.toLowerCase()?-1/0:/^(-|\+)?[0-9,]+(\.[0-9]+)?$/.test(t)?parseFloat(t.split(",").join("")):this.getTimestampRegex().test(t)?new Date(this.strtotime(t)):""+t},getTimestampRegex:function(){return new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ 	]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:.([0-9]*))?(?:[ 	]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$","gi")},trim:function(t){return(t+"").replace(/^\s+/,"").replace(/\s+$/,"")},isNumeric:function(t){return t-0==t&&t.length>0&&""!=t.replace(/\s+/g,"")},inArray:function(t,e){var n,r=e.length;for(n=0;r>n;n++)if(t==e[n])return!0;return!1},getKeys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},octdec:function(t){return parseInt((t+"").replace(/[^0-7]/gi,""),8)},hexdec:function(t){return t=this.trim(t),"0x"==(t+"").substr(0,2)&&(t=(t+"").substring(2)),parseInt((t+"").replace(/[^a-f0-9]/gi,""),16)},strtotime:function(t,e){var n,r,i,a,o="";if(t=(t+"").replace(/\s{2,}|^\s|\s$/g," ").replace(/[\t\r\n]/g,""),"now"===t)return null===e||isNaN(e)?(new Date).getTime()||0:e||0;if(!isNaN(o=Date.parse(t)))return o||0;e=e?new Date(e):new Date,t=t.toLowerCase();var s={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},l=function(t){var n=t[2]&&"ago"===t[2],r=(r="last"===t[0]?-1:1)*(n?-1:1);switch(t[0]){case"last":case"next":switch(t[1].substring(0,3)){case"yea":e.setFullYear(e.getFullYear()+r);break;case"wee":e.setDate(e.getDate()+7*r);break;case"day":e.setDate(e.getDate()+r);break;case"hou":e.setHours(e.getHours()+r);break;case"min":e.setMinutes(e.getMinutes()+r);break;case"sec":e.setSeconds(e.getSeconds()+r);break;case"mon":if("month"===t[1]){e.setMonth(e.getMonth()+r);break}default:var i=s.day[t[1].substring(0,3)];if("undefined"!=typeof i){var a=i-e.getDay();0===a?a=7*r:a>0?"last"===t[0]&&(a-=7):"next"===t[0]&&(a+=7),e.setDate(e.getDate()+a),e.setHours(0,0,0,0)}}break;default:if(!/\d+/.test(t[0]))return!1;switch(r*=parseInt(t[0],10),t[1].substring(0,3)){case"yea":e.setFullYear(e.getFullYear()+r);break;case"mon":e.setMonth(e.getMonth()+r);break;case"wee":e.setDate(e.getDate()+7*r);break;case"day":e.setDate(e.getDate()+r);break;case"hou":e.setHours(e.getHours()+r);break;case"min":e.setMinutes(e.getMinutes()+r);break;case"sec":e.setSeconds(e.getSeconds()+r)}}return!0};if(i=t.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/),null!==i)return i[2]?i[3]||(i[2]+=":00"):i[2]="00:00:00",a=i[1].split(/-/g),a[1]=s.mon[a[1]-1]||a[1],a[0]=+a[0],a[0]=a[0]>=0&&a[0]<=69?"20"+(a[0]<10?"0"+a[0]:a[0]+""):a[0]>=70&&a[0]<=99?"19"+a[0]:a[0]+"",parseInt(this.strtotime(a[2]+" "+a[1]+" "+a[0]+" "+i[2])+(i[4]?i[4]:""),10);var c="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(i=t.match(new RegExp(c,"gi")),null===i)return!1;for(n=0,r=i.length;r>n;n++)if(!l(i[n].split(" ")))return!1;return e.getTime()||0}},i.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')";var a=function(t){this.offset=void 0!==t?t:0};a.prototype={offset:0,lines:[],currentLineNb:-1,currentLine:"",refs:{},parse:function(e){this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(e).split("\n");for(var n=null,r=null;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("	"==this.currentLine.charAt(0))throw new t("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);var o=!1,s=!1,l=!1,c=null,u=null,h=null,f=null,d=null,p=null,g=null,m=null,v=null;if(c=/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)){if(r&&"mapping"==r)throw new t("You cannot define a sequence item when in a mapping",this.getRealCurrentLineNb()+1,this.currentLine);r="sequence",this.isDefined(n)||(n=[]),c={leadspaces:c[2],value:c[3]},this.isDefined(c.value)&&(u=/^&([^ ]+) *(.*)/.exec(c.value))&&(u={ref:u[1],value:u[2]},o=u.ref,c.value=u.value),this.isDefined(c.value)&&""!=this.trim(c.value)&&"#"!=c.value.replace(/^ +/,"").charAt(0)?this.isDefined(c.leadspaces)&&" "==c.leadspaces&&(u=new RegExp("^("+i.REGEX_QUOTED_STRING+"|[^ '\"{[].*?) *:(\\s+(.+?))?\\s*$").exec(c.value))?(u={key:u[1],value:u[3]},h=this.getRealCurrentLineNb(),f=new a(h),f.refs=this.refs,d=c.value,this.isNextLineIndented()||(d+="\n"+this.getNextEmbedBlock(this.getCurrentLineIndentation()+2)),n.push(f.parse(d)),this.refs=f.refs):n.push(this.parseValue(c.value)):(h=this.getRealCurrentLineNb()+1,f=new a(h),f.refs=this.refs,n.push(f.parse(this.getNextEmbedBlock())),this.refs=f.refs)}else{if(!(c=new RegExp("^("+i.REGEX_QUOTED_STRING+"|[^ '\"[{].*?) *:(\\s+(.+?))?\\s*$").exec(this.currentLine))){if(2==this.lines.length&&this.isEmpty(this.lines[1])){try{e=(new i).parse(this.lines[0])}catch(y){throw y instanceof t&&(y.setParsedLine(this.getRealCurrentLineNb()+1),y.setSnippet(this.currentLine)),y}if(this.isObject(e)){var b=e[0];if("string"==typeof e&&"*"==b.charAt(0)){n=[],m=e.length;for(var x=0;m>x;x++)n.push(this.refs[e[x].substr(1)]);e=n}}return e}throw new t("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.isDefined(n)||(n={}),r&&"sequence"==r)throw new t("You cannot define a mapping item when in a sequence",this.getRealCurrentLineNb()+1,this.currentLine);r="mapping",c={key:c[1],value:c[3]};try{p=(new i).parseScalar(c.key)}catch(y){throw y instanceof t&&(y.setParsedLine(this.getRealCurrentLineNb()+1),y.setSnippet(this.currentLine)),y}if("<<"==p)if(this.isDefined(c.value)&&"*"==(c.value+"").charAt(0)){if(s=c.value.substr(1),void 0==this.refs[s])throw new t('Reference "'+e+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine)}else{e=this.isDefined(c.value)&&""!=c.value?c.value:this.getNextEmbedBlock(),h=this.getRealCurrentLineNb()+1,f=new a(h),f.refs=this.refs,g=f.parse(e),this.refs=f.refs;var w=[];if(!this.isObject(g))throw new t("YAML merge keys used with a scalar value instead of an array",this.getRealCurrentLineNb()+1,this.currentLine);if(this.isDefined(g[0])){v=this.reverseArray(g),m=v.length;for(var x=0;m>x;x++){{v[x]}if(!this.isObject(v[x]))throw new t("Merge items must be arrays",this.getRealCurrentLineNb()+1,this.currentLine);w=this.mergeObject(v[x],w)}}else w=this.mergeObject(w,g);l=w}else this.isDefined(c.value)&&(u=/^&([^ ]+) *(.*)/.exec(c.value))&&(u={ref:u[1],value:u[2]},o=u.ref,c.value=u.value);l?n=l:this.isDefined(c.value)&&""!=this.trim(c.value)&&"#"!=this.trim(c.value).charAt(0)?s?n=this.refs[s]:n[p]=this.parseValue(c.value):this.isNextLineIndented()&&!this.isNextLineUnIndentedCollection()?n[p]=null:(h=this.getRealCurrentLineNb()+1,f=new a(h),f.refs=this.refs,n[p]=f.parse(this.getNextEmbedBlock()),this.refs=f.refs)}if(o)if(n instanceof Array)this.refs[o]=n[n.length-1];else{var _=null;for(var C in n)n.hasOwnProperty(C)&&(_=C);this.refs[o]=n[C]}}return this.isEmpty(n)?null:n},getRealCurrentLineNb:function(){return this.currentLineNb+this.offset},getCurrentLineIndentation:function(){return this.currentLine.length-this.currentLine.replace(/^ +/g,"").length},getNextEmbedBlock:function(e){this.moveToNextLine();var n=null,r=null;if(this.isDefined(e))n=e;else{n=this.getCurrentLineIndentation();var i=this.isStringUnIndentedCollectionItem(this.currentLine);if(!this.isCurrentLineEmpty()&&0==n&&!i)throw new t("Indentation problem A",this.getRealCurrentLineNb()+1,this.currentLine)}var a=[this.currentLine.substr(n)],o=this.isStringUnIndentedCollectionItem(this.currentLine),s=-1;for(o===!0&&(s=1+/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)[2].length);this.moveToNextLine();){if(o&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&this.getCurrentLineIndentation()!=s){this.moveToPreviousLine();break}if(this.isCurrentLineEmpty())this.isCurrentLineBlank()&&a.push(this.currentLine.substr(n));else{r=this.getCurrentLineIndentation();var l;if(l=/^( *)$/.exec(this.currentLine))a.push(l[1]);else{if(!(r>=n)){if(0==r){this.moveToPreviousLine();break}throw new t("Indentation problem B",this.getRealCurrentLineNb()+1,this.currentLine)}a.push(this.currentLine.substr(n))}}}return a.join("\n")},moveToNextLine:function(){return this.currentLineNb>=this.lines.length-1?!1:(this.currentLineNb++,this.currentLine=this.lines[this.currentLineNb],!0)},moveToPreviousLine:function(){this.currentLineNb--,this.currentLine=this.lines[this.currentLineNb]},parseValue:function(e){if("*"==(e+"").charAt(0)){if(e="#"==this.trim(e).charAt(0)?(e+"").substr(1,e.indexOf("#")-2):(e+"").substr(1),void 0==this.refs[e])throw new t('Reference "'+e+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine);return this.refs[e]}var n=null;if(n=/^(\||>)(\+|\-|\d+|\+\d+|\-\d+|\d+\+|\d+\-)?( +#.*)?$/.exec(e)){n={separator:n[1],modifiers:n[2],comments:n[3]};var r=this.isDefined(n.modifiers)?n.modifiers:"";return this.parseFoldedScalar(n.separator,r.replace(/\d+/g,""),Math.abs(parseInt(r)))}try{return(new i).parse(e)}catch(a){throw a instanceof t&&(a.setParsedLine(this.getRealCurrentLineNb()+1),a.setSnippet(this.currentLine)),a}},parseFoldedScalar:function(t,e,n){void 0==e&&(e=""),void 0==n&&(n=0),t="|"==t?"\n":" ";for(var r="",i=null,a=this.moveToNextLine();a&&this.isCurrentLineBlank();)r+="\n",a=this.moveToNextLine();if(!a)return"";var o=null;if(!(o=new RegExp("^("+(n?this.strRepeat(" ",n):" +")+")(.*)$").exec(this.currentLine)))return this.moveToPreviousLine(),"";o={indent:o[1],text:o[2]};var s=o.indent,l=0;for(r+=o.text+t;this.currentLineNb+1<this.lines.length;)if(this.moveToNextLine(),o=new RegExp("^( {"+s.length+",})(.+)$").exec(this.currentLine))o={indent:o[1],text:o[2]}," "==t&&l!=o.indent&&(r=r.substr(0,r.length-1)+"\n"),l=o.indent,i=o.indent.length-s.length,r+=this.strRepeat(" ",i)+o.text+(0!=i?"\n":t);else{if(!(o=/^( *)$/.exec(this.currentLine))){this.moveToPreviousLine();break}r+=o[1].replace(new RegExp("^ {1,"+s.length+"}","g"),"")+"\n"}switch(" "==t&&(r=r.replace(/ (\n*)$/g,"\n$1")),e){case"":r=r.replace(/\n+$/g,"\n");break;case"+":break;case"-":r=r.replace(/\n+$/g,"")}return r},isNextLineIndented:function(){for(var t=this.getCurrentLineIndentation(),e=this.moveToNextLine();e&&this.isCurrentLineEmpty();)e=this.moveToNextLine();if(0==e)return!1;var n=!1;return this.getCurrentLineIndentation()<=t&&(n=!0),this.moveToPreviousLine(),n},isCurrentLineEmpty:function(){return this.isCurrentLineBlank()||this.isCurrentLineComment()},isCurrentLineBlank:function(){return""==this.trim(this.currentLine)},isCurrentLineComment:function(){var t=this.currentLine.replace(/^ +/g,"");return"#"==t.charAt(0)},cleanup:function(t){t=t.split("\r\n").join("\n").split("\r").join("\n"),/\n$/.test(t)||(t+="\n");for(var e=0,n=/^\%YAML[: ][\d\.]+.*\n/;n.test(t);)t=t.replace(n,""),e++;if(this.offset+=e,n=/^(#.*?\n)+/,n.test(t)){var r=t.replace(n,"");this.offset+=this.subStrCount(t,"\n")-this.subStrCount(r,"\n"),t=r}return n=/^\-\-\-.*?\n/,n.test(t)&&(r=t.replace(n,""),this.offset+=this.subStrCount(t,"\n")-this.subStrCount(r,"\n"),t=r,t=t.replace(/\.\.\.\s*$/g,"")),t},isNextLineUnIndentedCollection:function(){for(var t=this.getCurrentLineIndentation(),e=this.moveToNextLine();e&&this.isCurrentLineEmpty();)e=this.moveToNextLine();if(!1===e)return!1;var n=!1;return this.getCurrentLineIndentation()==t&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(n=!0),this.moveToPreviousLine(),n},isStringUnIndentedCollectionItem:function(){return 0===this.currentLine.indexOf("- ")},isObject:function(t){return"object"==typeof t&&this.isDefined(t)},isEmpty:function(t){return void 0==t||null==t||""==t||0==t||"0"==t||0==t},isDefined:function(t){return void 0!=t&&null!=t},reverseArray:function(t){for(var e=[],n=t.length,r=n-1;r>=0;r--)e.push(t[r]);return e},merge:function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(/^\d+$/.test(n)?r.push(t):r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(/^\d+$/.test(n)?r.push(e):r[n]=e[n]);return r},strRepeat:function(t,e){var n,r="";for(n=0;e>n;n++)r+=t;return r},subStrCount:function(t,e,n,r){var i=0;t=""+t,e=""+e,void 0!=n&&(t=t.substr(n)),void 0!=r&&(t=t.substr(0,r));for(var a=t.length,o=e.length,s=0;a>s;s++)e==t.substr(s,o)&&i++,s+=o-1;return i},trim:function(t){return(t+"").replace(/^ +/,"").replace(/ +$/,"")}},YamlEscaper=function(){},YamlEscaper.prototype={requiresDoubleQuoting:function(t){return new RegExp(YamlEscaper.REGEX_CHARACTER_TO_ESCAPE).test(t)},escapeWithDoubleQuotes:function(t){t+="";for(var e=YamlEscaper.escapees.length,n=YamlEscaper.escaped.length,r=YamlEscaper.escaped,i=0;e>i;++i)i>=n&&r.push("");var a="";return a=t.replace(new RegExp(YamlEscaper.escapees.join("|"),"g"),function(t){for(var n=0;e>n;++n)if(t==YamlEscaper.escapees[n])return r[n]}),'"'+a+'"'},requiresSingleQuoting:function(t){return/[\s'":{}[\],&*#?]|^[-?|<>=!%@`]/.test(t)},escapeWithSingleQuotes:function(t){return"'"+t.replace(/'/g,"''")+"'"}},YamlEscaper.REGEX_CHARACTER_TO_ESCAPE="[\\x00-\\x1f]||||",YamlEscaper.escapees=["\\\\",'\\"','"',"\x00","","","","","","","","\b","	","\n","","\f","\r","","","","","","","","","","","","","","","","","","","","","",""],YamlEscaper.escaped=['\\"',"\\\\",'\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"];var o=function(){};o.prototype={unescapeSingleQuotedString:function(t){return t.replace(/''/g,"'")},unescapeDoubleQuotedString:function(t){var e=function(t){return(new o).unescapeCharacter(t)};return t.replace(new RegExp(o.REGEX_ESCAPED_CHARACTER,"g"),e)},unescapeCharacter:function(t){switch(t.charAt(1)){case"0":return String.fromCharCode(0);case"a":return String.fromCharCode(7);case"b":return String.fromCharCode(8);case"t":return"	";case"	":return"	";case"n":return"\n";case"v":return String.fromCharCode(11);case"f":return String.fromCharCode(12);case"r":return String.fromCharCode(13);case"e":return"";case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return"\x00";case"_":return"\x00";case"L":return" (";case"P":return" )";case"x":return this.pack("n",(new i).hexdec(t.substr(2,2)));case"u":return this.pack("n",(new i).hexdec(t.substr(2,4)));case"U":return this.pack("N",(new i).hexdec(t.substr(2,8)))}},pack:function(t){for(var e,n,r=0,i=1,a="",o=0;r<t.length;){for(e=t.charAt(r),n="",r++;r<t.length&&null!==t.charAt(r).match(/[\d\*]/);)n+=t.charAt(r),r++;switch(""===n&&(n="1"),e){case"n":if("*"===n&&(n=arguments.length-i),n>arguments.length-i)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(o=0;n>o;o++)a+=String.fromCharCode(arguments[i]>>8&255),a+=String.fromCharCode(255&arguments[i]),i++;break;case"N":if("*"===n&&(n=arguments.length-i),n>arguments.length-i)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(o=0;n>o;o++)a+=String.fromCharCode(arguments[i]>>24&255),a+=String.fromCharCode(arguments[i]>>16&255),a+=String.fromCharCode(arguments[i]>>8&255),a+=String.fromCharCode(255&arguments[i]),i++;break;default:throw new Error("Warning:  pack() Type "+e+": unknown format code")}}if(i<arguments.length)throw new Error("Warning: pack(): "+(arguments.length-i)+" arguments unused");return a}},o.REGEX_ESCAPED_CHARACTER='\\\\([0abt	nvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})';var s=function(){};s.prototype={dump:function(t,e,n){null==e&&(e=0),null==n&&(n=0);var r,a="",o=n?this.strRepeat(" ",n):"";if(this.numSpacesForIndentation||(this.numSpacesForIndentation=2),0>=e||!this.isObject(t)||this.isEmpty(t))r=new i,a+=o+r.dump(t);else{var s,l=!this.arrayEquals(this.getKeys(t),this.range(0,t.length-1));for(var c in t)t.hasOwnProperty(c)&&(s=0>=e-1||!this.isObject(t[c])||this.isEmpty(t[c]),l&&(r=new i),a+=o+""+(l?r.dump(c)+":":"-")+(s?" ":"\n")+this.dump(t[c],e-1,s?0:n+this.numSpacesForIndentation)+(s?"\n":""))}return a},strRepeat:function(t,e){var n,r="";for(n=0;e>n;n++)r+=t;return r},isObject:function(t){return this.isDefined(t)&&"object"==typeof t},isEmpty:function(t){var e=void 0==t||null==t||""==t||0==t||"0"==t||0==t;if(!(e||"object"!=typeof t||t instanceof Array)){var n=0;for(var r in t)t.hasOwnProperty(r)&&n++;e=!n}return e},isDefined:function(t){return void 0!=t&&null!=t},getKeys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},range:function(t,e){if(t>e)return[];for(var n=[],r=t;e>=r;r++)n.push(r);return n},arrayEquals:function(t,e){if(t.length!=e.length)return!1;for(var n=t.length,r=0;n>r;r++)if(t[r]!=e[r])return!1;return!0}}}(),define("yaml-js",function(t){return function(){var e;return e||t.YAML}}(this)),define("extensions/yamlFrontMatterParser",["underscore","classes/Extension","yaml-js"],function(t,e,n){function r(e,r){if(e===o){var i=s.exec(r),a=i[1],l=i[2];if(l){if(!o.frontMatter||o.frontMatter._frontMatter!=a){o.frontMatter=void 0;try{o.frontMatter=n.parse(l),t.isObject(o.frontMatter)||(o.frontMatter=void 0),o.frontMatter._yaml=l,o.frontMatter._frontMatter=a}catch(c){}}}else o.frontMatter=void 0}}var i,a=new e("yamlFrontMatterParser","YAML front matter");a.onEventMgrCreated=function(t){i=t};var o;a.onFileSelected=function(t){o=t};var s=/^(\s*-{3}\s*\n([\w\W]+?)\n\s*-{3}\s*?\n)?([\w\W]*)$/;return a.onFileOpen=r,a.onContentChanged=r,a}),define("text",["module"],function(t){var e,n,r,i,a,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,f=c&&(location.port||void 0),d={},p=t.config&&t.config()||{};return e={version:"2.0.13",strip:function(t){if(t){t=t.replace(s,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=o[e];try{t=new ActiveXObject(n)}catch(r){}if(t){o=[n];break}}return t},parseName:function(t){var e,n,r,i=!1,a=t.lastIndexOf("."),o=0===t.indexOf("./")||0===t.indexOf("../");return-1!==a&&(!o||a>1)?(e=t.substring(0,a),n=t.substring(a+1)):e=t,r=n||e,a=r.indexOf("!"),-1!==a&&(i="strip"===r.substring(a+1),r=r.substring(0,a),n?n=r:e=r),{moduleName:e,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,r,i){var a,o,s,l=e.xdRegExp.exec(t);return l?(a=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(a&&a!==n||o&&o.toLowerCase()!==r.toLowerCase()||(s||o)&&s!==i)):!0},finishLoad:function(t,n,r,i){r=n?e.strip(r):r,p.isBuild&&(d[t]=r),i(r)},load:function(t,n,r,i){if(i&&i.isBuild&&!i.inlineText)return void r();p.isBuild=i&&i.isBuild;var a=e.parseName(t),o=a.moduleName+(a.ext?"."+a.ext:""),s=n.toUrl(o),l=p.useXhr||e.useXhr;return 0===s.indexOf("empty:")?void r():void(!c||l(s,u,h,f)?e.get(s,function(n){e.finishLoad(t,a.strip,n,r)
},function(t){r.error&&r.error(t)}):n([o],function(t){e.finishLoad(a.moduleName+"."+a.ext,a.strip,t,r)}))},write:function(t,n,r){if(d.hasOwnProperty(n)){var i=e.jsEscape(d[n]);r.asModule(t+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(t,n,r,i,a){var o=e.parseName(n),s=o.ext?"."+o.ext:"",l=o.moduleName+s,c=r.toUrl(o.moduleName+s)+".js";e.load(l,r,function(){var n=function(t){return i(c,t)};n.asModule=function(t,e){return i.asModule(t,c,e)},e.write(t,l,n,a)},a)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),e.get=function(t,e,r){try{var i=n.readFileSync(t,"utf8");""===i[0]&&(i=i.substring(1)),e(i)}catch(a){r&&r(a)}}):"xhr"===p.env||!p.env&&e.createXhr()?e.get=function(t,n,r,i){var a,o=e.createXhr();if(o.open("GET",t,!0),i)for(a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),i[a]);p.onXhr&&p.onXhr(o,t),o.onreadystatechange=function(){var e,i;4===o.readyState&&(e=o.status||0,e>399&&600>e?(i=new Error(t+" HTTP status: "+e),i.xhr=o,r&&r(i)):n(o.responseText),p.onXhrComplete&&p.onXhrComplete(o,t))},o.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,r,i="utf-8",a=new java.io.File(t),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),i)),l="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=s.readLine());)n.append(o),n.append(r);l=String(n.toString())}finally{s.close()}e(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in r,e.get=function(t,e){var n,o,s,l={};a&&(t=t.replace(/\//g,"\\")),s=new FileUtils.File(t);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),e(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),e}),define("text!html/markdownExtraSettingsBlock.html",[],function(){return'<p>Adds extra features to the original Markdown syntax.</p>\n<div class="form-horizontal">\n	<div class="form-group">\n		<label class="col-sm-4 control-label" for="input-markdownextra-tables">Tables</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-tables">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-deflist">Definition lists</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-deflist">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-attrlist">Special attributes</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-attrlist">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-footnotes">Footnotes</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-footnotes">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-comments">Comments</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-comments">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-smartypants">SmartyPants</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-smartypants">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-newlines">GFM newlines</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-newlines">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-intraword">GFM intra-word stars/underscores</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-intraword">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-strikethrough">GFM strikethrough</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-strikethrough">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-fencedcodegfm">GFM fenced code\n			blocks</label>\n		<div class="col-sm-7">\n			<div class="checkbox">\n				<input type="checkbox" id="input-markdownextra-fencedcodegfm">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label"\n			for="input-markdownextra-highlighter">Syntax highlighter</label>\n		<div class="col-sm-7">\n			<select id="input-markdownextra-highlighter" class="form-control"><option>None</option>\n				<option value="prettify">Prettify</option>\n				<option value="highlight">Highlight.js</option>\n			</select>\n		</div>\n	</div>\n</div>\n<span class="help-block pull-right"><a target="_blank"\n	href="https://github.com/jmcmanus/pagedown-extra">More info</a></span>'});var IN_GLOBAL_SCOPE=!0;window.PR_SHOULD_USE_CONTINUATION=!0;var prettyPrintOne,prettyPrint;!function(){function t(t){function e(t){var e=t.charCodeAt(0);if(92!==e)return e;var n=t.charAt(1);return e=h[n],e?e:n>="0"&&"7">=n?parseInt(t.substring(1),8):"u"===n||"x"===n?parseInt(t.substring(2),16):t.charCodeAt(1)}function n(t){if(32>t)return(16>t?"\\x0":"\\x")+t.toString(16);var e=String.fromCharCode(t);return"\\"===e||"-"===e||"]"===e||"^"===e?"\\"+e:e}function r(t){var r=t.substring(1,t.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g")),i=[],a="^"===r[0],o=["["];a&&o.push("^");for(var s=a?1:0,l=r.length;l>s;++s){var c=r[s];if(/\\[bdsw]/i.test(c))o.push(c);else{var u,h=e(c);l>s+2&&"-"===r[s+1]?(u=e(r[s+2]),s+=2):u=h,i.push([h,u]),65>u||h>122||(65>u||h>90||i.push([32|Math.max(65,h),32|Math.min(u,90)]),97>u||h>122||i.push([-33&Math.max(97,h),-33&Math.min(u,122)]))}}i.sort(function(t,e){return t[0]-e[0]||e[1]-t[1]});for(var f=[],d=[],s=0;s<i.length;++s){var p=i[s];p[0]<=d[1]+1?d[1]=Math.max(d[1],p[1]):f.push(d=p)}for(var s=0;s<f.length;++s){var p=f[s];o.push(n(p[0])),p[1]>p[0]&&(p[1]+1>p[0]&&o.push("-"),o.push(n(p[1])))}return o.push("]"),o.join("")}function i(t){for(var e=t.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g")),i=e.length,s=[],l=0,c=0;i>l;++l){var u=e[l];if("("===u)++c;else if("\\"===u.charAt(0)){var h=+u.substring(1);h&&(c>=h?s[h]=-1:e[l]=n(h))}}for(var l=1;l<s.length;++l)-1===s[l]&&(s[l]=++a);for(var l=0,c=0;i>l;++l){var u=e[l];if("("===u)++c,s[c]||(e[l]="(?:");else if("\\"===u.charAt(0)){var h=+u.substring(1);h&&c>=h&&(e[l]="\\"+s[h])}}for(var l=0;i>l;++l)"^"===e[l]&&"^"!==e[l+1]&&(e[l]="");if(t.ignoreCase&&o)for(var l=0;i>l;++l){var u=e[l],f=u.charAt(0);u.length>=2&&"["===f?e[l]=r(u):"\\"!==f&&(e[l]=u.replace(/[a-zA-Z]/g,function(t){var e=t.charCodeAt(0);return"["+String.fromCharCode(-33&e,32|e)+"]"}))}return e.join("")}for(var a=0,o=!1,s=!1,l=0,c=t.length;c>l;++l){var u=t[l];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){o=!0,s=!1;break}}for(var h={b:8,t:9,n:10,v:11,f:12,r:13},f=[],l=0,c=t.length;c>l;++l){var u=t[l];if(u.global||u.multiline)throw new Error(""+u);f.push("(?:"+i(u)+")")}return new RegExp(f.join("|"),s?"gi":"g")}function e(t,e){function n(t){var l=t.nodeType;if(1==l){if(r.test(t.className))return;for(var c=t.firstChild;c;c=c.nextSibling)n(c);var u=t.nodeName.toLowerCase();("br"===u||"li"===u)&&(i[s]="\n",o[s<<1]=a++,o[s++<<1|1]=t)}else if(3==l||4==l){var h=t.nodeValue;h.length&&(h=e?h.replace(/\r\n?/g,"\n"):h.replace(/[ \t\r\n]+/g," "),i[s]=h,o[s<<1]=a,a+=h.length,o[s++<<1|1]=t)}}var r=/(?:^|\s)nocode(?:\s|$)/,i=[],a=0,o=[],s=0;return n(t),{sourceCode:i.join("").replace(/\n$/,""),spans:o}}function n(t,e,n,r){if(e){var i={sourceCode:e,basePos:t};n(i),r.push.apply(r,i.decorations)}}function r(t){for(var e=void 0,n=t.firstChild;n;n=n.nextSibling){var r=n.nodeType;e=1===r?e?t:n:3===r&&q.test(n.nodeValue)?t:e}return e===t?void 0:e}function i(e,r){var i,a={};!function(){for(var n=e.concat(r),o=[],s={},l=0,c=n.length;c>l;++l){var u=n[l],h=u[3];if(h)for(var f=h.length;--f>=0;)a[h.charAt(f)]=u;var d=u[1],p=""+d;s.hasOwnProperty(p)||(o.push(d),s[p]=null)}o.push(/[\0-\uffff]/),i=t(o)}();var o=r.length,s=function(t){for(var e=t.sourceCode,l=t.basePos,u=[l,D],h=0,f=e.match(i)||[],d={},p=0,g=f.length;g>p;++p){var m,v=f[p],y=d[v],b=void 0;if("string"==typeof y)m=!1;else{var x=a[v.charAt(0)];if(x)b=v.match(x[1]),y=x[0];else{for(var w=0;o>w;++w)if(x=r[w],b=v.match(x[1])){y=x[0];break}b||(y=D)}m=y.length>=5&&"lang-"===y.substring(0,5),!m||b&&"string"==typeof b[1]||(m=!1,y=B),m||(d[v]=y)}var _=h;if(h+=v.length,m){var C=b[1],S=v.indexOf(C),E=S+C.length;b[2]&&(E=v.length-b[2].length,S=E-C.length);var k=y.substring(5);n(l+_,v.substring(0,S),s,u),n(l+_+S,C,c(k,C),u),n(l+_+E,v.substring(E),s,u)}else u.push(l+_,y)}t.decorations=u};return s}function a(t){var e=[],n=[];e.push(t.tripleQuotedStrings?[N,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""]:t.multiLineStrings?[N,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]:[N,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]),t.verbatimStrings&&n.push([N,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var r=t.hashComments;r&&(t.cStyleComments?(e.push(r>1?[A,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]:[A,/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"]),n.push([N,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,null])):e.push([A,/^#[^\r\n]*/,null,"#"])),t.cStyleComments&&(n.push([A,/^\/\/[^\r\n]*/,null]),n.push([A,/^\/\*[\s\S]*?(?:\*\/|$)/,null]));var a=t.regexLiterals;if(a){var o=a>1?"":"\n\r",s=o?".":"[\\S\\s]",l="/(?=[^/*"+o+"])(?:[^/\\x5B\\x5C"+o+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+o+"]|\\x5C"+s+")*(?:\\x5D|$))+/";n.push(["lang-regex",RegExp("^"+U+"("+l+")")])}var c=t.types;c&&n.push([M,c]);var u=(""+t.keywords).replace(/^ | $/g,"");u.length&&n.push([R,new RegExp("^(?:"+u.replace(/[\s,]+/g,"|")+")\\b"),null]),e.push([D,/^\s+/,null," \r\n	"]);var h="^.[^\\s\\w.$@'\"`/\\\\]*";return t.regexLiterals&&(h+="(?!s*/)"),n.push([L,/^@[a-z_$][a-z_$@0-9]*/i,null],[M,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[D,/^[a-z_$][a-z_$@0-9]*/i,null],[L,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[D,/^\\[\s\S]?/,null],[O,new RegExp(h),null]),i(e,n)}function o(t,e,n){function r(t){var e=t.nodeType;if(1!=e||a.test(t.className)){if((3==e||4==e)&&n){var l=t.nodeValue,c=l.match(o);if(c){var u=l.substring(0,c.index);t.nodeValue=u;var h=l.substring(c.index+c[0].length);if(h){var f=t.parentNode;f.insertBefore(s.createTextNode(h),t.nextSibling)}i(t),u||t.parentNode.removeChild(t)}}}else if("br"===t.nodeName)i(t),t.parentNode&&t.parentNode.removeChild(t);else for(var d=t.firstChild;d;d=d.nextSibling)r(d)}function i(t){function e(t,n){var r=n?t.cloneNode(!1):t,i=t.parentNode;if(i){var a=e(i,1),o=t.nextSibling;a.appendChild(r);for(var s=o;s;s=o)o=s.nextSibling,a.appendChild(s)}return r}for(;!t.nextSibling;)if(t=t.parentNode,!t)return;for(var n,r=e(t.nextSibling,0);(n=r.parentNode)&&1===n.nodeType;)r=n;c.push(r)}for(var a=/(?:^|\s)nocode(?:\s|$)/,o=/\r\n?|\n/,s=t.ownerDocument,l=s.createElement("li");t.firstChild;)l.appendChild(t.firstChild);for(var c=[l],u=0;u<c.length;++u)r(c[u]);e===(0|e)&&c[0].setAttribute("value",e);var h=s.createElement("ol");h.className="linenums";for(var f=Math.max(0,e-1|0)||0,u=0,d=c.length;d>u;++u)l=c[u],l.className="L"+(u+f)%10,l.firstChild||l.appendChild(s.createTextNode("")),h.appendChild(l);t.appendChild(h)}function s(t){var e=/\bMSIE\s(\d+)/.exec(navigator.userAgent);e=e&&+e[1]<=8;var n=/\n/g,r=t.sourceCode,i=r.length,a=0,o=t.spans,s=o.length,l=0,c=t.decorations,u=c.length,h=0;c[u]=i;var f,d;for(d=f=0;u>d;)c[d]!==c[d+2]?(c[f++]=c[d++],c[f++]=c[d++]):d+=2;for(u=f,d=f=0;u>d;){for(var p=c[d],g=c[d+1],m=d+2;u>=m+2&&c[m+1]===g;)m+=2;c[f++]=p,c[f++]=g,d=m}u=c.length=f;var v,y=t.sourceNode;y&&(v=y.style.display,y.style.display="none");try{for(;s>l;){var b,x=(o[l],o[l+2]||i),w=c[h+2]||i,m=Math.min(x,w),_=o[l+1];if(1!==_.nodeType&&(b=r.substring(a,m))){e&&(b=b.replace(n,"\r")),_.nodeValue=b;var C=_.ownerDocument,S=C.createElement("span");S.className=c[h+1];var E=_.parentNode;E.replaceChild(S,_),S.appendChild(_),x>a&&(o[l+1]=_=C.createTextNode(r.substring(m,x)),E.insertBefore(_,S.nextSibling))}a=m,a>=x&&(l+=2),a>=w&&(h+=2)}}finally{y&&(y.style.display=v)}}function l(t,e){for(var n=e.length;--n>=0;){var r=e[n];G.hasOwnProperty(r)?d.console&&console.warn("cannot override language handler %s",r):G[r]=t}}function c(t,e){return t&&G.hasOwnProperty(t)||(t=/^\s*</.test(e)?"default-markup":"default-code"),G[t]}function u(t){var n=t.langExtension;try{var r=e(t.sourceNode,t.pre),i=r.sourceCode;t.sourceCode=i,t.spans=r.spans,t.basePos=0,c(n,i)(t),s(t)}catch(a){d.console&&console.log(a&&a.stack||a)}}function h(t,e,n){var r=document.createElement("div");r.innerHTML="<pre>"+t+"</pre>",r=r.firstChild,n&&o(r,n,!0);var i={langExtension:e,numberLines:n,sourceNode:r,pre:1};return u(i),r.innerHTML}function f(t,e){function n(t){return a.getElementsByTagName(t)}function i(){for(var e=d.PR_SHOULD_USE_CONTINUATION?g.now()+250:1/0;v<c.length&&g.now()<e;v++){for(var n=c[v],a=S,l=n;l=l.previousSibling;){var h=l.nodeType,f=(7===h||8===h)&&l.nodeValue;if(f?!/^\??prettify\b/.test(f):3!==h||/\S/.test(l.nodeValue))break;if(f){a={},f.replace(/\b(\w+)=([\w:.%+-]+)/g,function(t,e,n){a[e]=n});break}}var p=n.className;if((a!==S||b.test(p))&&!x.test(p)){for(var E=!1,k=n.parentNode;k;k=k.parentNode){var T=k.tagName;if(C.test(T)&&k.className&&b.test(k.className)){E=!0;break}}if(!E){n.className+=" prettyprinted";var I=a.lang;if(!I){I=p.match(y);var N;!I&&(N=r(n))&&_.test(N.tagName)&&(I=N.className.match(y)),I&&(I=I[1])}var R;if(w.test(n.tagName))R=1;else{var A=n.currentStyle,M=s.defaultView,L=A?A.whiteSpace:M&&M.getComputedStyle?M.getComputedStyle(n,null).getPropertyValue("white-space"):0;R=L&&"pre"===L.substring(0,3)}var O=a.linenums;(O="true"===O||+O)||(O=p.match(/\blinenums\b(?::(\d+))?/),O=O?O[1]&&O[1].length?+O[1]:!0:!1),O&&o(n,O,R),m={langExtension:I,sourceNode:n,numberLines:O,pre:R},u(m)}}}v<c.length?setTimeout(i,250):"function"==typeof t&&t()}for(var a=e||document.body,s=a.ownerDocument||document,l=[n("pre"),n("code"),n("xmp")],c=[],h=0;h<l.length;++h)for(var f=0,p=l[h].length;p>f;++f)c.push(l[h][f]);l=null;var g=Date;g.now||(g={now:function(){return+new Date}});var m,v=0,y=/\blang(?:uage)?-([\w.]+)(?!\S)/,b=/\bprettyprint\b/,x=/\bprettyprinted\b/,w=/pre|xmp/i,_=/^code$/i,C=/^(?:pre|code|xmp)$/i,S={};i()}var d=window,p=["break,continue,do,else,for,if,return,while"],g=[p,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],m=[g,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],v=[m,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],y=[m,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],b=[y,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],x="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",w=[m,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],_="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",C=[p,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],S=[p,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],E=[p,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],k=[p,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],T=[v,b,w,_,C,S,k],I=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,N="str",R="kwd",A="com",M="typ",L="lit",O="pun",D="pln",F="tag",P="dec",B="src",j="atn",$="atv",H="nocode",U="(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*",q=/\S/,z=a({keywords:T,hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),G={};l(z,["default-code"]),l(i([],[[D,/^[^<?]+/],[P,/^<!\w[^>]*(?:>|$)/],[A,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[O,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(i([[D,/^[\s]+/,null," 	\r\n"],[$,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[F,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[j,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[O,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]),l(i([],[[$,/^[\s\S]+/]]),["uq.val"]),l(a({keywords:v,hashComments:!0,cStyleComments:!0,types:I}),["c","cc","cpp","cxx","cyc","m"]),l(a({keywords:"null,true,false"}),["json"]),l(a({keywords:b,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:I}),["cs"]),l(a({keywords:y,cStyleComments:!0}),["java"]),l(a({keywords:k,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),l(a({keywords:C,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),l(a({keywords:_,hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),l(a({keywords:S,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),l(a({keywords:w,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),l(a({keywords:x,hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(a({keywords:E,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),l(i([],[[N,/^[\s\S]+/]]),["regex"]);var W=d.PR={createSimpleLexer:i,registerLangHandler:l,sourceDecorator:a,PR_ATTRIB_NAME:j,PR_ATTRIB_VALUE:$,PR_COMMENT:A,PR_DECLARATION:P,PR_KEYWORD:R,PR_LITERAL:L,PR_NOCODE:H,PR_PLAIN:D,PR_PUNCTUATION:O,PR_SOURCE:B,PR_STRING:N,PR_TAG:F,PR_TYPE:M,prettyPrintOne:IN_GLOBAL_SCOPE?d.prettyPrintOne=h:prettyPrintOne=h,prettyPrint:prettyPrint=IN_GLOBAL_SCOPE?d.prettyPrint=f:prettyPrint=f};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return W})}();var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function t(t){return t}function e(){return!1}function n(){}function r(){}n.prototype={chain:function(e,n){var r=this[e];if(!r)throw new Error("unknown hook "+e);this[e]=r===t?n:function(){var t=Array.prototype.slice.call(arguments,0);return t[0]=r.apply(null,t),n.apply(null,t)}},set:function(t,e){if(!this[t])throw new Error("unknown hook "+t);this[t]=e},addNoop:function(e){this[e]=t},addFalse:function(t){this[t]=e}},Markdown.HookCollection=n,r.prototype={set:function(t,e){this["s_"+t]=e},get:function(t){return this["s_"+t]}},Markdown.Converter=function(){function t(t){return t=t.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(t,e,n,r,i,a){return e=e.toLowerCase(),D.set(e,C(n)),i?r:(a&&F.set(e,a.replace(/"/g,"&quot;")),"")})}function e(t){return t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,i),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,i),t=t.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,i),t=t.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,i),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,i)}function i(t,e){var n=e;return n=n.replace(/^\n+/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(P.push(n)-1)+"K\n\n"}function a(t,n){t=O.preBlockGamut(t,j),t=d(t);var r="<hr />\n";return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,r),t=t.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,r),t=t.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,r),t=p(t),t=m(t),t=w(t),t=O.postBlockGamut(t,j),t=e(t),t=_(t,n)}function o(t){return t=O.preSpanGamut(t),t=y(t),t=s(t),t=S(t),t=u(t),t=l(t),t=k(t),t=t.replace(/~P/g,"://"),t=C(t),t=L._DoItalicsAndBold?L._DoItalicsAndBold(t):x(t),t=t.replace(/  +\n/g," <br>\n"),t=O.postSpanGamut(t)}function s(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=A(e,"!"==t.charAt(1)?"\\`*_/":"\\`*_")})}function l(t){return t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,c),t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,c),t=t.replace(/(\[([^\[\]]+)\])()()()()()/g,c)}function c(t,e,n,r,i,a,o,s){void 0==s&&(s="");var l=e,c=n.replace(/:\/\//g,"~P"),u=r.toLowerCase(),f=i,d=s;if(""==f)if(""==u&&(u=c.toLowerCase().replace(/ ?\n/g," ")),f="#"+u,void 0!=D.get(u))f=D.get(u),void 0!=F.get(u)&&(d=F.get(u));else{if(!(l.search(/\(\s*\)$/m)>-1))return l;f=""}f=R(f),f=A(f,"*_");var p='<a href="'+f+'"';return""!=d&&(d=h(d),d=A(d,"*_"),p+=' title="'+d+'"'),p+=">"+c+"</a>"}function u(t){return t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,f),t=t.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,f)}function h(t){return t.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function f(t,e,n,r,i,a,o,s){var l=e,c=n,u=r.toLowerCase(),f=i,d=s;if(d||(d=""),""==f){if(""==u&&(u=c.toLowerCase().replace(/ ?\n/g," ")),f="#"+u,void 0==D.get(u))return l;f=D.get(u),void 0!=F.get(u)&&(d=F.get(u))}c=A(h(c),"*_[]()"),f=A(f,"*_");var p='<img src="'+f+'" alt="'+c+'"';return d=h(d),d=A(d,"*_"),p+=' title="'+d+'"',p+=" />"}function d(t){return t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,e){return"<h1>"+o(e)+"</h1>\n\n"}),t=t.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,e){return"<h2>"+o(e)+"</h2>\n\n"}),t=t.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,e,n){var r=e.length;return"<h"+r+">"+o(n)+"</h"+r+">\n\n"})}function p(t,e){t+="~0";var n=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return B?t=t.replace(n,function(t,n,r){var i=n,a=r.search(/[*+-]/g)>-1?"ul":"ol",o=g(i,a,e);return o=o.replace(/\s+$/,""),o="<"+a+">"+o+"</"+a+">\n"}):(n=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(n,function(t,e,n,r){var i=e,a=n,o=r.search(/[*+-]/g)>-1?"ul":"ol",s=g(a,o);return s=i+"<"+o+">\n"+s+"</"+o+">\n"})),t=t.replace(/~0/,"")}function g(t,e,n){B++,t=t.replace(/\n{2,}$/,"\n"),t+="~0";var r=$[e],i=new RegExp("(^[ \\t]*)("+r+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+r+")[ \\t]+))","gm"),s=!1;return t=t.replace(i,function(t,e,r,i){var l=i,c=/\n\n$/.test(l),u=c||l.search(/\n{2,}/)>-1;return u||s?l=a(I(l),!0):(l=p(I(l),!0),l=l.replace(/\n$/,""),n||(l=o(l))),s=c,"<li>"+l+"</li>\n"}),t=t.replace(/~0/g,""),B--,t}function m(t){return t+="~0",t=t.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,n){var r=e,i=n;return r=b(I(r)),r=N(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>","\n\n"+r+"\n\n"+i}),t=t.replace(/~0/,"")}function v(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(P.push(t)-1)+"K\n\n"}function y(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,n,r){var i=r;return i=i.replace(/^([ \t]*)/g,""),i=i.replace(/[ \t]*$/g,""),i=b(i),i=i.replace(/:\/\//g,"~P"),e+"<code>"+i+"</code>"})}function b(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=A(t,"*_{}[]\\",!1)}function x(t){return t=t.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),t=t.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4")}function w(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var n=e;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=a(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),v("<blockquote>\n"+n+"\n</blockquote>")})}function _(t,e){t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var n=t.split(/\n{2,}/g),r=[],i=/~K(\d+)K/,a=n.length,s=0;a>s;s++){var l=n[s];i.test(l)?r.push(l):/\S/.test(l)&&(l=o(l),l=l.replace(/^([ \t]*)/g,"<p>"),l+="</p>",r.push(l))}if(!e){a=r.length;for(var s=0;a>s;s++)for(var c=!0;c;)c=!1,r[s]=r[s].replace(/~K(\d+)K/g,function(t,e){return c=!0,P[e]})}return r.join("\n\n")}function C(t){return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function S(t){return t=t.replace(/\\(\\)/g,M),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,M)}function E(t,e,n,r){if(e)return t;if(")"!==r.charAt(r.length-1))return"<"+n+r+">";for(var i=r.match(/[()]/g),a=0,o=0;o<i.length;o++)"("===i[o]?0>=a?a=1:a++:a--;var s="";if(0>a){var l=new RegExp("\\){1,"+-a+"}$");r=r.replace(l,function(t){return s=t,""})}if(s){var c=r.charAt(r.length-1);z.test(c)||(s=c+s,r=r.substr(0,r.length-1))}return"<"+n+r+">"+s}function k(t){t=t.replace(q,E);var e=function(t,e){return'<a href="'+e+'">'+O.plainLinkText(e)+"</a>"};return t=t.replace(/<((https?|ftp):[^'">\s]+)>/gi,e)}function T(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})}function I(t){return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")}function N(t){if(!/\t/.test(t))return t;var e,n=["    ","   ","  "," "],r=0;return t.replace(/[\n\t]/g,function(t,i){return"\n"===t?(r=i+1,t):(e=(i-r)%4,r=i+1,n[e])})}function R(t){if(!t)return"";t.length;return t.replace(G,function(t){return"~D"==t?"%24":":"==t?":":"%"+t.charCodeAt(0).toString(16)})}function A(t,e,n){var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return t=t.replace(i,M)}function M(t,e){var n=e.charCodeAt(0);return"~E"+n+"E"}var L={};this.setOptions=function(t){L=t};var O=this.hooks=new n;O.addNoop("plainLinkText"),O.addNoop("preConversion"),O.addNoop("postNormalization"),O.addNoop("preBlockGamut"),O.addNoop("postBlockGamut"),O.addNoop("preSpanGamut"),O.addNoop("postSpanGamut"),O.addNoop("postConversion");var D,F,P,B;this.makeHtml=function(n){if(D)throw new Error("Recursive call to converter.makeHtml");return D=new r,F=new r,P=[],B=0,n=O.preConversion(n),n=n.replace(/~/g,"~T"),n=n.replace(/\$/g,"~D"),n=n.replace(/\r\n/g,"\n"),n=n.replace(/\r/g,"\n"),n="\n\n"+n+"\n\n",n=N(n),n=n.replace(/^[ \t]+$/gm,""),n=O.postNormalization(n),n=e(n),n=t(n),n=a(n),n=T(n),n=n.replace(/~D/g,"$$"),n=n.replace(/~T/g,"~"),n=O.postConversion(n),P=F=D=null,n};var j=function(t){return a(t)},$={ol:"\\d+[.]",ul:"[*+-]"},H="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",U="[-A-Z0-9+&@#/%=~_|[\\])]",q=new RegExp('(="|<)?\\b(https?|ftp)(://'+H+"*"+U+")(?=$|\\W)","gi"),z=new RegExp(U,"i"),G=/(?:["'*()[\]:]|~D)/g}}(),define("libs/Markdown.Converter",function(){}),function(){function t(t){return t.replace(/^\s+|\s+$/g,"")}function e(t){return t.replace(/\s+$/g,"")}function n(t){return t.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function r(t,e){return-1!=t.indexOf(e)}function i(t,e){return t.replace(/<[^>]*>?/gi,function(t){return t.match(e)?t:""})}function a(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=t[r];for(r=0;r<e.length;r++)n[e[r]]=e[r];var i=[];for(var a in n)n.hasOwnProperty(a)&&i.push(n[a]);return i}function o(t){return""!=t.charAt(0)&&(t=""+t),""!=t.charAt(t.length-1)&&(t+=""),t}function s(t){return""==t.charAt(0)&&(t=t.substr(1)),""==t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),t}function l(t,e){return i(c(t,e),g)}function c(t,e){var n=e.blockGamutHookCallback(t);return n=f(n),n=n.replace(/~D/g,"$$").replace(/~T/g,"~"),n=e.previousPostConversion(n)}function u(t){return t.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function h(t){return t.replace(/~I/g,"|").replace(/~i/g,":")}function f(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})}function d(t){return t.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function p(t,e){var n=e;return n=n.replace(/&\#8220;/g,'"'),n=n.replace(/&\#8221;/g,'"'),n=n.replace(/&\#8216;/g,"'"),n=n.replace(/&\#8217;/g,"'"),n=n.replace(/&\#8212;/g,"---"),n=n.replace(/&\#8211;/g,"--"),n=n.replace(/&\#8230;/g,"...")}var g=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1}),Markdown.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4
},Markdown.Extra.init=function(t,e){var n=new Markdown.Extra,i=[],a=[],o=[],s=["unHashExtraBlocks"];return e=e||{},e.extensions=e.extensions||["all"],r(e.extensions,"all")&&(e.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),a.push("wrapHeaders"),r(e.extensions,"attr_list")&&(i.push("hashFcbAttributeBlocks"),a.push("hashHeaderAttributeBlocks"),s.push("applyAttributeBlocks"),n.attributeBlocks=!0),r(e.extensions,"fenced_code_gfm")&&(a.push("fencedCodeBlocks"),i.push("fencedCodeBlocks")),r(e.extensions,"tables")&&a.push("tables"),r(e.extensions,"def_list")&&a.push("definitionLists"),r(e.extensions,"footnotes")&&(i.push("stripFootnoteDefinitions"),a.push("doFootnotes"),s.push("printFootnotes")),r(e.extensions,"smartypants")&&s.push("runSmartyPants"),r(e.extensions,"strikethrough")&&o.push("strikethrough"),r(e.extensions,"newlines")&&o.push("newlines"),t.hooks.chain("postNormalization",function(t){return n.doTransform(i,t)+"\n"}),t.hooks.chain("preBlockGamut",function(t,e){return n.blockGamutHookCallback=e,t=u(t),t=n.doTransform(a,t)+"\n",t=h(t)}),t.hooks.chain("postSpanGamut",function(t){return n.doTransform(o,t)}),n.previousPostConversion=t.hooks.postConversion,t.hooks.chain("postConversion",function(t){return t=n.doTransform(s,t),n.hashBlocks=[],n.footnotes={},n.usedFootnotes=[],t}),"highlighter"in e&&(n.googleCodePrettify="prettify"===e.highlighter,n.highlightJs="highlight"===e.highlighter),"table_class"in e&&(n.tableClass=e.table_class),n.converter=t,n},Markdown.Extra.prototype.doTransform=function(t,e){for(var n=0;n<t.length;n++)e=this[t[n]](e);return e},Markdown.Extra.prototype.hashExtraBlock=function(t){return"\n<p>~X"+(this.hashBlocks.push(t)-1)+"X</p>\n"},Markdown.Extra.prototype.hashExtraInline=function(t){return"~X"+(this.hashBlocks.push(t)-1)+"X"},Markdown.Extra.prototype.unHashExtraBlocks=function(t){function e(){var r=!1;t=t.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(t,e){r=!0;var i=parseInt(e,10);return n.hashBlocks[i]}),r===!0&&e()}var n=this;return e(),t},Markdown.Extra.prototype.wrapHeaders=function(t){function e(t){return"\n"+t+"\n"}return t=t.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,e),t=t.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,e),t=t.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,e)};var m="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",v=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+m+"[ \\t]*(?:\\n|0x03)","gm"),y=new RegExp("^(.*)[ \\t]+"+m+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),b=new RegExp("^(```[^`\\n]*)[ \\t]+"+m+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");Markdown.Extra.prototype.hashHeaderAttributeBlocks=function(t){function e(t,e,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+e+"\n"}var n=this;return t=t.replace(v,e),t=t.replace(y,e)},Markdown.Extra.prototype.hashFcbAttributeBlocks=function(t){function e(t,e,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+e+"\n"}var n=this;return t.replace(b,e)},Markdown.Extra.prototype.applyAttributeBlocks=function(t){var e=this,n=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return t=t.replace(n,function(t,n,r,i,o){if(!r)return"";for(var s=parseInt(n,10),l=e.hashBlocks[s],c=l.match(/#[^\s#.]+/g)||[],u=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",h=l.match(/\.[^\s#.]+/g)||[],f=0;f<h.length;f++)h[f]=h[f].substr(1,h[f].length-1);var d="";return i&&(h=a(h,[i])),h.length>0&&(d=' class="'+h.join(" ")+'"'),"<"+r+u+d+o})},Markdown.Extra.prototype.tables=function(e){function n(e,n,i,a){n=n.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/m,""),a=a.replace(/^ *[|]/gm,""),n=n.replace(/[|] *$/m,""),i=i.replace(/[|] *$/m,""),a=a.replace(/[|] *$/gm,""),alignspecs=i.split(/ *[|] */),align=[];for(var o=0;o<alignspecs.length;o++){var s=alignspecs[o];align[o]=s.match(/^ *-+: *$/m)?' align="right"':s.match(/^ *:-+: *$/m)?' align="center"':s.match(/^ *:-+ *$/m)?' align="left"':""}var c=n.split(/ *[|] */),u=c.length,h=r.tableClass?' class="'+r.tableClass+'"':"",f=["<table",h,">\n","<thead>\n","<tr>\n"].join("");for(o=0;u>o;o++){var d=l(t(c[o]),r);f+=["  <th",align[o],">",d,"</th>\n"].join("")}f+="</tr>\n</thead>\n";var p=a.split("\n");for(o=0;o<p.length;o++)if(!p[o].match(/^\s*$/)){for(var g=p[o].split(/ *[|] */),m=u-g.length,v=0;m>v;v++)g.push("");for(f+="<tr>\n",v=0;u>v;v++){var y=l(t(g[v]),r);f+=["  <td",align[v],">",y,"</td>\n"].join("")}f+="</tr>\n"}return f+="</table>\n",r.hashExtraBlock(f)}var r=this,i=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),a=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return e=e.replace(i,n),e=e.replace(a,n)},Markdown.Extra.prototype.stripFootnoteDefinitions=function(t){var e=this;return t=t.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(t,n,r){return n=d(n),r+="\n",r=r.replace(/^[ ]{0,3}/g,""),e.footnotes[n]=r,"\n"})},Markdown.Extra.prototype.doFootnotes=function(t){var e=this;if(e.isConvertingFootnote===!0)return t;var n=0;return t=t.replace(/\[\^(.+?)\]/g,function(t,r){var i=d(r),a=e.footnotes[i];if(void 0===a)return t;n++,e.usedFootnotes.push(i);var o='<a href="#fn:'+i+'" id="fnref:'+i+'" title="See footnote" class="footnote">'+n+"</a>";return e.hashExtraInline(o)})},Markdown.Extra.prototype.printFootnotes=function(t){var e=this;if(0===e.usedFootnotes.length)return t;t+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var n=0;n<e.usedFootnotes.length;n++){var r=e.usedFootnotes[n],i=e.footnotes[r];e.isConvertingFootnote=!0;var a=l(i,e);delete e.isConvertingFootnote,t+='<li id="fn:'+r+'">'+a+' <a href="#fnref:'+r+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return t+="</ol>\n</div>"},Markdown.Extra.prototype.fencedCodeBlocks=function(e){function n(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/~D/g,"$$"),t=t.replace(/~T/g,"~")}var r=this;return e=e.replace(/(?:^|\n)```([^`\n]*)\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(e,i,a){var o=t(i),s=a,l=r.googleCodePrettify?' class="prettyprint"':"",c="";o&&(c=r.googleCodePrettify||r.highlightJs?' class="language-'+o+'"':' class="'+o+'"');var u=["<pre",l,"><code",c,">",n(s),"</code></pre>"].join("");return r.hashExtraBlock(u)})},Markdown.Extra.prototype.educatePants=function(t){var e=this,n="",r=0;t.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(i,a,o,s,l,c,u){var h=t.substring(r,u);return n+=e.applyPants(h),e.smartyPantsLastChar=n.substring(n.length-1),r=u+i.length,a?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(o)?e.smartyPantsLastChar=l.substring(l.length-1):l=e.educatePants(l),void(n+=a+o+s+l+c)):void(n+=i)});var i=t.substring(r);return n+=e.applyPants(i),e.smartyPantsLastChar=n.substring(n.length-1),n},Markdown.Extra.prototype.applyPants=function(t){return t=t.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),t=t.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),t=t.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(t)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(t)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(t=t.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),t=t.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),t=t.replace(/"'(?=\w)/g,"&#8220;&#8216;"),t=t.replace(/'"(?=\w)/g,"&#8216;&#8220;"),t=t.replace(/'(?=\d{2}s)/g,"&#8217;"),t=t.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),t=t.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),t=t.replace(/'(?=\s|s\b)/g,"&#8217;"),t=t.replace(/'/g,"&#8216;"),t=t.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),t=t.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),t=t.replace(/"(?=\s)/g,"&#8221;"),t=t.replace(/"/gi,"&#8220;"))},Markdown.Extra.prototype.runSmartyPants=function(t){return this.smartyPantsLastChar="",t=this.educatePants(t),t=t.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,p)},Markdown.Extra.prototype.definitionLists=function(e){var n=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return e=o(e),e=e.replace(n,function(e,n,i){var a=t(r.processDefListItems(i));return a="<dl>\n"+a+"\n</dl>",n+r.hashExtraBlock(a)+"\n\n"}),s(e)},Markdown.Extra.prototype.processDefListItems=function(r){var i=this,a=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),u=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return r=o(r),r=r.replace(/\n{2,}(?=\\x03)/,"\n"),r=r.replace(a,function(e,n,r){for(var a=t(r).split("\n"),o="",s=0;s<a.length;s++){var c=a[s];c=l(t(c),i),o+="\n<dt>"+c+"</dt>"}return o+"\n"}),r=r.replace(u,function(t,r,a,o){return r||o.match(/\n{2,}/)?(o=Array(a.length+1).join(" ")+o,o=n(o)+"\n\n",o="\n"+c(o,i)+"\n"):(o=e(o),o=l(n(o),i)),"\n<dd>"+o+"</dd>\n"}),s(r)},Markdown.Extra.prototype.strikethrough=function(t){return t.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},Markdown.Extra.prototype.newlines=function(t){return t.replace(/(<(?:br|\/li)>)?\n/g,function(t,e){return e?t:" <br>\n"})}}(),define("pagedownExtra",function(){}),define("extensions/markdownExtra",["underscore","utils","logger","classes/Extension","text!html/markdownExtraSettingsBlock.html","google-code-prettify","crel","pagedownExtra"],function(t,e,n,r,i,a){var o=new r("markdownExtra","Markdown Extra",!0);o.settingsBlock=i,o.defaultConfig={extensions:["fenced_code_gfm","tables","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"],intraword:!0,comments:!0,highlighter:"highlight"},o.onLoadSettings=function(){function n(e){return t.some(o.config.extensions,function(t){return t==e})}e.setInputChecked("#input-markdownextra-fencedcodegfm",n("fenced_code_gfm")),e.setInputChecked("#input-markdownextra-tables",n("tables")),e.setInputChecked("#input-markdownextra-deflist",n("def_list")),e.setInputChecked("#input-markdownextra-attrlist",n("attr_list")),e.setInputChecked("#input-markdownextra-footnotes",n("footnotes")),e.setInputChecked("#input-markdownextra-smartypants",n("smartypants")),e.setInputChecked("#input-markdownextra-strikethrough",n("strikethrough")),e.setInputChecked("#input-markdownextra-newlines",n("newlines")),e.setInputChecked("#input-markdownextra-intraword",o.config.intraword),e.setInputChecked("#input-markdownextra-comments",o.config.comments),e.setInputValue("#input-markdownextra-highlighter",o.config.highlighter)},o.onSaveSettings=function(t){t.extensions=[],e.getInputChecked("#input-markdownextra-fencedcodegfm")&&t.extensions.push("fenced_code_gfm"),e.getInputChecked("#input-markdownextra-tables")&&t.extensions.push("tables"),e.getInputChecked("#input-markdownextra-deflist")&&t.extensions.push("def_list"),e.getInputChecked("#input-markdownextra-attrlist")&&t.extensions.push("attr_list"),e.getInputChecked("#input-markdownextra-footnotes")&&t.extensions.push("footnotes"),e.getInputChecked("#input-markdownextra-smartypants")&&t.extensions.push("smartypants"),e.getInputChecked("#input-markdownextra-strikethrough")&&t.extensions.push("strikethrough"),e.getInputChecked("#input-markdownextra-newlines")&&t.extensions.push("newlines"),t.intraword=e.getInputChecked("#input-markdownextra-intraword"),t.comments=e.getInputChecked("#input-markdownextra-comments"),t.highlighter=e.getInputValue("#input-markdownextra-highlighter")};var s;o.onEventMgrCreated=function(t){s=t};var l;return o.onReady=function(){l=document.getElementById("preview-contents")},o.onPagedownConfigure=function(t){var e=t.getConverter(),n={extensions:o.config.extensions,highlighter:"prettify"};if(o.config.intraword===!0){var r={_DoItalicsAndBold:function(t){return t=t.replace(/([^\w*]|^)(\*\*|__)(?=\S)(.+?[*_]*)(?=\S)\2(?=[^\w*]|$)/g,"$1<strong>$3</strong>"),t=t.replace(/([^\w*]|^)(\*|_)(?=\S)(.+?)(?=\S)\2(?=[^\w*]|$)/g,"$1<em>$3</em>"),t=t.replace(/([^\w*]|^)(\*\*|__)(?=\S)(.+?[*_]*)(?=\S)\2(?=[^\w*]|$)/g,"$1<strong>$3</strong>")}};e.setOptions(r)}o.config.comments===!0&&e.hooks.chain("postConversion",function(t){return t.replace(/<!--.*?-->/g,function(t){return t.replace(/^<!---(.+?)-?-->$/,' <span class="comment label label-danger">$1</span> ')})}),t.hooks.chain("onPreviewRefresh",function(){$("#preview-contents pre").addClass("prettyprint linenums"),a.prettyPrint()}),Markdown.Extra.init(e,n)},o}),define("text!html/mathJaxSettingsBlock.html",[],function(){return'<p>Allows StackEdit to interpret LaTeX mathematical expressions.</p>\n<div class="form-horizontal">\n    <div class="form-group">\n        <label class="col-sm-4 control-label"\n            for="input-mathjax-config-tex">TeX configuration</label>\n        <div class="col-sm-7">\n            <input type="text" id="input-mathjax-config-tex" class="form-control">\n        </div>\n    </div>\n    <div class="form-group">\n        <label class="col-sm-4 control-label"\n            for="input-mathjax-config-tex2jax">tex2jax configuration</label>\n        <div class="col-sm-7">\n            <input type="text" id="input-mathjax-config-tex2jax" class="form-control">\n        </div>\n    </div>\n</div>\n<span class="help-block pull-right"><a target="_blank" href="http://docs.mathjax.org/en/latest/options/index.html">More info</a></span>'}),define("text!libs/mathjax_config.js",[],function(){return'MathJax.Hub.Config({\n	skipStartupTypeset: true,\n    "HTML-CSS": {\n        preferredFont: "TeX",\n        availableFonts: [\n            "STIX",\n            "TeX"\n        ],\n        linebreaks: {\n            automatic: true\n        },\n        EqnChunk: 10,\n        imageFont: null\n    },\n    tex2jax: <%= tex2jax || \'{ inlineMath: [["$","$"],["\\\\\\\\\\\\\\\\(","\\\\\\\\\\\\\\\\)"]], displayMath: [["$$","$$"],["\\\\\\\\[","\\\\\\\\]"]], processEscapes: true }\' %>,\n    TeX: $.extend({\n        noUndefined: {\n            attributes: {\n                mathcolor: "red",\n                mathbackground: "#FFEEEE",\n                mathsize: "90%"\n            }\n        },\n        Safe: {\n            allow: {\n                URLs: "safe",\n                classes: "safe",\n                cssIDs: "safe",\n                styles: "safe",\n                fontsize: "all"\n            }\n        }\n    }, <%= tex %>),\n    messageStyle: "none"\n});\n'}),define("libs/mathjax_init",["settings","text!libs/mathjax_config.js"],function(t,e){var n=document.createElement("script");n.type="text/x-mathjax-config",n.innerHTML=_.template(e,{tex:t.extensionSettings.mathJax?t.extensionSettings.mathJax.tex:"undefined",tex2jax:t.extensionSettings.mathJax?t.extensionSettings.mathJax.tex2jax:void 0}),document.getElementsByTagName("head")[0].appendChild(n)}),define("extensions/mathJax",["utils","classes/Extension","text!html/mathJaxSettingsBlock.html","mathjax"],function(t,e,n){function r(t,e,n){var r=u.slice(t,e+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(x.Browser.isMSIE&&(r=r.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));e>t;)u[e]="",e--;u[t]="@@"+g.length+"@@",n&&(r=n(r)),g.push(r),h=f=d=null}function i(t){h=f=d=null,g=[];var e;/`/.test(t)?(t=t.replace(/~/g,"~T").replace(/(^|[^\\])(`+)([^\n]*?[^`\n])\2(?!`)/gm,function(t){return t.replace(/\$/g,"~D")}),e=function(t){return t.replace(/~([TD])/g,function(t,e){return{T:"~",D:"$"}[e]})}):e=function(t){return t},u=w(t.replace(/\r\n?/g,"\n"),_);for(var n=1,i=u.length;i>n;n+=2){var a=u[n];"@"===a.charAt(0)?(u[n]="@@"+g.length+"@@",g.push(a)):h?f==b&&"\n"==a.charAt(0)?(d&&(n=d,r(h,n,e)),h=f=d=null,p=0):a===f?p?d=n:r(h,n,e):a.match(/\n.*\n/)?(d&&(n=d,r(h,n,e)),h=f=d=null,p=0):"{"===a?p++:"}"===a&&p&&p--:a===b||"$$"===a?(h=n,f=a,p=0):"begin"===a.substr(1,5)&&(h=n,f="\\end"+a.substr(6),p=0)}return d&&r(h,d,e),e(u.join(""))}function a(t){return t=t.replace(/@@(\d+)@@/g,function(t,e){return g[e]}),g=null,t}function o(){v=!1,x.cancelTypeset=!1,x.Queue(["Typeset",x,y]),x.Queue(c)}function s(){v||(v=!0,x.Cancel(),x.Queue(o))}var l=new e("mathJax","MathJax",!0);l.settingsBlock=n,l.defaultConfig={tex:"{}",tex2jax:'{ inlineMath: [["$","$"],["\\\\\\\\(","\\\\\\\\)"]], displayMath: [["$$","$$"],["\\\\[","\\\\]"]], processEscapes: true }'},l.onLoadSettings=function(){t.setInputValue("#input-mathjax-config-tex",l.config.tex),t.setInputValue("#input-mathjax-config-tex2jax",l.config.tex2jax)},l.onSaveSettings=function(e,n){e.tex=t.getInputJsValue("#input-mathjax-config-tex",n),e.tex2jax=t.getInputJsValue("#input-mathjax-config-tex2jax",n)},l.onPagedownConfigure=function(t){y=document.getElementById("preview-contents");var e=t.getConverter();e.hooks.chain("preConversion",i),e.hooks.chain("postConversion",a)};var c;l.onAsyncPreview=function(t){c=t,s()};var u,h,f,d,p,g,m=!1,v=!1,y=null,b="$",x=MathJax.Hub;x.Queue(function(){m=!0,x.processUpdateTime=50,x.Config({"HTML-CSS":{EqnChunk:10,EqnChunkFactor:1},SVG:{EqnChunk:10,EqnChunkFactor:1}})});var w,_=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[\\{}$]|[{}]|(?:\n\s*)+|@@\d+@@)/i;return w=3==="aba".split(/(b)/).length?function(t,e){return t.split(e)}:function(t,e){var n,r=[];if(!e.global){n=e.toString();var i="";n=n.replace(/^\/(.*)\/([im]*)$/,function(t,e,n){return i=n,e}),e=RegExp(n,i+"g")}for(var a=e.lastIndex=0;n=e.exec(t);)r.push(t.substring(a,n.index)),r.push.apply(r,n.slice(1)),a=n.index+n[0].length;return r.push(t.substring(a)),r},function(){var t=MathJax.Hub;if(!t.Cancel){t.cancelTypeset=!1,t.Register.StartupHook("HTML-CSS Jax Config",function(){var e=MathJax.OutputJax["HTML-CSS"],n=e.Translate;e.Augment({Translate:function(r,i){if(t.cancelTypeset||i.cancelled)throw Error("MathJax Canceled");return n.call(e,r,i)}})}),t.Register.StartupHook("SVG Jax Config",function(){var e=MathJax.OutputJax.SVG,n=e.Translate;e.Augment({Translate:function(r,i){if(t.cancelTypeset||i.cancelled)throw Error("MathJax Canceled");return n.call(e,r,i)}})}),t.Register.StartupHook("TeX Jax Config",function(){var e=MathJax.InputJax.TeX,n=e.Translate;e.Augment({Translate:function(r,i){if(t.cancelTypeset||i.cancelled)throw Error("MathJax Canceled");return n.call(e,r,i)}})});var e=t.processError;t.processError=function(n,r,i){return"MathJax Canceled"!==n.message?e.call(t,n,r,i):(MathJax.Message.Clear(0,0),r.jaxIDs=[],r.jax={},r.scripts=[],r.i=r.j=0,r.cancelled=!0,null)},t.Cancel=function(){this.cancelTypeset=!0}}}(),l}),define("text!html/partialRenderingSettingsBlock.html",[],function(){return"<p>Renders modified sections only.</p>\n<blockquote>\n	<p><b>Note:</b> Document sections are based on title elements (h1, h2...). Therefore if\n	your document does not contain any title, performance will not be increased.</p>\n</blockquote>"}),define("extensions/partialRendering",["underscore","crel","extensions/markdownExtra","classes/Extension","text!html/partialRenderingSettingsBlock.html"],function(t,e,n,r,i){function a(){var e=[],n="\n";if(g=!1,t.each(m,function(t){var r='\n<div class="se-preview-section-delimiter"></div>\n\n'+t.text+"\n\n";p&&(r=r.replace(/^```.*\n[\s\S]*?\n```|\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/gm,function(t,e){return e?(g=!0,n+=t.replace(/^\s*\n/gm,"")+"\n",""):t})),r=r.replace(/^```.*\n[\s\S]*?\n```|^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(t,e){return e?(n+=t.replace(/^\s*\n/gm,"")+"\n",""):t}),e.push({id:t.id,text:r+"\n"})}),b=[],y=[],h=void 0,x===!0||u!=n)return x=!1,u=n,y=v,v=e,void(b=e);var r=v.length;t.some(v,function(t,n){return n>=e.length||t.text!=e[n].text?(r=n,!0):void 0});var i=-v.length;t.some(v.slice().reverse(),function(t,n){return n>=e.length||t.text!=e[e.length-n-1].text?(i=-n,!0):void 0}),r-i>v.length&&(i=r-v.length);var a=v.slice(0,r);b=e.slice(r,e.length+i);var o=v.slice(v.length+i,v.length);h=t.first(o),y=v.slice(r,v.length+i),v=a.concat(b).concat(o)}function o(t){var e=t.id.substring(3),n=w[e];n&&_.removeChild(n),w[e]=t,_.appendChild(t)}function s(){function n(n){for(var r=e("div",{id:"wmd-preview-section-"+n.id,"class":"wmd-preview-section preview-content"}),a=!1;i;){var s=i.nextSibling,l="se-preview-section-delimiter"==i.className;if(a===!0&&"DIV"==i.tagName&&l)break;a=!0,"DIV"==i.tagName&&"footnotes"==i.className?t.each(i.querySelectorAll("ol > li"),o):l||r.appendChild(i),i=s}return r}t.each(y,function(t){var e=document.getElementById("wmd-preview-section-"+t.id);d.removeChild(e)});var r=document.getElementById("wmd-preview"),i=r.firstChild,a=document.createDocumentFragment();t.each(b,function(t){a.appendChild(n(t))}),r.innerHTML="";var s=f;void 0!==h&&(s=document.getElementById("wmd-preview-section-"+h.id)),d.insertBefore(a,s),f.innerHTML="";var l=[];if(g===!0){var c=e("ol");t.each(d.querySelectorAll("a.footnote"),function(t,e){t.textContent=e+1;var n=t.id.substring(6);l.push(n);var r=w[n];r&&c.appendChild(r.cloneNode(!0))}),l.length>0&&f.appendChild(e("div",{"class":"footnotes"},e("hr"),c)),Object.keys(w).forEach(function(t){-1===l.indexOf(t)&&(_.removeChild(w[t]),delete w[t])})}}var l=new r("partialRendering","Partial Rendering",!0);l.settingsBlock=i;var c,u,h,f,d,p=!1,g=!1,m=[],v=[],y=[],b=[],x=!1,w={},_=document.createDocumentFragment();return l.onSectionsCreated=function(t){m=t},l.onPagedownConfigure=function(e){c=e.getConverter(),c.hooks.chain("preConversion",function(){a();var e=t.map(b,function(t){return t.text});return e.push(u+"\n\n"),e.join("")}),e.hooks.chain("onPreviewRefresh",function(){s()})},l.onInit=function(){n.enabled&&t.some(n.config.extensions,function(t){return"footnotes"==t})&&(p=!0)},l.onReady=function(){f=e("div",{id:"wmd-preview-section-footnotes","class":"preview-content"}),d=document.getElementById("preview-contents"),d.appendChild(f)},l.onFileSelected=function(){x=!0},l}),define("extensions/markdownSectionParser",["underscore","extensions/markdownExtra","extensions/mathJax","extensions/partialRendering","classes/Extension","crel"],function(t,e,n,r,i,a){function o(t,e){function n(t,e){var n=a.substring(o,e);u.push({id:++d,text:n,textWithFrontMatter:r+n}),r=""}if(t===f){var r=(f.frontMatter||{})._frontMatter||"",i=e.substring(r.length),a=i+"\n\n";u=[];var o=0;a.replace(h,function(t,e){n(o,e),o=e}),n(o,i.length),s.onSectionsCreated(u)}}var s,l=new i("markdownSectionParser","Markdown section parser");l.onEventMgrCreated=function(t){s=t};var c,u=[],h="^.+[ \\t]*\\n=+[ \\t]*\\n+|^.+[ \\t]*\\n-+[ \\t]*\\n+|^\\#{1,6}[ \\t]*.+?[ \\t]*\\#*\\n+";l.onPagedownConfigure=function(i){e.enabled&&t.some(e.config.extensions,function(t){return"fenced_code_gfm"==t})&&(h="^```[^`\\n]*\\n[\\s\\S]*?\\n```|"+h),n.enabled&&(h="^[ \\t]*\\n\\$\\$[\\s\\S]*?\\$\\$|"+h,h="^[ \\t]*\\n\\\\\\\\[[\\s\\S]*?\\\\\\\\]|"+h,h="^[ \\t]*\\n\\\\?\\\\begin\\{[a-z]*\\*?\\}[\\s\\S]*?\\\\end\\{[a-z]*\\*?\\}|"+h),h=new RegExp(h,"gm");var o=i.getConverter();r.enabled||(o.hooks.chain("preConversion",function(){return t.reduce(u,function(t,e){return t+'\n<div class="se-preview-section-delimiter"></div>\n\n'+e.text+"\n\n"},"")}),i.hooks.chain("onPreviewRefresh",function(){function t(){for(var t=a("div",{"class":"wmd-preview-section preview-content"}),e=!1;n;){var r=n.nextSibling,i="se-preview-section-delimiter"==n.className;if(e===!0&&"DIV"==n.tagName&&i)break;e=!0,i||t.appendChild(n),n=r}return t}var e=document.getElementById("wmd-preview"),n=e.firstChild,r=document.createDocumentFragment();u.forEach(function(e){r.appendChild(t(e))}),c.innerHTML="",c.appendChild(e),c.appendChild(r)}))},l.onReady=function(){c=document.getElementById("preview-contents")};var f;l.onFileSelected=function(t){f=t};var d=0;return l.onFileOpen=o,l.onContentChanged=o,l}),define("extensions/workingIndicator",["underscore","crel","classes/Extension"],function(t,e,n){var r,i,a=new n("workingIndicator","Working Indicator"),o=["@<%= prefix %>keyframes <%= name %> {","    0% { opacity:<%= z %>; }","    <%= start %>.01% { opacity:<%= alpha %>; }","    <%= start %>.02% { opacity:1; }","    <%= ((start + trail) % 100) %>.01% { opacity:<%= alpha %>; }","    100% { opacity:<%= z %>; }","}"].join("\n");return a.onAsyncRunning=function(t){r.toggleClass("working",t),i.toggleClass("hide",!t)},a.onReady=function(){function n(e){e.z=Math.max(1-(1-e.alpha)/e.trail*(100-e.start),e.alpha),a+=t.template(o,t.extend({prefix:""},e)),a+=t.template(o,t.extend({prefix:"-webkit-"},e))}var a="";r=$(document.body),i=$('<div class="hide">'),$(".working-indicator").append(i);for(var s=0;3>s;s++){var l="working-indicator-bar"+s;n({name:l,alpha:.25,start:20*s,trail:50});var c=l+" 0.7s linear infinite";i.append($('<div class="bar">').css({animation:c,"-webkit-animation":c}))}var u=e("style",{type:"text/css"});document.head.appendChild(u),u.innerHTML=a},a}),function(t){var e=function(){return!1===t.support.boxModel&&t.support.objectAll&&t.support.leadingWhitespace}();t.jGrowl=function(e,n){0==t("#jGrowl").size()&&t('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:t.jGrowl.defaults.position).appendTo("body"),t("#jGrowl").jGrowl(e,n)},t.fn.jGrowl=function(e,n){if(t.isFunction(this.each)){var r=arguments;return this.each(function(){void 0==t(this).data("jGrowl.instance")&&(t(this).data("jGrowl.instance",t.extend(new t.fn.jGrowl,{notifications:[],element:null,interval:null})),t(this).data("jGrowl.instance").startup(this)),t.isFunction(t(this).data("jGrowl.instance")[e])?t(this).data("jGrowl.instance")[e].apply(t(this).data("jGrowl.instance"),t.makeArray(r).slice(1)):t(this).data("jGrowl.instance").create(e,n)})}},t.extend(t.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(e,n){var n=t.extend({},this.defaults,n);"undefined"!=typeof n.speed&&(n.openDuration=n.speed,n.closeDuration=n.speed),this.notifications.push({message:e,options:n}),n.log.apply(this.element,[this.element,e,n])},render:function(e){var n=this,r=e.message,i=e.options;i.themeState=""==i.themeState?"":"ui-state-"+i.themeState;var e=t("<div/>").addClass("jGrowl-notification "+i.themeState+" ui-corner-all"+(void 0!=i.group&&""!=i.group?" "+i.group:"")).append(t("<div/>").addClass("jGrowl-close").html(i.closeTemplate)).append(t("<div/>").addClass("jGrowl-header").html(i.header)).append(t("<div/>").addClass("jGrowl-message").html(r)).data("jGrowl",i).addClass(i.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){t(this).parent().trigger("jGrowl.beforeClose")}).parent();t(e).bind("mouseover.jGrowl",function(){t("div.jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){t("div.jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){i.beforeOpen.apply(e,[e,r,i,n.element])!==!1&&t(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){i.open.apply(e,[e,r,i,n.element])!==!1&&("after"==i.glue?t("div.jGrowl-notification:last",n.element).after(e):t("div.jGrowl-notification:first",n.element).before(e),t(this).animate(i.animateOpen,i.openDuration,i.easing,function(){t.support.opacity===!1&&this.style.removeAttribute("filter"),null!==t(this).data("jGrowl")&&(t(this).data("jGrowl").created=new Date),t(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){i.afterOpen.apply(e,[e,r,i,n.element])}).bind("jGrowl.beforeClose",function(){i.beforeClose.apply(e,[e,r,i,n.element])!==!1&&t(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){t(this).data("jGrowl.pause",!0),t(this).animate(i.animateClose,i.closeDuration,i.easing,function(){t.isFunction(i.close)?i.close.apply(e,[e,r,i,n.element])!==!1&&t(this).remove():t(this).remove()})}).trigger("jGrowl.beforeOpen"),""!=i.corners&&void 0!=t.fn.corner&&t(e).corner(i.corners),t("div.jGrowl-notification:parent",n.element).size()>1&&0==t("div.jGrowl-closer",n.element).size()&&this.defaults.closer!==!1&&t(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){t(this).siblings().trigger("jGrowl.beforeClose"),t.isFunction(n.defaults.closer)&&n.defaults.closer.apply(t(this).parent()[0],[t(this).parent()[0]])})},update:function(){t(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!=t(this).data("jGrowl")&&void 0!==t(this).data("jGrowl").created&&t(this).data("jGrowl").created.getTime()+parseInt(t(this).data("jGrowl").life)<(new Date).getTime()&&t(this).data("jGrowl").sticky!==!0&&(void 0==t(this).data("jGrowl.pause")||t(this).data("jGrowl.pause")!==!0)&&t(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0==this.defaults.pool||t(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),t(this.element).find("div.jGrowl-notification:parent").size()<2&&t(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){t(this).remove()})},startup:function(n){this.element=t(n).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){t(n).data("jGrowl.instance").update()},parseInt(this.defaults.check)),e&&t(this.element).addClass("ie6")},shutdown:function(){t(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){t(this.element).find("div.jGrowl-notification").each(function(){t(this).trigger("jGrowl.beforeClose")})}}),t.jGrowl.defaults=t.fn.jGrowl.prototype.defaults}(jQuery),define("jgrowl",function(t){return function(){var e;return e||t.jQuery.jGrowl}}(this)),define("text!html/notificationsSettingsBlock.html",[],function(){return'<p>Shows notification messages in the bottom-right corner of the\n	screen.</p>\n<div class="form-horizontal">\n	<div class="form-group">\n		<label class="col-sm-4 control-label" for="input-notifications-timeout">Timeout</label>\n		<div class="col-sm-7 form-inline">\n			<input type="text" id="input-notifications-timeout"\n				class="col-sm-5 form-control"> <span class="help-inline">ms</span>\n		</div>\n	</div>\n</div>'}),define("extensions/notifications",["underscore","utils","logger","classes/Extension","jgrowl","text!html/notificationsSettingsBlock.html"],function(t,e,n,r,i,a){function o(){f===!1&&(i.defaults.life=c.config.timeout,i.defaults.closer=!1,i.defaults.closeTemplate="",i.defaults.position="bottom-right",f=!0)}function s(e,r,a){if(n.info(e),o(),e){var s=e.indexOf("|");(-1===s||(e=e.substring(0,s)))&&(a=a||{},r=r||"icon-info-circled",i("<i class='icon-white "+r+"'></i> "+t.escape(e).replace(/\n/g,"<br/>"),a))}}function l(){d!==!1&&(u.toggleClass("hide",!p),h.toggleClass("hide",p))}var c=new r("notifications","Notifications");c.settingsBlock=a,c.defaultConfig={timeout:8e3},c.onLoadSettings=function(){e.setInputValue("#input-notifications-timeout",c.config.timeout)},c.onSaveSettings=function(t,n){t.timeout=e.getInputIntValue("#input-notifications-timeout",n,1,6e4)};var u,h,f=!1,d=!1;c.onReady=function(){d=!0,u=$(".navbar .offline-status"),h=$(".navbar .extension-buttons"),l()
},c.onMessage=function(t){s(t)},c.onError=function(e){n.error(e),t.isString(e)?s(e,"icon-attention"):t.isObject(e)&&s(e.message,"icon-attention")};var p=!1;return c.onOfflineChanged=function(t){p=t,l(),p===!0?s("You are offline.","icon-attention-circled msg-offline"):s("You are back online!","icon-signal")},c.onSyncImportSuccess=function(e,n){var r=t.map(e,function(t){return t.title}).join(", ");s(r+" imported successfully from "+n.providerName+".")},c.onSyncExportSuccess=function(t,e){s('"'+t.title+'" will now be synchronized on '+e.provider.providerName+".")},c.onSyncRemoved=function(t,e){s(e.provider.providerName+" synchronized location has been removed.")},c.onPublishSuccess=function(t){s('"'+t.title+'" successfully published.')},c.onNewPublishSuccess=function(t,e){s('"'+t.title+'" is now published on '+e.provider.providerName+".")},c.onPublishRemoved=function(t,e){s(e.provider.providerName+" publish location has been removed.")},c}),define("text!html/umlDiagramsSettingsBlock.html",[],function(){return'<p>Creates UML diagrams from plain text description.</p>\n\n<div class="form-horizontal">\n    <div class="form-group">\n        <label class="col-sm-4 control-label" for="textarea-umldiagram-flowchart-options">Flow charts options (JSON)\n        </label>\n        <div class="col-sm-7">\n            <textarea id="textarea-umldiagram-flowchart-options" class="form-control"></textarea>\n        </div>\n    </div>\n</div>\n<br>\n<p>Sequence diagrams:</p>\n<pre><div class="help-block pull-right"><a target="_blank" href="http://bramp.github.io/js-sequence-diagrams/">More info</a></div><code>```sequence\nAlice->Bob: Hello Bob, how are you?\nBob-->Alice: I am good thanks!\n```</code>\n</pre>\n\n<p>Flow charts:</p>\n<pre><div class="help-block pull-right"><a target="_blank" href="http://adrai.github.io/flowchart.js/">More info</a></div><code>```flow\nst=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```</code>\n</pre>\n<blockquote>\n    <p><b>Note:</b> Markdown Extra extension has to be enabled with GFM fenced code blocks option.</p>\n</blockquote>\n'}),function(t){var e,n,r="0.4.2",i="hasOwnProperty",a=/[\.\/]/,o="*",s=function(){},l=function(t,e){return t-e},c={n:{}},u=function(t,r){t=String(t);var i,a=n,o=Array.prototype.slice.call(arguments,2),s=u.listeners(t),c=0,h=[],f={},d=[],p=e;e=t,n=0;for(var g=0,m=s.length;m>g;g++)"zIndex"in s[g]&&(h.push(s[g].zIndex),s[g].zIndex<0&&(f[s[g].zIndex]=s[g]));for(h.sort(l);h[c]<0;)if(i=f[h[c++]],d.push(i.apply(r,o)),n)return n=a,d;for(g=0;m>g;g++)if(i=s[g],"zIndex"in i)if(i.zIndex==h[c]){if(d.push(i.apply(r,o)),n)break;do if(c++,i=f[h[c]],i&&d.push(i.apply(r,o)),n)break;while(i)}else f[i.zIndex]=i;else if(d.push(i.apply(r,o)),n)break;return n=a,e=p,d.length?d:null};u._events=c,u.listeners=function(t){var e,n,r,i,s,l,u,h,f=t.split(a),d=c,p=[d],g=[];for(i=0,s=f.length;s>i;i++){for(h=[],l=0,u=p.length;u>l;l++)for(d=p[l].n,n=[d[f[i]],d[o]],r=2;r--;)e=n[r],e&&(h.push(e),g=g.concat(e.f||[]));p=h}return g},u.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(a),r=c,i=0,o=n.length;o>i;i++)r=r.n,r=r.hasOwnProperty(n[i])&&r[n[i]]||(r[n[i]]={n:{}});for(r.f=r.f||[],i=0,o=r.f.length;o>i;i++)if(r.f[i]==e)return s;return r.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.f=function(t){var e=[].slice.call(arguments,1);return function(){u.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},u.stop=function(){n=1},u.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},u.nts=function(){return e.split(a)},u.off=u.unbind=function(t,e){if(!t)return void(u._events=c={n:{}});var n,r,s,l,h,f,d,p=t.split(a),g=[c];for(l=0,h=p.length;h>l;l++)for(f=0;f<g.length;f+=s.length-2){if(s=[f,1],n=g[f].n,p[l]!=o)n[p[l]]&&s.push(n[p[l]]);else for(r in n)n[i](r)&&s.push(n[r]);g.splice.apply(g,s)}for(l=0,h=g.length;h>l;l++)for(n=g[l];n.n;){if(e){if(n.f){for(f=0,d=n.f.length;d>f;f++)if(n.f[f]==e){n.f.splice(f,1);break}!n.f.length&&delete n.f}for(r in n.n)if(n.n[i](r)&&n.n[r].f){var m=n.n[r].f;for(f=0,d=m.length;d>f;f++)if(m[f]==e){m.splice(f,1);break}!m.length&&delete n.n[r].f}}else{delete n.f;for(r in n.n)n.n[i](r)&&n.n[r].f&&delete n.n[r].f}n=n.n}},u.once=function(t,e){var n=function(){return u.unbind(t,n),e.apply(this,arguments)};return u.on(t,n)},u.version=r,u.toString=function(){return"You are running Eve "+r},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u}(this),function(t,e){"function"==typeof define&&define.amd?define("raphael",["eve"],function(n){return e(t,n)}):e(t,t.eve)}(this,function(t,e){function n(t){if(n.is(t,"function"))return x?t():e.on("raphael.DOMload",t);if(n.is(t,X))return n._engine.create[N](n,t.splice(0,3+n.is(t[0],G))).add(t);var r=Array.prototype.slice.call(arguments,0);if(n.is(r[r.length-1],"function")){var i=r.pop();return x?i.call(n._engine.create[N](n,r)):e.on("raphael.DOMload",function(){i.call(n._engine.create[N](n,r))})}return n._engine.create[N](n,arguments)}function r(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[E](n)&&(e[n]=r(t[n]));return e}function i(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function a(t,e,n){function r(){var a=Array.prototype.slice.call(arguments,0),o=a.join(""),s=r.cache=r.cache||{},l=r.count=r.count||[];return s[E](o)?(i(l,o),n?n(s[o]):s[o]):(l.length>=1e3&&delete s[l.shift()],l.push(o),s[o]=t[N](e,a),n?n(s[o]):s[o])}return r}function o(){return this.hex}function s(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4==r?a[3]={x:+t[0],y:+t[1]}:i-2==r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4==r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}function l(t,e,n,r,i){var a=-3*e+9*n-9*r+3*i,o=t*a+6*e-12*n+6*r;return t*o-3*e+3*n}function c(t,e,n,r,i,a,o,s,c){null==c&&(c=1),c=c>1?1:0>c?0:c;for(var u=c/2,h=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;h>g;g++){var m=u*f[g]+u,v=l(m,t,n,i,o),y=l(m,e,r,a,s),b=v*v+y*y;p+=d[g]*j.sqrt(b)}return u*p}function u(t,e,n,r,i,a,o,s,l){if(!(0>l||c(t,e,n,r,i,a,o,s)<l)){var u,h=1,f=h/2,d=h-f,p=.01;for(u=c(t,e,n,r,i,a,o,s,d);U(u-l)>p;)f/=2,d+=(l>u?1:-1)*f,u=c(t,e,n,r,i,a,o,s,d);return d}}function h(t,e,n,r,i,a,o,s){if(!($(t,n)<H(i,o)||H(t,n)>$(i,o)||$(e,r)<H(a,s)||H(e,r)>$(a,s))){var l=(t*r-e*n)*(i-o)-(t-n)*(i*s-a*o),c=(t*r-e*n)*(a-s)-(e-r)*(i*s-a*o),u=(t-n)*(a-s)-(e-r)*(i-o);if(u){var h=l/u,f=c/u,d=+h.toFixed(2),p=+f.toFixed(2);if(!(d<+H(t,n).toFixed(2)||d>+$(t,n).toFixed(2)||d<+H(i,o).toFixed(2)||d>+$(i,o).toFixed(2)||p<+H(e,r).toFixed(2)||p>+$(e,r).toFixed(2)||p<+H(a,s).toFixed(2)||p>+$(a,s).toFixed(2)))return{x:h,y:f}}}}function f(t,e,r){var i=n.bezierBBox(t),a=n.bezierBBox(e);if(!n.isBBoxIntersect(i,a))return r?0:[];for(var o=c.apply(0,t),s=c.apply(0,e),l=$(~~(o/5),1),u=$(~~(s/5),1),f=[],d=[],p={},g=r?0:[],m=0;l+1>m;m++){var v=n.findDotsAtSegment.apply(n,t.concat(m/l));f.push({x:v.x,y:v.y,t:m/l})}for(m=0;u+1>m;m++)v=n.findDotsAtSegment.apply(n,e.concat(m/u)),d.push({x:v.x,y:v.y,t:m/u});for(m=0;l>m;m++)for(var y=0;u>y;y++){var b=f[m],x=f[m+1],w=d[y],_=d[y+1],C=U(x.x-b.x)<.001?"y":"x",S=U(_.x-w.x)<.001?"y":"x",E=h(b.x,b.y,x.x,x.y,w.x,w.y,_.x,_.y);if(E){if(p[E.x.toFixed(4)]==E.y.toFixed(4))continue;p[E.x.toFixed(4)]=E.y.toFixed(4);var k=b.t+U((E[C]-b[C])/(x[C]-b[C]))*(x.t-b.t),T=w.t+U((E[S]-w[S])/(_[S]-w[S]))*(_.t-w.t);k>=0&&1.001>=k&&T>=0&&1.001>=T&&(r?g++:g.push({x:E.x,y:E.y,t1:H(k,1),t2:H(T,1)}))}}return g}function d(t,e,r){t=n._path2curve(t),e=n._path2curve(e);for(var i,a,o,s,l,c,u,h,d,p,g=r?0:[],m=0,v=t.length;v>m;m++){var y=t[m];if("M"==y[0])i=l=y[1],a=c=y[2];else{"C"==y[0]?(d=[i,a].concat(y.slice(1)),i=d[6],a=d[7]):(d=[i,a,i,a,l,c,l,c],i=l,a=c);for(var b=0,x=e.length;x>b;b++){var w=e[b];if("M"==w[0])o=u=w[1],s=h=w[2];else{"C"==w[0]?(p=[o,s].concat(w.slice(1)),o=p[6],s=p[7]):(p=[o,s,o,s,u,h,u,h],o=u,s=h);var _=f(d,p,r);if(r)g+=_;else{for(var C=0,S=_.length;S>C;C++)_[C].segment1=m,_[C].segment2=b,_[C].bez1=d,_[C].bez2=p;g=g.concat(_)}}}}}return g}function p(t,e,n,r,i,a){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+r,this.e=+i,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function g(){return this.x+L+this.y+L+this.width+"  "+this.height}function m(t,e,n,r,i,a){function o(t){return((h*t+u)*t+c)*t}function s(t,e){var n=l(t,e);return((p*n+d)*n+f)*n}function l(t,e){var n,r,i,a,s,l;for(i=t,l=0;8>l;l++){if(a=o(i)-t,U(a)<e)return i;if(s=(3*h*i+2*u)*i+c,U(s)<1e-6)break;i-=a/s}if(n=0,r=1,i=t,n>i)return n;if(i>r)return r;for(;r>n;){if(a=o(i),U(a-t)<e)return i;t>a?n=i:r=i,i=(r-n)/2+n}return i}var c=3*e,u=3*(r-e)-c,h=1-c-u,f=3*n,d=3*(i-n)-f,p=1-f-d;return s(t,1/(200*a))}function v(t,e){var n=[],r={};if(this.ms=e,this.times=1,t){for(var i in t)t[E](i)&&(r[Z(i)]=t[i],n.push(Z(i)));n.sort(he)}this.anim=r,this.top=n[n.length-1],this.percents=n}function y(t,r,i,a,o,s){i=Z(i);var l,c,u,h,f,d,g=t.ms,v={},y={},b={};if(a)for(w=0,C=cn.length;C>w;w++){var x=cn[w];if(x.el.id==r.id&&x.anim==t){x.percent!=i?(cn.splice(w,1),u=1):c=x,r.attr(x.totalOrigin);break}}else a=+y;for(var w=0,C=t.percents.length;C>w;w++){if(t.percents[w]==i||t.percents[w]>a*t.top){i=t.percents[w],f=t.percents[w-1]||0,g=g/t.top*(i-f),h=t.percents[w+1],l=t.anim[i];break}a&&r.attr(t.anim[t.percents[w]])}if(l){if(c)c.initstatus=a,c.start=new Date-c.ms*a;else{for(var S in l)if(l[E](S)&&(re[E](S)||r.paper.customAttributes[E](S)))switch(v[S]=r.attr(S),null==v[S]&&(v[S]=ne[S]),y[S]=l[S],re[S]){case G:b[S]=(y[S]-v[S])/g;break;case"colour":v[S]=n.getRGB(v[S]);var k=n.getRGB(y[S]);b[S]={r:(k.r-v[S].r)/g,g:(k.g-v[S].g)/g,b:(k.b-v[S].b)/g};break;case"path":var T=Fe(v[S],y[S]),I=T[1];for(v[S]=T[0],b[S]=[],w=0,C=v[S].length;C>w;w++){b[S][w]=[0];for(var N=1,A=v[S][w].length;A>N;N++)b[S][w][N]=(I[w][N]-v[S][w][N])/g}break;case"transform":var M=r._,L=He(M[S],y[S]);if(L)for(v[S]=L.from,y[S]=L.to,b[S]=[],b[S].real=!0,w=0,C=v[S].length;C>w;w++)for(b[S][w]=[v[S][w][0]],N=1,A=v[S][w].length;A>N;N++)b[S][w][N]=(y[S][w][N]-v[S][w][N])/g;else{var F=r.matrix||new p,P={_:{transform:M.transform},getBBox:function(){return r.getBBox(1)}};v[S]=[F.a,F.b,F.c,F.d,F.e,F.f],je(P,y[S]),y[S]=P._.transform,b[S]=[(P.matrix.a-F.a)/g,(P.matrix.b-F.b)/g,(P.matrix.c-F.c)/g,(P.matrix.d-F.d)/g,(P.matrix.e-F.e)/g,(P.matrix.f-F.f)/g]}break;case"csv":var B=O(l[S])[D](_),j=O(v[S])[D](_);if("clip-rect"==S)for(v[S]=j,b[S]=[],w=j.length;w--;)b[S][w]=(B[w]-v[S][w])/g;y[S]=B;break;default:for(B=[][R](l[S]),j=[][R](v[S]),b[S]=[],w=r.paper.customAttributes[S].length;w--;)b[S][w]=((B[w]||0)-(j[w]||0))/g}var $=l.easing,H=n.easing_formulas[$];if(!H)if(H=O($).match(Q),H&&5==H.length){var U=H;H=function(t){return m(t,+U[1],+U[2],+U[3],+U[4],g)}}else H=de;if(d=l.start||t.start||+new Date,x={anim:t,percent:i,timestamp:d,start:d+(t.del||0),status:0,initstatus:a||0,stop:!1,ms:g,easing:H,from:v,diff:b,to:y,el:r,callback:l.callback,prev:f,next:h,repeat:s||t.times,origin:r.attr(),totalOrigin:o},cn.push(x),a&&!c&&!u&&(x.stop=!0,x.start=new Date-g*a,1==cn.length))return hn();u&&(x.start=new Date-x.ms*a),1==cn.length&&un(hn)}e("raphael.anim.start."+r.id,r,t)}}function b(t){for(var e=0;e<cn.length;e++)cn[e].el.paper==t&&cn.splice(e--,1)}n.version="2.1.0",n.eve=e;var x,w,_=/[, ]+/,C={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},S=/\{(\d+)\}/g,E="hasOwnProperty",k={doc:document,win:t},T={was:Object.prototype[E].call(k.win,"Raphael"),is:k.win.Raphael},I=function(){this.ca=this.customAttributes={}},N="apply",R="concat",A="ontouchstart"in k.win||k.win.DocumentTouch&&k.doc instanceof DocumentTouch,M="",L=" ",O=String,D="split",F="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[D](L),P={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B=O.prototype.toLowerCase,j=Math,$=j.max,H=j.min,U=j.abs,q=j.pow,z=j.PI,G="number",W="string",X="array",V=Object.prototype.toString,Y=(n._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),J={NaN:1,Infinity:1,"-Infinity":1},Q=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,K=j.round,Z=parseFloat,te=parseInt,ee=O.prototype.toUpperCase,ne=n._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},re=n._availableAnimAttrs={blur:G,"clip-rect":"csv",cx:G,cy:G,fill:"colour","fill-opacity":G,"font-size":G,height:G,opacity:G,path:"path",r:G,rx:G,ry:G,stroke:"colour","stroke-opacity":G,"stroke-width":G,transform:"transform",width:G,x:G,y:G},ie=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ae={hs:1,rg:1},oe=/,?([achlmqrstvxz]),?/gi,se=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,le=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ce=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ue=(n._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),he=function(t,e){return Z(t)-Z(e)},fe=function(){},de=function(t){return t},pe=n._rectPath=function(t,e,n,r,i){return i?[["M",t+i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]]},ge=function(t,e,n,r){return null==r&&(r=n),[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},me=n._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ge(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ge(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return pe(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return pe(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return pe(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return pe(e.x,e.y,e.width,e.height)}},ve=n.mapPath=function(t,e){if(!e)return t;var n,r,i,a,o,s,l;for(t=Fe(t),i=0,o=t.length;o>i;i++)for(l=t[i],a=1,s=l.length;s>a;a+=2)n=e.x(l[a],l[a+1]),r=e.y(l[a],l[a+1]),l[a]=n,l[a+1]=r;return t};if(n._g=k,n.type=k.win.SVGAngle||k.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==n.type){var ye,be=k.doc.createElement("div");if(be.innerHTML='<v:shape adj="1"/>',ye=be.firstChild,ye.style.behavior="url(#default#VML)",!ye||"object"!=typeof ye.adj)return n.type=M;be=null}n.svg=!(n.vml="VML"==n.type),n._Paper=I,n.fn=w=I.prototype=n.prototype,n._id=0,n._oid=0,n.is=function(t,e){return e=B.call(e),"finite"==e?!J[E](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||V.call(t).slice(8,-1).toLowerCase()==e},n.angle=function(t,e,r,i,a,o){if(null==a){var s=t-r,l=e-i;return s||l?(180+180*j.atan2(-l,-s)/z+360)%360:0}return n.angle(t,e,a,o)-n.angle(r,i,a,o)},n.rad=function(t){return t%360*z/180},n.deg=function(t){return 180*t/z%360},n.snapTo=function(t,e,r){if(r=n.is(r,"finite")?r:10,n.is(t,X)){for(var i=t.length;i--;)if(U(t[i]-e)<=r)return t[i]}else{t=+t;var a=e%t;if(r>a)return e-a;if(a>t-r)return e-a+t}return e};n.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*j.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});n.setWindow=function(t){e("raphael.setWindow",n,k.win,t),k.win=t,k.doc=k.win.document,n._engine.initWin&&n._engine.initWin(k.win)};var xe=function(t){if(n.vml){var e,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),e=i.body}catch(o){e=createPopup().document.body}var s=e.createTextRange();xe=a(function(t){try{e.style.color=O(t).replace(r,M);var n=s.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(i){return"none"}})}else{var l=k.doc.createElement("i");l.title="Raphal Colour Picker",l.style.display="none",k.doc.body.appendChild(l),xe=a(function(t){return l.style.color=t,k.doc.defaultView.getComputedStyle(l,M).getPropertyValue("color")})}return xe(t)},we=function(){return"hsb("+[this.h,this.s,this.b]+")"},_e=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ce=function(){return this.hex},Se=function(t,e,r){if(null==e&&n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,e=t.g,t=t.r),null==e&&n.is(t,W)){var i=n.getRGB(t);t=i.r,e=i.g,r=i.b}return(t>1||e>1||r>1)&&(t/=255,e/=255,r/=255),[t,e,r]},Ee=function(t,e,r,i){t*=255,e*=255,r*=255;var a={r:t,g:e,b:r,hex:n.rgb(t,e,r),toString:Ce};return n.is(i,"finite")&&(a.opacity=i),a};n.color=function(t){var e;return n.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=n.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):n.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=n.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(n.is(t,"string")&&(t=n.getRGB(t)),n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=n.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=n.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=Ce,t},n.hsb2rgb=function(t,e,n,r){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,r=t.o),t*=360;var i,a,o,s,l;return t=t%360/60,l=n*e,s=l*(1-U(t%2-1)),i=a=o=n-l,t=~~t,i+=[l,s,0,0,s,l][t],a+=[s,l,l,s,0,0][t],o+=[0,0,s,l,l,s][t],Ee(i,a,o,r)},n.hsl2rgb=function(t,e,n,r){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var i,a,o,s,l;return t=t%360/60,l=2*e*(.5>n?n:1-n),s=l*(1-U(t%2-1)),i=a=o=n-l/2,t=~~t,i+=[l,s,0,0,s,l][t],a+=[s,l,l,s,0,0][t],o+=[0,0,s,l,l,s][t],Ee(i,a,o,r)},n.rgb2hsb=function(t,e,n){n=Se(t,e,n),t=n[0],e=n[1],n=n[2];var r,i,a,o;return a=$(t,e,n),o=a-H(t,e,n),r=0==o?null:a==t?(e-n)/o:a==e?(n-t)/o+2:(t-e)/o+4,r=(r+360)%6*60/360,i=0==o?0:o/a,{h:r,s:i,b:a,toString:we}},n.rgb2hsl=function(t,e,n){n=Se(t,e,n),t=n[0],e=n[1],n=n[2];var r,i,a,o,s,l;return o=$(t,e,n),s=H(t,e,n),l=o-s,r=0==l?null:o==t?(e-n)/l:o==e?(n-t)/l+2:(t-e)/l+4,r=(r+360)%6*60/360,a=(o+s)/2,i=0==l?0:.5>a?l/(2*a):l/(2-2*a),{h:r,s:i,l:a,toString:_e}},n._path2string=function(){return this.join(",").replace(oe,"$1")};n._preload=function(t,e){var n=k.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,k.doc.body.removeChild(this)},n.onerror=function(){k.doc.body.removeChild(this)},k.doc.body.appendChild(n),n.src=t};n.getRGB=a(function(t){if(!t||(t=O(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:o};!(ae[E](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=xe(t));var e,r,i,a,s,l,c=t.match(Y);return c?(c[2]&&(i=te(c[2].substring(5),16),r=te(c[2].substring(3,5),16),e=te(c[2].substring(1,3),16)),c[3]&&(i=te((s=c[3].charAt(3))+s,16),r=te((s=c[3].charAt(2))+s,16),e=te((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][D](ie),e=Z(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=Z(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=Z(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(a=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),c[5]?(l=c[5][D](ie),e=Z(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=Z(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=Z(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(e/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(a=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsb2rgb(e,r,i,a)):c[6]?(l=c[6][D](ie),e=Z(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=Z(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=Z(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(e/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(a=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsl2rgb(e,r,i,a)):(c={r:e,g:r,b:i,toString:o},c.hex="#"+(16777216|i|r<<8|e<<16).toString(16).slice(1),n.is(a,"finite")&&(c.opacity=a),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o}},n),n.hsb=a(function(t,e,r){return n.hsb2rgb(t,e,r).hex}),n.hsl=a(function(t,e,r){return n.hsl2rgb(t,e,r).hex}),n.rgb=a(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),n.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},n.getColor.reset=function(){delete this.start},n.parsePathString=function(t){if(!t)return null;var e=ke(t);if(e.arr)return Ie(e.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return n.is(t,X)&&n.is(t[0],X)&&(i=Ie(t)),i.length||O(t).replace(se,function(t,e,n){var a=[],o=e.toLowerCase();if(n.replace(ce,function(t,e){e&&a.push(+e)}),"m"==o&&a.length>2&&(i.push([e][R](a.splice(0,2))),o="l",e="m"==e?"l":"L"),"r"==o)i.push([e][R](a));else for(;a.length>=r[o]&&(i.push([e][R](a.splice(0,r[o]))),r[o]););}),i.toString=n._path2string,e.arr=Ie(i),i},n.parseTransformString=a(function(t){if(!t)return null;var e=[];return n.is(t,X)&&n.is(t[0],X)&&(e=Ie(t)),e.length||O(t).replace(le,function(t,n,r){{var i=[];B.call(n)}r.replace(ce,function(t,e){e&&i.push(+e)}),e.push([n][R](i))}),e.toString=n._path2string,e});var ke=function(t){var e=ke.ps=ke.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[E](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};n.findDotsAtSegment=function(t,e,n,r,i,a,o,s,l){var c=1-l,u=q(c,3),h=q(c,2),f=l*l,d=f*l,p=u*t+3*h*l*n+3*c*l*l*i+d*o,g=u*e+3*h*l*r+3*c*l*l*a+d*s,m=t+2*l*(n-t)+f*(i-2*n+t),v=e+2*l*(r-e)+f*(a-2*r+e),y=n+2*l*(i-n)+f*(o-2*i+n),b=r+2*l*(a-r)+f*(s-2*a+r),x=c*t+l*n,w=c*e+l*r,_=c*i+l*o,C=c*a+l*s,S=90-180*j.atan2(m-y,v-b)/z;return(m>y||b>v)&&(S+=180),{x:p,y:g,m:{x:m,y:v},n:{x:y,y:b},start:{x:x,y:w},end:{x:_,y:C},alpha:S}},n.bezierBBox=function(t,e,r,i,a,o,s,l){n.is(t,"array")||(t=[t,e,r,i,a,o,s,l]);var c=De.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},n.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},n.isBBoxIntersect=function(t,e){var r=n.isPointInsideBBox;return r(e,t.x,t.y)||r(e,t.x2,t.y)||r(e,t.x,t.y2)||r(e,t.x2,t.y2)||r(t,e.x,e.y)||r(t,e.x2,e.y)||r(t,e.x,e.y2)||r(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},n.pathIntersection=function(t,e){return d(t,e)},n.pathIntersectionNumber=function(t,e){return d(t,e,1)},n.isPointInsidePath=function(t,e,r){var i=n.pathBBox(t);return n.isPointInsideBBox(i,e,r)&&d(t,[["M",e,r],["H",i.x2+10]],1)%2==1},n._removedFactory=function(t){return function(){e("raphael.log",null,"Raphal: you are calling to method "+t+" of removed object",t)}};var Te=n.pathBBox=function(t){var e=ke(t);if(e.bbox)return r(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Fe(t);for(var n,i=0,a=0,o=[],s=[],l=0,c=t.length;c>l;l++)if(n=t[l],"M"==n[0])i=n[1],a=n[2],o.push(i),s.push(a);else{var u=De(i,a,n[1],n[2],n[3],n[4],n[5],n[6]);o=o[R](u.min.x,u.max.x),s=s[R](u.min.y,u.max.y),i=n[5],a=n[6]}var h=H[N](0,o),f=H[N](0,s),d=$[N](0,o),p=$[N](0,s),g=d-h,m=p-f,v={x:h,y:f,x2:d,y2:p,width:g,height:m,cx:h+g/2,cy:f+m/2};return e.bbox=r(v),v},Ie=function(t){var e=r(t);return e.toString=n._path2string,e},Ne=n._pathToRelative=function(t){var e=ke(t);if(e.rel)return Ie(e.rel);n.is(t,X)&&n.is(t&&t[0],X)||(t=n.parsePathString(t));var r=[],i=0,a=0,o=0,s=0,l=0;"M"==t[0][0]&&(i=t[0][1],a=t[0][2],o=i,s=a,l++,r.push(["M",i,a]));for(var c=l,u=t.length;u>c;c++){var h=r[c]=[],f=t[c];if(f[0]!=B.call(f[0]))switch(h[0]=B.call(f[0]),h[0]){case"a":h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=+(f[6]-i).toFixed(3),h[7]=+(f[7]-a).toFixed(3);break;case"v":h[1]=+(f[1]-a).toFixed(3);break;case"m":o=f[1],s=f[2];default:for(var d=1,p=f.length;p>d;d++)h[d]=+(f[d]-(d%2?i:a)).toFixed(3)}else{h=r[c]=[],"m"==f[0]&&(o=f[1]+i,s=f[2]+a);for(var g=0,m=f.length;m>g;g++)r[c][g]=f[g]}var v=r[c].length;switch(r[c][0]){case"z":i=o,a=s;break;case"h":i+=+r[c][v-1];break;case"v":a+=+r[c][v-1];break;default:i+=+r[c][v-2],a+=+r[c][v-1]}}return r.toString=n._path2string,e.rel=Ie(r),r},Re=n._pathToAbsolute=function(t){var e=ke(t);if(e.abs)return Ie(e.abs);if(n.is(t,X)&&n.is(t&&t[0],X)||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r=[],i=0,a=0,o=0,l=0,c=0;"M"==t[0][0]&&(i=+t[0][1],a=+t[0][2],o=i,l=a,c++,r[0]=["M",i,a]);for(var u,h,f=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),d=c,p=t.length;p>d;d++){if(r.push(u=[]),h=t[d],h[0]!=ee.call(h[0]))switch(u[0]=ee.call(h[0]),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+(h[6]+i),u[7]=+(h[7]+a);break;case"V":u[1]=+h[1]+a;break;case"H":u[1]=+h[1]+i;break;case"R":for(var g=[i,a][R](h.slice(1)),m=2,v=g.length;v>m;m++)g[m]=+g[m]+i,g[++m]=+g[m]+a;r.pop(),r=r[R](s(g,f));break;case"M":o=+h[1]+i,l=+h[2]+a;default:for(m=1,v=h.length;v>m;m++)u[m]=+h[m]+(m%2?i:a)}else if("R"==h[0])g=[i,a][R](h.slice(1)),r.pop(),r=r[R](s(g,f)),u=["R"][R](h.slice(-2));else for(var y=0,b=h.length;b>y;y++)u[y]=h[y];switch(u[0]){case"Z":i=o,a=l;break;case"H":i=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],l=u[u.length-1];default:i=u[u.length-2],a=u[u.length-1]}}return r.toString=n._path2string,e.abs=Ie(r),r},Ae=function(t,e,n,r){return[t,e,n,r,n,r]},Me=function(t,e,n,r,i,a){var o=1/3,s=2/3;return[o*t+s*n,o*e+s*r,o*i+s*n,o*a+s*r,i,a]},Le=function(t,e,n,r,i,o,s,l,c,u){var h,f=120*z/180,d=z/180*(+i||0),p=[],g=a(function(t,e,n){var r=t*j.cos(n)-e*j.sin(n),i=t*j.sin(n)+e*j.cos(n);return{x:r,y:i}});if(u)S=u[0],E=u[1],_=u[2],C=u[3];else{h=g(t,e,-d),t=h.x,e=h.y,h=g(l,c,-d),l=h.x,c=h.y;var m=(j.cos(z/180*i),j.sin(z/180*i),(t-l)/2),v=(e-c)/2,y=m*m/(n*n)+v*v/(r*r);y>1&&(y=j.sqrt(y),n=y*n,r=y*r);var b=n*n,x=r*r,w=(o==s?-1:1)*j.sqrt(U((b*x-b*v*v-x*m*m)/(b*v*v+x*m*m))),_=w*n*v/r+(t+l)/2,C=w*-r*m/n+(e+c)/2,S=j.asin(((e-C)/r).toFixed(9)),E=j.asin(((c-C)/r).toFixed(9));S=_>t?z-S:S,E=_>l?z-E:E,0>S&&(S=2*z+S),0>E&&(E=2*z+E),s&&S>E&&(S-=2*z),!s&&E>S&&(E-=2*z)}var k=E-S;if(U(k)>f){var T=E,I=l,N=c;E=S+f*(s&&E>S?1:-1),l=_+n*j.cos(E),c=C+r*j.sin(E),p=Le(l,c,n,r,i,0,s,I,N,[E,T,_,C])}k=E-S;var A=j.cos(S),M=j.sin(S),L=j.cos(E),O=j.sin(E),F=j.tan(k/4),P=4/3*n*F,B=4/3*r*F,$=[t,e],H=[t+P*M,e-B*A],q=[l+P*O,c-B*L],G=[l,c];if(H[0]=2*$[0]-H[0],H[1]=2*$[1]-H[1],u)return[H,q,G][R](p);p=[H,q,G][R](p).join()[D](",");for(var W=[],X=0,V=p.length;V>X;X++)W[X]=X%2?g(p[X-1],p[X],d).y:g(p[X],p[X+1],d).x;return W},Oe=function(t,e,n,r,i,a,o,s,l){var c=1-l;return{x:q(c,3)*t+3*q(c,2)*l*n+3*c*l*l*i+q(l,3)*o,y:q(c,3)*e+3*q(c,2)*l*r+3*c*l*l*a+q(l,3)*s}},De=a(function(t,e,n,r,i,a,o,s){var l,c=i-2*n+t-(o-2*i+n),u=2*(n-t)-2*(i-n),h=t-n,f=(-u+j.sqrt(u*u-4*c*h))/2/c,d=(-u-j.sqrt(u*u-4*c*h))/2/c,p=[e,s],g=[t,o];return U(f)>"1e12"&&(f=.5),U(d)>"1e12"&&(d=.5),f>0&&1>f&&(l=Oe(t,e,n,r,i,a,o,s,f),g.push(l.x),p.push(l.y)),d>0&&1>d&&(l=Oe(t,e,n,r,i,a,o,s,d),g.push(l.x),p.push(l.y)),c=a-2*r+e-(s-2*a+r),u=2*(r-e)-2*(a-r),h=e-r,f=(-u+j.sqrt(u*u-4*c*h))/2/c,d=(-u-j.sqrt(u*u-4*c*h))/2/c,U(f)>"1e12"&&(f=.5),U(d)>"1e12"&&(d=.5),f>0&&1>f&&(l=Oe(t,e,n,r,i,a,o,s,f),g.push(l.x),p.push(l.y)),d>0&&1>d&&(l=Oe(t,e,n,r,i,a,o,s,d),g.push(l.x),p.push(l.y)),{min:{x:H[N](0,g),y:H[N](0,p)},max:{x:$[N](0,g),y:$[N](0,p)}}}),Fe=n._path2curve=a(function(t,e){var n=!e&&ke(t);if(!e&&n.curve)return Ie(n.curve);for(var r=Re(t),i=e&&Re(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][R](Le[N](0,[e.x,e.y][R](t.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i][R](t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][R](Me(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][R](Me(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][R](Ae(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][R](Ae(e.x,e.y,t[1],e.y));break;case"V":t=["C"][R](Ae(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][R](Ae(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][R](n.splice(0,6)));t.splice(e,1),h=$(r.length,i&&i.length||0)}},c=function(t,e,n,a,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",a.x,a.y]),n.bx=0,n.by=0,n.x=t[o][1],n.y=t[o][2],h=$(r.length,i&&i.length||0))},u=0,h=$(r.length,i&&i.length||0);h>u;u++){r[u]=s(r[u],a),l(r,u),i&&(i[u]=s(i[u],o)),i&&l(i,u),c(r,i,a,o,u),c(i,r,o,a,u);var f=r[u],d=i&&i[u],p=f.length,g=i&&d.length;a.x=f[p-2],a.y=f[p-1],a.bx=Z(f[p-4])||a.x,a.by=Z(f[p-3])||a.y,o.bx=i&&(Z(d[g-4])||o.x),o.by=i&&(Z(d[g-3])||o.y),o.x=i&&d[g-2],o.y=i&&d[g-1]}return i||(n.curve=Ie(r)),i?[r,i]:r},null,Ie),Pe=(n._parseDots=a(function(t){for(var e=[],r=0,i=t.length;i>r;r++){var a={},o=t[r].match(/^([^:]*):?([\d\.]*)/);if(a.color=n.getRGB(o[1]),a.color.error)return null;a.color=a.color.hex,o[2]&&(a.offset=o[2]+"%"),e.push(a)}for(r=1,i=e.length-1;i>r;r++)if(!e[r].offset){for(var s=Z(e[r-1].offset||0),l=0,c=r+1;i>c;c++)if(e[c].offset){l=e[c].offset;break}l||(l=100,c=i),l=Z(l);for(var u=(l-s)/(c-r+1);c>r;r++)s+=u,e[r].offset=s+"%"}return e}),n._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Be=(n._tofront=function(t,e){e.top!==t&&(Pe(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)
},n._toback=function(t,e){e.bottom!==t&&(Pe(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},n._insertafter=function(t,e,n){Pe(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},n._insertbefore=function(t,e,n){Pe(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},n.toMatrix=function(t,e){var n=Te(t),r={_:{transform:M},getBBox:function(){return n}};return je(r,e),r.matrix}),je=(n.transformPath=function(t,e){return ve(t,Be(t,e))},n._extractTransform=function(t,e){if(null==e)return t._.transform;e=O(e).replace(/\.{3}|\u2026/g,t._.transform||M);var r=n.parseTransformString(e),i=0,a=0,o=0,s=1,l=1,c=t._,u=new p;if(c.transform=r||[],r)for(var h=0,f=r.length;f>h;h++){var d,g,m,v,y,b=r[h],x=b.length,w=O(b[0]).toLowerCase(),_=b[0]!=w,C=_?u.invert():0;"t"==w&&3==x?_?(d=C.x(0,0),g=C.y(0,0),m=C.x(b[1],b[2]),v=C.y(b[1],b[2]),u.translate(m-d,v-g)):u.translate(b[1],b[2]):"r"==w?2==x?(y=y||t.getBBox(1),u.rotate(b[1],y.x+y.width/2,y.y+y.height/2),i+=b[1]):4==x&&(_?(m=C.x(b[2],b[3]),v=C.y(b[2],b[3]),u.rotate(b[1],m,v)):u.rotate(b[1],b[2],b[3]),i+=b[1]):"s"==w?2==x||3==x?(y=y||t.getBBox(1),u.scale(b[1],b[x-1],y.x+y.width/2,y.y+y.height/2),s*=b[1],l*=b[x-1]):5==x&&(_?(m=C.x(b[3],b[4]),v=C.y(b[3],b[4]),u.scale(b[1],b[2],m,v)):u.scale(b[1],b[2],b[3],b[4]),s*=b[1],l*=b[2]):"m"==w&&7==x&&u.add(b[1],b[2],b[3],b[4],b[5],b[6]),c.dirtyT=1,t.matrix=u}t.matrix=u,c.sx=s,c.sy=l,c.deg=i,c.dx=a=u.e,c.dy=o=u.f,1==s&&1==l&&!i&&c.bbox?(c.bbox.x+=+a,c.bbox.y+=+o):c.dirtyT=1}),$e=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},He=n._equaliseTransform=function(t,e){e=O(e).replace(/\.{3}|\u2026/g,t),t=n.parseTransformString(t)||[],e=n.parseTransformString(e)||[];for(var r,i,a,o,s=$(t.length,e.length),l=[],c=[],u=0;s>u;u++){if(a=t[u]||$e(e[u]),o=e[u]||$e(a),a[0]!=o[0]||"r"==a[0].toLowerCase()&&(a[2]!=o[2]||a[3]!=o[3])||"s"==a[0].toLowerCase()&&(a[3]!=o[3]||a[4]!=o[4]))return;for(l[u]=[],c[u]=[],r=0,i=$(a.length,o.length);i>r;r++)r in a&&(l[u][r]=a[r]),r in o&&(c[u][r]=o[r])}return{from:l,to:c}};n._getContainer=function(t,e,r,i){var a;return a=null!=i||n.is(t,"object")?t:k.doc.getElementById(t),null!=a?a.tagName?null==e?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:e,height:r}:{container:1,x:t,y:e,width:r,height:i}:void 0},n.pathToRelative=Ne,n._engine={},n.path2curve=Fe,n.matrix=function(t,e,n,r,i,a){return new p(t,e,n,r,i,a)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function r(t){var n=j.sqrt(e(t));t[0]&&(t[0]/=n),t[1]&&(t[1]/=n)}t.add=function(t,e,n,r,i,a){var o,s,l,c,u=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,n,i],[e,r,a],[0,0,1]];for(t&&t instanceof p&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;3>o;o++)for(s=0;3>s;s++){for(c=0,l=0;3>l;l++)c+=h[o][l]*f[l][s];u[o][s]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,r){null==e&&(e=t),(n||r)&&this.add(1,0,0,1,n,r),this.add(t,0,0,e,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},t.rotate=function(t,e,r){t=n.rad(t),e=e||0,r=r||0;var i=+j.cos(t).toFixed(9),a=+j.sin(t).toFixed(9);this.add(i,a,-a,i,e,r),this.add(1,0,0,1,-e,-r)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[O.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return n.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=j.sqrt(e(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=j.sqrt(e(i[1])),r(i[1]),t.shear/=t.scaley;var a=-i[0][1],o=i[1][1];return 0>o?(t.rotate=n.deg(j.acos(o)),0>a&&(t.rotate=360-t.rotate)):t.rotate=n.deg(j.asin(a)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[D]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:M)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:M)+(e.rotate?"r"+[e.rotate,0,0]:M)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);var Ue=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);w.safari="Apple Computer, Inc."==navigator.vendor&&(Ue&&Ue[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ue&&Ue[1]<8?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:fe;for(var qe=function(){this.returnValue=!1},ze=function(){return this.originalEvent.preventDefault()},Ge=function(){this.cancelBubble=!0},We=function(){return this.originalEvent.stopPropagation()},Xe=function(t){var e=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,n=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;return{x:t.clientX+n,y:t.clientY+e}},Ve=function(){return k.doc.addEventListener?function(t,e,n,r){var i=function(t){var e=Xe(t);return n.call(r,t,e.x,e.y)};if(t.addEventListener(e,i,!1),A&&P[e]){var a=function(e){for(var i=Xe(e),a=e,o=0,s=e.targetTouches&&e.targetTouches.length;s>o;o++)if(e.targetTouches[o].target==t){e=e.targetTouches[o],e.originalEvent=a,e.preventDefault=ze,e.stopPropagation=We;break}return n.call(r,e,i.x,i.y)};t.addEventListener(P[e],a,!1)}return function(){return t.removeEventListener(e,i,!1),A&&P[e]&&t.removeEventListener(P[e],i,!1),!0}}:k.doc.attachEvent?function(t,e,n,r){var i=function(t){t=t||k.win.event;var e=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,i=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,a=t.clientX+i,o=t.clientY+e;return t.preventDefault=t.preventDefault||qe,t.stopPropagation=t.stopPropagation||Ge,n.call(r,t,a,o)};t.attachEvent("on"+e,i);var a=function(){return t.detachEvent("on"+e,i),!0};return a}:void 0}(),Ye=[],Je=function(t){for(var n,r=t.clientX,i=t.clientY,a=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,o=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,s=Ye.length;s--;){if(n=Ye[s],A&&t.touches){for(var l,c=t.touches.length;c--;)if(l=t.touches[c],l.identifier==n.el._drag.id){r=l.clientX,i=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,h=n.el.node,f=h.nextSibling,d=h.parentNode,p=h.style.display;k.win.opera&&d.removeChild(h),h.style.display="none",u=n.el.paper.getElementByPoint(r,i),h.style.display=p,k.win.opera&&(f?d.insertBefore(h,f):d.appendChild(h)),u&&e("raphael.drag.over."+n.el.id,n.el,u),r+=o,i+=a,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,t)}},Qe=function(t){n.unmousemove(Je).unmouseup(Qe);for(var r,i=Ye.length;i--;)r=Ye[i],r.el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,t);Ye=[]},Ke=n.el={},Ze=F.length;Ze--;)!function(t){n[t]=Ke[t]=function(e,r){return n.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Ve(this.shape||this.node||k.doc,t,e,r||this)})),this},n["un"+t]=Ke["un"+t]=function(e){for(var r=this.events||[],i=r.length;i--;)r[i].name!=t||!n.is(e,"undefined")&&r[i].f!=e||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(F[Ze]);Ke.data=function(t,r){var i=ue[this.id]=ue[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(n.is(t,"object")){for(var a in t)t[E](a)&&this.data(a,t[a]);return this}return e("raphael.data.get."+this.id,this,i[t],t),i[t]}return i[t]=r,e("raphael.data.set."+this.id,this,r,t),this},Ke.removeData=function(t){return null==t?ue[this.id]={}:ue[this.id]&&delete ue[this.id][t],this},Ke.getData=function(){return r(ue[this.id]||{})},Ke.hover=function(t,e,n,r){return this.mouseover(t,n).mouseout(e,r||n)},Ke.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var tn=[];Ke.drag=function(t,r,i,a,o,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,h=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,f=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;if(this._drag.id=l.identifier,A&&l.touches)for(var d,p=l.touches.length;p--;)if(d=l.touches[p],this._drag.id=d.identifier,d.identifier==this._drag.id){c=d.clientX,u=d.clientY;break}this._drag.x=c+f,this._drag.y=u+h,!Ye.length&&n.mousemove(Je).mouseup(Qe),Ye.push({el:this,move_scope:a,start_scope:o,end_scope:s}),r&&e.on("raphael.drag.start."+this.id,r),t&&e.on("raphael.drag.move."+this.id,t),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,o||a||this,l.clientX+f,l.clientY+h,l)}return this._drag={},tn.push({el:this,start:l}),this.mousedown(l),this},Ke.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Ke.undrag=function(){for(var t=tn.length;t--;)tn[t].el==this&&(this.unmousedown(tn[t].start),tn.splice(t,1),e.unbind("raphael.drag.*."+this.id));!tn.length&&n.unmousemove(Je).unmouseup(Qe),Ye=[]},w.circle=function(t,e,r){var i=n._engine.circle(this,t||0,e||0,r||0);return this.__set__&&this.__set__.push(i),i},w.rect=function(t,e,r,i,a){var o=n._engine.rect(this,t||0,e||0,r||0,i||0,a||0);return this.__set__&&this.__set__.push(o),o},w.ellipse=function(t,e,r,i){var a=n._engine.ellipse(this,t||0,e||0,r||0,i||0);return this.__set__&&this.__set__.push(a),a},w.path=function(t){t&&!n.is(t,W)&&!n.is(t[0],X)&&(t+=M);var e=n._engine.path(n.format[N](n,arguments),this);return this.__set__&&this.__set__.push(e),e},w.image=function(t,e,r,i,a){var o=n._engine.image(this,t||"about:blank",e||0,r||0,i||0,a||0);return this.__set__&&this.__set__.push(o),o},w.text=function(t,e,r){var i=n._engine.text(this,t||0,e||0,O(r));return this.__set__&&this.__set__.push(i),i},w.set=function(t){!n.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new dn(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},w.setStart=function(t){this.__set__=t||this.set()},w.setFinish=function(){var t=this.__set__;return delete this.__set__,t},w.setSize=function(t,e){return n._engine.setSize.call(this,t,e)},w.setViewBox=function(t,e,r,i,a){return n._engine.setViewBox.call(this,t,e,r,i,a)},w.top=w.bottom=null,w.raphael=n;var en=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,r=n.body,i=n.documentElement,a=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,s=e.top+(k.win.pageYOffset||i.scrollTop||r.scrollTop)-a,l=e.left+(k.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:s,x:l}};w.getElementByPoint=function(t,e){var n=this,r=n.canvas,i=k.doc.elementFromPoint(t,e);if(k.win.opera&&"svg"==i.tagName){var a=en(r),o=r.createSVGRect();o.x=t-a.x,o.y=e-a.y,o.width=o.height=1;var s=r.getIntersectionList(o,null);s.length&&(i=s[s.length-1])}if(!i)return null;for(;i.parentNode&&i!=r.parentNode&&!i.raphael;)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null},w.getElementsByBBox=function(t){var e=this.set();return this.forEach(function(r){n.isBBoxIntersect(r.getBBox(),t)&&e.push(r)}),e},w.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},w.forEach=function(t,e){for(var n=this.bottom;n;){if(t.call(e,n)===!1)return this;n=n.next}return this},w.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(r){r.isPointInside(t,e)&&n.push(r)}),n},Ke.isPointInside=function(t,e){var r=this.realPath=me[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=n.transformPath(r,this.attr("transform"))),n.isPointInsidePath(r,t,e)},Ke.getBBox=function(t){if(this.removed)return{};var e=this._;return t?((e.dirty||!e.bboxwt)&&(this.realPath=me[this.type](this),e.bboxwt=Te(this.realPath),e.bboxwt.toString=g,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&((e.dirty||!this.realPath)&&(e.bboxwt=0,this.realPath=me[this.type](this)),e.bbox=Te(ve(this.realPath,this.matrix)),e.bbox.toString=g,e.dirty=e.dirtyT=0),e.bbox)},Ke.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Ke.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,r=this.paper,i=r.set(),a=this.realPath||me[this.type](this);a=this.matrix?ve(a,this.matrix):a;for(var o=1;n+1>o;o++)i.push(r.path(a).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*o).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(e.offsetx,e.offsety)};var nn=function(t,e,r,i,a,o,s,l,h){return null==h?c(t,e,r,i,a,o,s,l):n.findDotsAtSegment(t,e,r,i,a,o,s,l,u(t,e,r,i,a,o,s,l,h))},rn=function(t,e){return function(r,i,a){r=Fe(r);for(var o,s,l,c,u,h="",f={},d=0,p=0,g=r.length;g>p;p++){if(l=r[p],"M"==l[0])o=+l[1],s=+l[2];else{if(c=nn(o,s,l[1],l[2],l[3],l[4],l[5],l[6]),d+c>i){if(e&&!f.start){if(u=nn(o,s,l[1],l[2],l[3],l[4],l[5],l[6],i-d),h+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],a)return h;f.start=h,h=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),d+=c,o=+l[5],s=+l[6];continue}if(!t&&!e)return u=nn(o,s,l[1],l[2],l[3],l[4],l[5],l[6],i-d),{x:u.x,y:u.y,alpha:u.alpha}}d+=c,o=+l[5],s=+l[6]}h+=l.shift()+l}return f.end=h,u=t?d:e?f:n.findDotsAtSegment(o,s,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},an=rn(1),on=rn(),sn=rn(0,1);n.getTotalLength=an,n.getPointAtLength=on,n.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return sn(t,e).end;var r=sn(t,n,1);return e?sn(r,e).end:r},Ke.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():an(t)},Ke.getPointAtLength=function(t){var e=this.getPath();if(e)return on(e,t)},Ke.getPath=function(){var t,e=n._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Ke.getSubpath=function(t,e){var r=this.getPath();if(r)return n.getSubpath(r,t,e)};var ln=n.easing_formulas={linear:function(t){return t},"<":function(t){return q(t,1.7)},">":function(t){return q(t,.48)},"<>":function(t){var e=.48-t/1.04,n=j.sqrt(.1734+e*e),r=n-e,i=q(U(r),1/3)*(0>r?-1:1),a=-n-e,o=q(U(a),1/3)*(0>a?-1:1),s=i+o+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:q(2,-10*t)*j.sin(2*(t-.075)*z/.3)+1},bounce:function(t){var e,n=7.5625,r=2.75;return 1/r>t?e=n*t*t:2/r>t?(t-=1.5/r,e=n*t*t+.75):2.5/r>t?(t-=2.25/r,e=n*t*t+.9375):(t-=2.625/r,e=n*t*t+.984375),e}};ln.easeIn=ln["ease-in"]=ln["<"],ln.easeOut=ln["ease-out"]=ln[">"],ln.easeInOut=ln["ease-in-out"]=ln["<>"],ln["back-in"]=ln.backIn,ln["back-out"]=ln.backOut;var cn=[],un=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},hn=function(){for(var t=+new Date,r=0;r<cn.length;r++){var i=cn[r];if(!i.el.removed&&!i.paused){var a,o,s=t-i.start,l=i.ms,c=i.easing,u=i.from,h=i.diff,f=i.to,d=(i.t,i.el),p={},g={};if(i.initstatus?(s=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*l,i.status=i.initstatus,delete i.initstatus,i.stop&&cn.splice(r--,1)):i.status=(i.prev+(i.percent-i.prev)*(s/l))/i.anim.top,!(0>s))if(l>s){var m=c(s/l);for(var v in u)if(u[E](v)){switch(re[v]){case G:a=+u[v]+m*l*h[v];break;case"colour":a="rgb("+[fn(K(u[v].r+m*l*h[v].r)),fn(K(u[v].g+m*l*h[v].g)),fn(K(u[v].b+m*l*h[v].b))].join(",")+")";break;case"path":a=[];for(var b=0,x=u[v].length;x>b;b++){a[b]=[u[v][b][0]];for(var w=1,_=u[v][b].length;_>w;w++)a[b][w]=+u[v][b][w]+m*l*h[v][b][w];a[b]=a[b].join(L)}a=a.join(L);break;case"transform":if(h[v].real)for(a=[],b=0,x=u[v].length;x>b;b++)for(a[b]=[u[v][b][0]],w=1,_=u[v][b].length;_>w;w++)a[b][w]=u[v][b][w]+m*l*h[v][b][w];else{var C=function(t){return+u[v][t]+m*l*h[v][t]};a=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==v)for(a=[],b=4;b--;)a[b]=+u[v][b]+m*l*h[v][b];break;default:var S=[][R](u[v]);for(a=[],b=d.paper.customAttributes[v].length;b--;)a[b]=+S[b]+m*l*h[v][b]}p[v]=a}d.attr(p),function(t,n,r){setTimeout(function(){e("raphael.anim.frame."+t,n,r)})}(d.id,d,i.anim)}else{if(function(t,r,i){setTimeout(function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),n.is(t,"function")&&t.call(r)})}(i.callback,d,i.anim),d.attr(f),cn.splice(r--,1),i.repeat>1&&!i.next){for(o in f)f[E](o)&&(g[o]=i.totalOrigin[o]);i.el.attr(g),y(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&y(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}n.svg&&d&&d.paper&&d.paper.safari(),cn.length&&un(hn)},fn=function(t){return t>255?255:0>t?0:t};Ke.animateWith=function(t,e,r,i,a,o){var s=this;if(s.removed)return o&&o.call(s),s;var l=r instanceof v?r:n.animation(r,i,a,o);y(l,s,l.percents[0],null,s.attr());for(var c=0,u=cn.length;u>c;c++)if(cn[c].anim==e&&cn[c].el==t){cn[u-1].start=cn[c].start;break}return s},Ke.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},v.prototype.delay=function(t){var e=new v(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},v.prototype.repeat=function(t){var e=new v(this.anim,this.ms);return e.del=this.del,e.times=j.floor($(t,0))||1,e},n.animation=function(t,e,r,i){if(t instanceof v)return t;(n.is(r,"function")||!r)&&(i=i||r||null,r=null),t=Object(t),e=+e||0;var a,o,s={};for(o in t)t[E](o)&&Z(o)!=o&&Z(o)+"%"!=o&&(a=!0,s[o]=t[o]);return a?(r&&(s.easing=r),i&&(s.callback=i),new v({100:s},e)):new v(t,e)},Ke.animate=function(t,e,r,i){var a=this;if(a.removed)return i&&i.call(a),a;var o=t instanceof v?t:n.animation(t,e,r,i);return y(o,a,o.percents[0],null,a.attr()),a},Ke.setTime=function(t,e){return t&&null!=e&&this.status(t,H(e,t.ms)/t.ms),this},Ke.status=function(t,e){var n,r,i=[],a=0;if(null!=e)return y(t,this,-1,H(e,1)),this;for(n=cn.length;n>a;a++)if(r=cn[a],r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;i.push({anim:r.anim,status:r.status})}return t?0:i},Ke.pause=function(t){for(var n=0;n<cn.length;n++)cn[n].el.id!=this.id||t&&cn[n].anim!=t||e("raphael.anim.pause."+this.id,this,cn[n].anim)!==!1&&(cn[n].paused=!0);return this},Ke.resume=function(t){for(var n=0;n<cn.length;n++)if(cn[n].el.id==this.id&&(!t||cn[n].anim==t)){var r=cn[n];e("raphael.anim.resume."+this.id,this,r.anim)!==!1&&(delete r.paused,this.status(r.anim,r.status))}return this},Ke.stop=function(t){for(var n=0;n<cn.length;n++)cn[n].el.id!=this.id||t&&cn[n].anim!=t||e("raphael.anim.stop."+this.id,this,cn[n].anim)!==!1&&cn.splice(n--,1);return this},e.on("raphael.remove",b),e.on("raphael.clear",b),Ke.toString=function(){return"Raphals object"};var dn=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;n>e;e++)!t[e]||t[e].constructor!=Ke.constructor&&t[e].constructor!=dn||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},pn=dn.prototype;pn.push=function(){for(var t,e,n=0,r=arguments.length;r>n;n++)t=arguments[n],!t||t.constructor!=Ke.constructor&&t.constructor!=dn||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},pn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},pn.forEach=function(t,e){for(var n=0,r=this.items.length;r>n;n++)if(t.call(e,this.items[n],n)===!1)return this;return this};for(var gn in Ke)Ke[E](gn)&&(pn[gn]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][N](n,e)})}}(gn));return pn.attr=function(t,e){if(t&&n.is(t,X)&&n.is(t[0],"object"))for(var r=0,i=t.length;i>r;r++)this.items[r].attr(t[r]);else for(var a=0,o=this.items.length;o>a;a++)this.items[a].attr(t,e);return this},pn.clear=function(){for(;this.length;)this.pop()},pn.splice=function(t,e){t=0>t?$(this.length+t,0):t,e=$(0,H(this.length-t,e));var n,r=[],i=[],a=[];for(n=2;n<arguments.length;n++)a.push(arguments[n]);for(n=0;e>n;n++)i.push(this[t+n]);for(;n<this.length-t;n++)r.push(this[t+n]);var o=a.length;for(n=0;n<o+r.length;n++)this.items[t+n]=this[t+n]=o>n?a[n]:r[n-o];for(n=this.items.length=this.length-=e-o;this[n];)delete this[n++];return new dn(i)},pn.exclude=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return this.splice(e,1),!0},pn.animate=function(t,e,r,i){(n.is(r,"function")||!r)&&(i=r||null);var a,o,s=this.items.length,l=s,c=this;if(!s)return this;i&&(o=function(){!--s&&i.call(c)}),r=n.is(r,W)?r:o;var u=n.animation(t,e,r,o);for(a=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(a,u,u),this.items[l]&&!this.items[l].removed||s--;return this},pn.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},pn.getBBox=function(){for(var t=[],e=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var a=this.items[i].getBBox();t.push(a.x),e.push(a.y),n.push(a.x+a.width),r.push(a.y+a.height)}return t=H[N](0,t),e=H[N](0,e),n=$[N](0,n),r=$[N](0,r),{x:t,y:e,x2:n,y2:r,width:n-t,height:r-e}},pn.clone=function(t){t=this.paper.set();for(var e=0,n=this.items.length;n>e;e++)t.push(this.items[e].clone());return t},pn.toString=function(){return"Raphals set"},pn.glow=function(t){var e=this.paper.set();return this.forEach(function(n){var r=n.glow(t);null!=r&&r.forEach(function(t){e.push(t)})}),e},pn.isPointInside=function(t,e){var n=!1;return this.forEach(function(r){return r.isPointInside(t,e)?(console.log("runned"),n=!0,!1):void 0}),n},n.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var r in t.face)t.face[E](r)&&(e.face[r]=t.face[r]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=te(t.face["units-per-em"],10);for(var i in t.glyphs)if(t.glyphs[E](i)){var a=t.glyphs[i];if(e.glyphs[i]={w:a.w,k:{},d:a.d&&"M"+a.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},a.k)for(var o in a.k)a[E](o)&&(e.glyphs[i].k[o]=a.k[o])}}return t},w.getFont=function(t,e,r,i){if(i=i||"normal",r=r||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,n.fonts){var a=n.fonts[t];if(!a){var o=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,M)+"(\\s|$)","i");for(var s in n.fonts)if(n.fonts[E](s)&&o.test(s)){a=n.fonts[s];break}}var l;if(a)for(var c=0,u=a.length;u>c&&(l=a[c],l.face["font-weight"]!=e||l.face["font-style"]!=r&&l.face["font-style"]||l.face["font-stretch"]!=i);c++);return l}},w.print=function(t,e,r,i,a,o,s,l){o=o||"middle",s=$(H(s||0,1),-1),l=$(H(l||1,3),1);var c,u=O(r)[D](M),h=0,f=0,d=M;if(n.is(i,"string")&&(i=this.getFont(i)),i){c=(a||16)/i.face["units-per-em"];for(var p=i.face.bbox[D](_),g=+p[0],m=p[3]-p[1],v=0,y=+p[1]+("baseline"==o?m+ +i.face.descent:m/2),b=0,x=u.length;x>b;b++){if("\n"==u[b])h=0,C=0,f=0,v+=m*l;else{var w=f&&i.glyphs[u[b-1]]||{},C=i.glyphs[u[b]];h+=f?(w.w||i.w)+(w.k&&w.k[u[b]]||0)+i.w*s:0,f=1}C&&C.d&&(d+=n.transformPath(C.d,["t",h*c,v*c,"s",c,c,g,y,"t",(t-g)/c,(e-y)/c]))}}return this.path(d).attr({fill:"#000",stroke:"none"})},w.add=function(t){if(n.is(t,"array"))for(var e,r=this.set(),i=0,a=t.length;a>i;i++)e=t[i]||{},C[E](e.type)&&r.push(this[e.type]().attr(e));return r},n.format=function(t,e){var r=n.is(e,X)?[0][R](e):arguments;return t&&n.is(t,W)&&r.length-1&&(t=t.replace(S,function(t,e){return null==r[++e]?M:r[e]})),t||M},n.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,r){var i=r;return n.replace(e,function(t,e,n,r,a){e=e||r,i&&(e in i&&(i=i[e]),"function"==typeof i&&a&&(i=i()))}),i=(null==i||i==r?t:i)+""};return function(e,r){return String(e).replace(t,function(t,e){return n(t,e,r)})}}(),n.ninja=function(){return T.was?k.win.Raphael=T.is:delete Raphael,n},n.st=pn,function(t,e,r){function i(){/in/.test(t.readyState)?setTimeout(i,9):n.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,r=function(){t.removeEventListener(e,r,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),e.on("raphael.DOMload",function(){x=!0}),function(){if(n.svg){var t="hasOwnProperty",e=String,r=parseFloat,i=parseInt,a=Math,o=a.max,s=a.abs,l=a.pow,c=/[, ]+/,u=n.eve,h="",f=" ",d="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};n.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var m=function(r,i){if(i){"string"==typeof r&&(r=m(r));for(var a in i)i[t](a)&&("xlink:"==a.substring(0,6)?r.setAttributeNS(d,a.substring(6),e(i[a])):r.setAttribute(a,e(i[a])))}else r=n._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},v=function(t,i){var c="linear",u=t.id+i,f=.5,d=.5,p=t.node,g=t.paper,v=p.style,y=n._g.doc.getElementById(u);if(!y){if(i=e(i).replace(n._radial_gradient,function(t,e,n){if(c="radial",e&&n){f=r(e),d=r(n);var i=2*(d>.5)-1;l(f-.5,2)+l(d-.5,2)>.25&&(d=a.sqrt(.25-l(f-.5,2))*i+.5)&&.5!=d&&(d=d.toFixed(5)-1e-5*i)}return h}),i=i.split(/\s*\-\s*/),"linear"==c){var b=i.shift();if(b=-r(b),isNaN(b))return null;var x=[0,0,a.cos(n.rad(b)),a.sin(n.rad(b))],w=1/(o(s(x[2]),s(x[3]))||1);x[2]*=w,x[3]*=w,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var _=n._parseDots(i);if(!_)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&u!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){y=m(c+"Gradient",{id:u}),t.gradient=y,m(y,"radial"==c?{fx:f,fy:d}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(y);for(var C=0,S=_.length;S>C;C++)y.appendChild(m("stop",{offset:_[C].offset?_[C].offset:C?"100%":"0%","stop-color":_[C].color||"#fff"}))}}return m(p,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(r,i,a){if("path"==r.type){for(var o,s,l,c,u,f=e(i).toLowerCase().split("-"),d=r.paper,v=a?"end":"start",y=r.node,b=r.attrs,x=b["stroke-width"],w=f.length,_="classic",C=3,S=3,E=5;w--;)switch(f[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=f[w];break;case"wide":S=5;break;case"narrow":S=2;break;case"long":C=5;break;case"short":C=2}if("open"==_?(C+=2,S+=2,E+=2,l=1,c=a?4:1,u={fill:"none",stroke:b.stroke}):(c=l=C/2,u={fill:b.stroke,stroke:"none"}),r._.arrows?a?(r._.arrows.endPath&&g[r._.arrows.endPath]--,r._.arrows.endMarker&&g[r._.arrows.endMarker]--):(r._.arrows.startPath&&g[r._.arrows.startPath]--,r._.arrows.startMarker&&g[r._.arrows.startMarker]--):r._.arrows={},"none"!=_){var k="raphael-marker-"+_,T="raphael-marker-"+v+_+C+S;n._g.doc.getElementById(k)?g[k]++:(d.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[_],id:k})),g[k]=1);var I,N=n._g.doc.getElementById(T);N?(g[T]++,I=N.getElementsByTagName("use")[0]):(N=m(m("marker"),{id:T,markerHeight:S,markerWidth:C,orient:"auto",refX:c,refY:S/2}),I=m(m("use"),{"xlink:href":"#"+k,transform:(a?"rotate(180 "+C/2+" "+S/2+") ":h)+"scale("+C/E+","+S/E+")","stroke-width":(1/((C/E+S/E)/2)).toFixed(4)}),N.appendChild(I),d.defs.appendChild(N),g[T]=1),m(I,u);var R=l*("diamond"!=_&&"oval"!=_);a?(o=r._.arrows.startdx*x||0,s=n.getTotalLength(b.path)-R*x):(o=R*x,s=n.getTotalLength(b.path)-(r._.arrows.enddx*x||0)),u={},u["marker-"+v]="url(#"+T+")",(s||o)&&(u.d=n.getSubpath(b.path,o,s)),m(y,u),r._.arrows[v+"Path"]=k,r._.arrows[v+"Marker"]=T,r._.arrows[v+"dx"]=R,r._.arrows[v+"Type"]=_,r._.arrows[v+"String"]=i}else a?(o=r._.arrows.startdx*x||0,s=n.getTotalLength(b.path)-o):(o=0,s=n.getTotalLength(b.path)-(r._.arrows.enddx*x||0)),r._.arrows[v+"Path"]&&m(y,{d:n.getSubpath(b.path,o,s)}),delete r._.arrows[v+"Path"],delete r._.arrows[v+"Marker"],delete r._.arrows[v+"dx"],delete r._.arrows[v+"Type"],delete r._.arrows[v+"String"];for(u in g)if(g[t](u)&&!g[u]){var A=n._g.doc.getElementById(u);A&&A.parentNode.removeChild(A)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,n,r){if(n=x[e(n).toLowerCase()]){for(var i=t.attrs["stroke-width"]||"1",a={round:i,square:i,butt:0}[t.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],s=n.length;s--;)o[s]=n[s]*i+(s%2?1:-1)*a;m(t.node,{"stroke-dasharray":o.join(",")})}},_=function(r,a){var l=r.node,u=r.attrs,f=l.style.visibility;l.style.visibility="hidden";for(var p in a)if(a[t](p)){if(!n._availableAttrs[t](p))continue;var g=a[p];switch(u[p]=g,p){case"blur":r.blur(g);break;case"href":case"title":var x=m("title"),_=n._g.doc.createTextNode(g);x.appendChild(_),l.appendChild(x);break;case"target":var C=l.parentNode;if("a"!=C.tagName.toLowerCase()){var x=m("a");C.insertBefore(x,l),x.appendChild(l),C=x}"target"==p?C.setAttributeNS(d,"show","blank"==g?"new":g):C.setAttributeNS(d,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":r.transform(g);break;case"arrow-start":b(r,g);break;case"arrow-end":b(r,g,1);break;case"clip-rect":var E=e(g).split(c);if(4==E.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var k=m("clipPath"),T=m("rect");k.id=n.createUUID(),m(T,{x:E[0],y:E[1],width:E[2],height:E[3]}),k.appendChild(T),r.paper.defs.appendChild(k),m(l,{"clip-path":"url(#"+k.id+")"}),r.clip=T}if(!g){var I=l.getAttribute("clip-path");if(I){var N=n._g.doc.getElementById(I.replace(/(^url\(#|\)$)/g,h));N&&N.parentNode.removeChild(N),m(l,{"clip-path":h}),delete r.clip}}break;case"path":"path"==r.type&&(m(l,{d:g?u.path=n._pathToAbsolute(g):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),r._.dirty=1,!u.fx)break;p="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==p&&"rect"==r.type)break;case"cx":l.setAttribute(p,g),r.pattern&&y(r),r._.dirty=1;break;case"height":if(l.setAttribute(p,g),r._.dirty=1,!u.fy)break;p="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==p&&"rect"==r.type)break;case"cy":l.setAttribute(p,g),r.pattern&&y(r),r._.dirty=1;break;case"r":"rect"==r.type?m(l,{rx:g,ry:g}):l.setAttribute(p,g),r._.dirty=1;break;case"src":"image"==r.type&&l.setAttributeNS(d,"href",g);break;case"stroke-width":(1!=r._.sx||1!=r._.sy)&&(g/=o(s(r._.sx),s(r._.sy))||1),r.paper._vbSize&&(g*=r.paper._vbSize),l.setAttribute(p,g),u["stroke-dasharray"]&&w(r,u["stroke-dasharray"],a),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));
break;case"stroke-dasharray":w(r,g,a);break;case"fill":var R=e(g).match(n._ISURL);if(R){k=m("pattern");var A=m("image");k.id=n.createUUID(),m(k,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(A,{x:0,y:0,"xlink:href":R[1]}),k.appendChild(A),function(t){n._preload(R[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(A,{width:e,height:n}),r.paper.safari()})}(k),r.paper.defs.appendChild(k),m(l,{fill:"url(#"+k.id+")"}),r.pattern=k,r.pattern&&y(r);break}var M=n.getRGB(g);if(M.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=e(g).charAt())&&v(r,g)){if("opacity"in u||"fill-opacity"in u){var L=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(L){var O=L.getElementsByTagName("stop");m(O[O.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete a.gradient,delete u.gradient,!n.is(u.opacity,"undefined")&&n.is(a.opacity,"undefined")&&m(l,{opacity:u.opacity}),!n.is(u["fill-opacity"],"undefined")&&n.is(a["fill-opacity"],"undefined")&&m(l,{"fill-opacity":u["fill-opacity"]});M[t]("opacity")&&m(l,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=n.getRGB(g),l.setAttribute(p,M.hex),"stroke"==p&&M[t]("opacity")&&m(l,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),"stroke"==p&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=e(g).charAt())&&v(r,g);break;case"opacity":u.gradient&&!u[t]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(u.gradient){L=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)),L&&(O=L.getElementsByTagName("stop"),m(O[O.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=i(g,10)+"px");var D=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[D]=g,r._.dirty=1,l.setAttribute(p,g)}}S(r,a),l.style.visibility=f},C=1.2,S=function(r,a){if("text"==r.type&&(a[t]("text")||a[t]("font")||a[t]("font-size")||a[t]("x")||a[t]("y"))){var o=r.attrs,s=r.node,l=s.firstChild?i(n._g.doc.defaultView.getComputedStyle(s.firstChild,h).getPropertyValue("font-size"),10):10;if(a[t]("text")){for(o.text=a.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,u=e(a.text).split("\n"),f=[],d=0,p=u.length;p>d;d++)c=m("tspan"),d&&m(c,{dy:l*C,x:o.x}),c.appendChild(n._g.doc.createTextNode(u[d])),s.appendChild(c),f[d]=c}else for(f=s.getElementsByTagName("tspan"),d=0,p=f.length;p>d;d++)d?m(f[d],{dy:l*C,x:o.x}):m(f[0],{dy:0});m(s,{x:o.x,y:o.y}),r._.dirty=1;var g=r._getBBox(),v=o.y-(g.y+g.height/2);v&&n.is(v,"finite")&&m(f[0],{dy:v})}},E=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=n._oid++,t.raphaelid=this.id,this.matrix=n.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},k=n.el;E.prototype=k,k.constructor=E,n._engine.path=function(t,e){var n=m("path");e.canvas&&e.canvas.appendChild(n);var r=new E(n,e);return r.type="path",_(r,{fill:"none",stroke:"#000",path:t}),r},k.rotate=function(t,n,i){if(this.removed)return this;if(t=e(t).split(c),t.length-1&&(n=r(t[1]),i=r(t[2])),t=r(t[0]),null==i&&(n=i),null==n||null==i){var a=this.getBBox(1);n=a.x+a.width/2,i=a.y+a.height/2}return this.transform(this._.transform.concat([["r",t,n,i]])),this},k.scale=function(t,n,i,a){if(this.removed)return this;if(t=e(t).split(c),t.length-1&&(n=r(t[1]),i=r(t[2]),a=r(t[3])),t=r(t[0]),null==n&&(n=t),null==a&&(i=a),null==i||null==a)var o=this.getBBox(1);return i=null==i?o.x+o.width/2:i,a=null==a?o.y+o.height/2:a,this.transform(this._.transform.concat([["s",t,n,i,a]])),this},k.translate=function(t,n){return this.removed?this:(t=e(t).split(c),t.length-1&&(n=r(t[1])),t=r(t[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",t,n]])),this)},k.transform=function(e){var r=this._;if(null==e)return r.transform;if(n._extractTransform(this,e),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},k.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},k.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},k.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),n._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var e in this)this[e]="function"==typeof this[e]?n._removedFactory(e):null;this.removed=!0}},k._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(n){}finally{e=e||{}}return t&&this.hide(),e},k.attr=function(e,r){if(this.removed)return this;if(null==e){var i={};for(var a in this.attrs)this.attrs[t](a)&&(i[a]=this.attrs[a]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&n.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var o=e.split(c),s={},l=0,h=o.length;h>l;l++)e=o[l],s[e]=e in this.attrs?this.attrs[e]:n.is(this.paper.customAttributes[e],"function")?this.paper.customAttributes[e].def:n._availableAttrs[e];return h-1?s:s[o[0]]}if(null==r&&n.is(e,"array")){for(s={},l=0,h=e.length;h>l;l++)s[e[l]]=this.attr(e[l]);return s}if(null!=r){var f={};f[e]=r}else null!=e&&n.is(e,"object")&&(f=e);for(var d in f)u("raphael.attr."+d+"."+this.id,this,f[d]);for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&f[t](d)&&n.is(this.paper.customAttributes[d],"function")){var p=this.paper.customAttributes[d].apply(this,[].concat(f[d]));this.attrs[d]=f[d];for(var g in p)p[t](g)&&(f[g]=p[g])}return _(this,f),this},k.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&n._tofront(this,t),this},k.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper);this.paper;return this},k.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this},k.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),n._insertbefore(this,t,this.paper),this},k.blur=function(t){var e=this;if(0!==+t){var r=m("filter"),i=m("feGaussianBlur");e.attrs.blur=t,r.id=n.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),e.paper.defs.appendChild(r),e._blur=r,m(e.node,{filter:"url(#"+r.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},n._engine.circle=function(t,e,n,r){var i=m("circle");t.canvas&&t.canvas.appendChild(i);var a=new E(i,t);return a.attrs={cx:e,cy:n,r:r,fill:"none",stroke:"#000"},a.type="circle",m(i,a.attrs),a},n._engine.rect=function(t,e,n,r,i,a){var o=m("rect");t.canvas&&t.canvas.appendChild(o);var s=new E(o,t);return s.attrs={x:e,y:n,width:r,height:i,r:a||0,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},s.type="rect",m(o,s.attrs),s},n._engine.ellipse=function(t,e,n,r,i){var a=m("ellipse");t.canvas&&t.canvas.appendChild(a);var o=new E(a,t);return o.attrs={cx:e,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",m(a,o.attrs),o},n._engine.image=function(t,e,n,r,i,a){var o=m("image");m(o,{x:n,y:r,width:i,height:a,preserveAspectRatio:"none"}),o.setAttributeNS(d,"href",e),t.canvas&&t.canvas.appendChild(o);var s=new E(o,t);return s.attrs={x:n,y:r,width:i,height:a,src:e},s.type="image",s},n._engine.text=function(t,e,r,i){var a=m("text");t.canvas&&t.canvas.appendChild(a);var o=new E(a,t);return o.attrs={x:e,y:r,"text-anchor":"middle",text:i,font:n._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",_(o,o.attrs),o},n._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},n._engine.create=function(){var t=n._getContainer.apply(0,arguments),e=t&&t.container,r=t.x,i=t.y,a=t.width,o=t.height;if(!e)throw new Error("SVG container not found.");var s,l=m("svg"),c="overflow:hidden;";return r=r||0,i=i||0,a=a||512,o=o||342,m(l,{height:o,version:1.1,width:a,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=c+"position:absolute;left:"+r+"px;top:"+i+"px",n._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),e=new n._Paper,e.width=a,e.height=o,e.canvas=l,e.clear(),e._left=e._top=0,s&&(e.renderfix=function(){}),e.renderfix(),e},n._engine.setViewBox=function(t,e,n,r,i){u("raphael.setViewBox",this,this._viewBox,[t,e,n,r,i]);var a,s,l=o(n/this.width,r/this.height),c=this.top,h=i?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,a="0 0 "+this.width+f+this.height):(this._vbSize=l,a=t+f+e+f+n+f+r),m(this.canvas,{viewBox:a,preserveAspectRatio:h});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,n,r,!!i],this},n.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(r){t=e.createSVGMatrix()}var i=-t.e%1,a=-t.f%1;(i||a)&&(i&&(this._left=(this._left+i)%1,n.left=this._left+"px"),a&&(this._top=(this._top+a)%1,n.top=this._top+"px"))},n.prototype.clear=function(){n.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(n._g.doc.createTextNode("Created with Raphal "+n.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},n.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null};var T=n.st;for(var I in k)k[t](I)&&!T[t](I)&&(T[I]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(I))}}(),function(){if(n.vml){var t="hasOwnProperty",e=String,r=parseFloat,i=Math,a=i.round,o=i.max,s=i.min,l=i.abs,c="fill",u=/[, ]+/,h=n.eve,f=" progid:DXImageTransform.Microsoft",d=" ",p="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,w={path:1,rect:1,image:1},_={circle:1,ellipse:1},C=function(t){var r=/[ahqstv]/gi,i=n._pathToAbsolute;if(e(t).match(r)&&(i=n._path2curve),r=/[clmz]/g,i==n._pathToAbsolute&&!e(t).match(r)){var o=e(t).replace(m,function(t,e,n){var r=[],i="m"==e.toLowerCase(),o=g[e];return n.replace(y,function(t){i&&2==r.length&&(o+=r+g["m"==e?"l":"L"],r=[]),r.push(a(t*x))}),o+r});return o}var s,l,c=i(t);o=[];for(var u=0,h=c.length;h>u;u++){s=c[u],l=c[u][0].toLowerCase(),"z"==l&&(l="x");for(var f=1,v=s.length;v>f;f++)l+=a(s[f]*x)+(f!=v-1?",":p);o.push(l)}return o.join(d)},S=function(t,e,r){var i=n.matrix();return i.rotate(-t,.5,.5),{dx:i.x(e,r),dy:i.y(e,r)}},E=function(t,e,n,r,i,a){var o=t._,s=t.matrix,u=o.fillpos,h=t.node,f=h.style,p=1,g="",m=x/e,v=x/n;if(f.visibility="hidden",e&&n){if(h.coordsize=l(m)+d+l(v),f.rotation=a*(0>e*n?-1:1),a){var y=S(a,r,i);r=y.dx,i=y.dy}if(0>e&&(g+="x"),0>n&&(g+=" y")&&(p=-1),f.flip=g,h.coordorigin=r*-m+d+i*-v,u||o.fillsize){var b=h.getElementsByTagName(c);b=b&&b[0],h.removeChild(b),u&&(y=S(a,s.x(u[0],u[1]),s.y(u[0],u[1])),b.position=y.dx*p+d+y.dy*p),o.fillsize&&(b.size=o.fillsize[0]*l(e)+d+o.fillsize[1]*l(n)),h.appendChild(b)}f.visibility="visible"}};n.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var k=function(t,n,r){for(var i=e(n).toLowerCase().split("-"),a=r?"end":"start",o=i.length,s="classic",l="medium",c="medium";o--;)switch(i[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=i[o];break;case"wide":case"narrow":c=i[o];break;case"long":case"short":l=i[o]}var u=t.node.getElementsByTagName("stroke")[0];u[a+"arrow"]=s,u[a+"arrowlength"]=l,u[a+"arrowwidth"]=c},T=function(i,l){i.attrs=i.attrs||{};var h=i.node,f=i.attrs,g=h.style,m=w[i.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),v=_[i.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),y=i;for(var b in l)l[t](b)&&(f[b]=l[b]);if(m&&(f.path=n._getPath[i.type](i),i._.dirty=1),l.href&&(h.href=l.href),l.title&&(h.title=l.title),l.target&&(h.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&i.blur(l.blur),(l.path&&"path"==i.type||m)&&(h.path=C(~e(f.path).toLowerCase().indexOf("r")?n._pathToAbsolute(f.path):f.path),"image"==i.type&&(i._.fillpos=[f.x,f.y],i._.fillsize=[f.width,f.height],E(i,1,1,0,0,0))),"transform"in l&&i.transform(l.transform),v){var S=+f.cx,T=+f.cy,N=+f.rx||+f.r||0,R=+f.ry||+f.r||0;h.path=n.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",a((S-N)*x),a((T-R)*x),a((S+N)*x),a((T+R)*x),a(S*x)),i._.dirty=1}if("clip-rect"in l){var M=e(l["clip-rect"]).split(u);if(4==M.length){M[2]=+M[2]+ +M[0],M[3]=+M[3]+ +M[1];var L=h.clipRect||n._g.doc.createElement("div"),O=L.style;O.clip=n.format("rect({1}px {2}px {3}px {0}px)",M),h.clipRect||(O.position="absolute",O.top=0,O.left=0,O.width=i.paper.width+"px",O.height=i.paper.height+"px",h.parentNode.insertBefore(L,h),L.appendChild(h),h.clipRect=L)}l["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(i.textpath){var D=i.textpath.style;l.font&&(D.font=l.font),l["font-family"]&&(D.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(D.fontSize=l["font-size"]),l["font-weight"]&&(D.fontWeight=l["font-weight"]),l["font-style"]&&(D.fontStyle=l["font-style"])}if("arrow-start"in l&&k(y,l["arrow-start"]),"arrow-end"in l&&k(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var F=h.getElementsByTagName(c),P=!1;if(F=F&&F[0],!F&&(P=F=A(c)),"image"==i.type&&l.src&&(F.src=l.src),l.fill&&(F.on=!0),(null==F.on||"none"==l.fill||null===l.fill)&&(F.on=!1),F.on&&l.fill){var B=e(l.fill).match(n._ISURL);if(B){F.parentNode==h&&h.removeChild(F),F.rotate=!0,F.src=B[1],F.type="tile";var j=i.getBBox(1);F.position=j.x+d+j.y,i._.fillpos=[j.x,j.y],n._preload(B[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else F.color=n.getRGB(l.fill).hex,F.src=p,F.type="solid",n.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&I(y,l.fill,F)&&(f.fill="none",f.gradient=l.fill,F.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var $=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+n.getRGB(l.fill).o+1||2)-1);$=s(o($,0),1),F.opacity=$,F.src&&(F.color="none")}h.appendChild(F);var H=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],U=!1;!H&&(U=H=A("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(H.on=!0),("none"==l.stroke||null===l.stroke||null==H.on||0==l.stroke||0==l["stroke-width"])&&(H.on=!1);var q=n.getRGB(l.stroke);H.on&&l.stroke&&(H.color=q.hex),$=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+q.o+1||2)-1);var z=.75*(r(l["stroke-width"])||1);if($=s(o($,0),1),null==l["stroke-width"]&&(z=f["stroke-width"]),l["stroke-width"]&&(H.weight=z),z&&1>z&&($*=z)&&(H.weight=1),H.opacity=$,l["stroke-linejoin"]&&(H.joinstyle=l["stroke-linejoin"]||"miter"),H.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(H.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var G={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};H.dashstyle=G[t](l["stroke-dasharray"])?G[l["stroke-dasharray"]]:p}U&&h.appendChild(H)}if("text"==y.type){y.paper.canvas.style.display=p;var W=y.paper.span,X=100,V=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);g=W.style,f.font&&(g.font=f.font),f["font-family"]&&(g.fontFamily=f["font-family"]),f["font-weight"]&&(g.fontWeight=f["font-weight"]),f["font-style"]&&(g.fontStyle=f["font-style"]),V=r(f["font-size"]||V&&V[0])||10,g.fontSize=V*X+"px",y.textpath.string&&(W.innerHTML=e(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=W.getBoundingClientRect();y.W=f.w=(Y.right-Y.left)/X,y.H=f.h=(Y.bottom-Y.top)/X,y.X=f.x,y.Y=f.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=n.format("m{0},{1}l{2},{1}",a(f.x*x),a(f.y*x),a(f.x*x)+1));for(var J=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,K=J.length;K>Q;Q++)if(J[Q]in l){y._.dirty=1;break}switch(f["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},I=function(t,a,o){t.attrs=t.attrs||{};var s=(t.attrs,Math.pow),l="linear",c=".5 .5";if(t.attrs.gradient=a,a=e(a).replace(n._radial_gradient,function(t,e,n){return l="radial",e&&n&&(e=r(e),n=r(n),s(e-.5,2)+s(n-.5,2)>.25&&(n=i.sqrt(.25-s(e-.5,2))*(2*(n>.5)-1)+.5),c=e+d+n),p}),a=a.split(/\s*\-\s*/),"linear"==l){var u=a.shift();if(u=-r(u),isNaN(u))return null}var h=n._parseDots(a);if(!h)return null;if(t=t.shape||t.node,h.length){t.removeChild(o),o.on=!0,o.method="none",o.color=h[0].color,o.color2=h[h.length-1].color;for(var f=[],g=0,m=h.length;m>g;g++)h[g].offset&&f.push(h[g].offset+d+h[g].color);o.colors=f.length?f.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=c,o.angle=0):(o.type="gradient",o.angle=(270-u)%360),t.appendChild(o)}return 1},N=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=n._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=n.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},R=n.el;N.prototype=R,R.constructor=N,R.transform=function(t){if(null==t)return this._.transform;var r,i=this.paper._viewBoxShift,a=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:p;i&&(r=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||p)),n._extractTransform(this,a+t);var o,s=this.matrix.clone(),l=this.skew,c=this.node,u=~e(this.attrs.fill).indexOf("-"),h=!e(this.attrs.fill).indexOf("url(");if(s.translate(1,1),h||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=s.split(),u&&o.noRotation||!o.isSimple){c.style.filter=s.toFilter();var f=this.getBBox(),g=this.getBBox(1),m=f.x-g.x,v=f.y-g.y;c.coordorigin=m*-x+d+v*-x,E(this,1,1,m,v,0)}else c.style.filter=p,E(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else c.style.filter=p,l.matrix=e(s),l.offset=s.offset();return r&&(this._.transform=r),this},R.rotate=function(t,n,i){if(this.removed)return this;if(null!=t){if(t=e(t).split(u),t.length-1&&(n=r(t[1]),i=r(t[2])),t=r(t[0]),null==i&&(n=i),null==n||null==i){var a=this.getBBox(1);n=a.x+a.width/2,i=a.y+a.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,n,i]])),this}},R.translate=function(t,n){return this.removed?this:(t=e(t).split(u),t.length-1&&(n=r(t[1])),t=r(t[0])||0,n=+n||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=n),this.transform(this._.transform.concat([["t",t,n]])),this)},R.scale=function(t,n,i,a){if(this.removed)return this;if(t=e(t).split(u),t.length-1&&(n=r(t[1]),i=r(t[2]),a=r(t[3]),isNaN(i)&&(i=null),isNaN(a)&&(a=null)),t=r(t[0]),null==n&&(n=t),null==a&&(i=a),null==i||null==a)var o=this.getBBox(1);return i=null==i?o.x+o.width/2:i,a=null==a?o.y+o.height/2:a,this.transform(this._.transform.concat([["s",t,n,i,a]])),this._.dirtyT=1,this},R.hide=function(){return!this.removed&&(this.node.style.display="none"),this},R.show=function(){return!this.removed&&(this.node.style.display=p),this},R._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},R.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),n.eve.unbind("raphael.*.*."+this.id),n._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;this.removed=!0}},R.attr=function(e,r){if(this.removed)return this;if(null==e){var i={};for(var a in this.attrs)this.attrs[t](a)&&(i[a]=this.attrs[a]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&n.is(e,"string")){if(e==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=e.split(u),s={},l=0,f=o.length;f>l;l++)e=o[l],s[e]=e in this.attrs?this.attrs[e]:n.is(this.paper.customAttributes[e],"function")?this.paper.customAttributes[e].def:n._availableAttrs[e];return f-1?s:s[o[0]]}if(this.attrs&&null==r&&n.is(e,"array")){for(s={},l=0,f=e.length;f>l;l++)s[e[l]]=this.attr(e[l]);return s}var d;null!=r&&(d={},d[e]=r),null==r&&n.is(e,"object")&&(d=e);for(var p in d)h("raphael.attr."+p+"."+this.id,this,d[p]);if(d){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&d[t](p)&&n.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(d[p]));this.attrs[p]=d[p];for(var m in g)g[t](m)&&(d[m]=g[m])}d.text&&"text"==this.type&&(this.textpath.string=d.text),T(this,d)}return this},R.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&n._tofront(this,this.paper),this},R.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper)),this)},R.insertAfter=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this)},R.insertBefore=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),n._insertbefore(this,t,this.paper),this)},R.blur=function(t){var e=this.node.runtimeStyle,r=e.filter;return r=r.replace(v,p),0!==+t?(this.attrs.blur=t,e.filter=r+d+f+".Blur(pixelradius="+(+t||1.5)+")",e.margin=n.format("-{0}px 0 0 -{0}px",a(+t||1.5))):(e.filter=r,e.margin=0,delete this.attrs.blur),this},n._engine.path=function(t,e){var n=A("shape");n.style.cssText=b,n.coordsize=x+d+x,n.coordorigin=e.coordorigin;var r=new N(n,e),i={fill:"none",stroke:"#000"};t&&(i.path=t),r.type="path",r.path=[],r.Path=p,T(r,i),e.canvas.appendChild(n);var a=A("skew");return a.on=!0,n.appendChild(a),r.skew=a,r.transform(p),r},n._engine.rect=function(t,e,r,i,a,o){var s=n._rectPath(e,r,i,a,o),l=t.path(s),c=l.attrs;return l.X=c.x=e,l.Y=c.y=r,l.W=c.width=i,l.H=c.height=a,c.r=o,c.path=s,l.type="rect",l},n._engine.ellipse=function(t,e,n,r,i){{var a=t.path();a.attrs}return a.X=e-r,a.Y=n-i,a.W=2*r,a.H=2*i,a.type="ellipse",T(a,{cx:e,cy:n,rx:r,ry:i}),a},n._engine.circle=function(t,e,n,r){{var i=t.path();i.attrs}return i.X=e-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",T(i,{cx:e,cy:n,r:r}),i},n._engine.image=function(t,e,r,i,a,o){var s=n._rectPath(r,i,a,o),l=t.path(s).attr({stroke:"none"}),u=l.attrs,h=l.node,f=h.getElementsByTagName(c)[0];return u.src=e,l.X=u.x=r,l.Y=u.y=i,l.W=u.width=a,l.H=u.height=o,u.path=s,l.type="image",f.parentNode==h&&h.removeChild(f),f.rotate=!0,f.src=e,f.type="tile",l._.fillpos=[r,i],l._.fillsize=[a,o],h.appendChild(f),E(l,1,1,0,0,0),l},n._engine.text=function(t,r,i,o){var s=A("shape"),l=A("path"),c=A("textpath");r=r||0,i=i||0,o=o||"",l.v=n.format("m{0},{1}l{2},{1}",a(r*x),a(i*x),a(r*x)+1),l.textpathok=!0,c.string=e(o),c.on=!0,s.style.cssText=b,s.coordsize=x+d+x,s.coordorigin="0 0";var u=new N(s,t),h={fill:"#000",stroke:"none",font:n._availableAttrs.font,text:o};u.shape=s,u.path=l,u.textpath=c,u.type="text",u.attrs.text=e(o),u.attrs.x=r,u.attrs.y=i,u.attrs.w=1,u.attrs.h=1,T(u,h),s.appendChild(c),s.appendChild(l),t.canvas.appendChild(s);var f=A("skew");return f.on=!0,s.appendChild(f),u.skew=f,u.transform(p),u},n._engine.setSize=function(t,e){var r=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),r.width=t,r.height=e,r.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&n._engine.setViewBox.apply(this,this._viewBox),this},n._engine.setViewBox=function(t,e,r,i,a){n.eve("raphael.setViewBox",this,this._viewBox,[t,e,r,i,a]);var s,l,c=this.width,u=this.height,h=1/o(r/c,i/u);return a&&(s=u/i,l=c/r,c>r*s&&(t-=(c-r*s)/2/s),u>i*l&&(e-=(u-i*l)/2/l)),this._viewBox=[t,e,r,i,!!a],this._viewBoxShift={dx:-t,dy:-e,scale:h},this.forEach(function(t){t.transform("...")}),this};var A;n._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(n){A=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},n._engine.initWin(n._g.win),n._engine.create=function(){var t=n._getContainer.apply(0,arguments),e=t.container,r=t.height,i=t.width,a=t.x,o=t.y;if(!e)throw new Error("VML container not found.");var s=new n._Paper,l=s.canvas=n._g.doc.createElement("div"),c=l.style;return a=a||0,o=o||0,i=i||512,r=r||342,s.width=i,s.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),s.coordsize=1e3*x+d+1e3*x,s.coordorigin="0 0",s.span=n._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==e?(n._g.doc.body.appendChild(l),c.left=a+"px",c.top=o+"px",c.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),s.renderfix=function(){},s},n.prototype.clear=function(){n.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=n._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},n.prototype.remove=function(){n.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;return!0};var M=n.st;for(var L in R)R[t](L)&&!M[t](L)&&(M[L]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(L))}}(),T.was?k.win.Raphael=n:Raphael=n,n}),function(){function t(){this.title=void 0,this.actors=[],this.signals=[]}function e(t,e){_.extend(this,e),this.name="ParseError",this.message=t||""}t.prototype.getActor=function(e){var n=/^(.+) as (\S+)$/i.exec(e.trim());n?(name=n[1].trim(),e=n[2].trim()):name=e.trim(),name=name.replace(/\\n/gm,"\n");var r,i=this.actors;for(r in i)if(i[r].alias==e)return i[r];return r=i.push(new t.Actor(e,name,i.length)),i[r-1]},t.prototype.setTitle=function(t){this.title=t},t.prototype.addSignal=function(t){this.signals.push(t)},t.Actor=function(t,e,n){this.alias=t,this.name=e,this.index=n},t.Signal=function(t,e,n,r){this.type="Signal",this.actorA=t,this.actorB=n,this.linetype=3&e,this.arrowtype=e>>2&3,this.message=r},t.Signal.prototype.isSelf=function(){return this.actorA.index==this.actorB.index},t.Note=function(t,e,n){if(this.type="Note",this.actor=t,this.placement=e,this.message=n,this.hasManyActors()&&t[0]==t[1])throw new Error("Note should be over two different actors")},t.Note.prototype.hasManyActors=function(){return _.isArray(this.actor)},t.LINETYPE={SOLID:0,DOTTED:1},t.ARROWTYPE={FILLED:0,OPEN:1},t.PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2};var n=function(){function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,start:3,document:4,EOF:5,line:6,statement:7,NL:8,participant:9,actor:10,signal:11,note_statement:12,title:13,message:14,note:15,placement:16,over:17,actor_pair:18,",":19,left_of:20,right_of:21,signaltype:22,ACTOR:23,linetype:24,arrowtype:25,LINE:26,DOTLINE:27,ARROW:28,OPENARROW:29,MESSAGE:30,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:"NL",9:"participant",13:"title",15:"note",17:"over",19:",",20:"left_of",21:"right_of",23:"ACTOR",26:"LINE",27:"DOTLINE",28:"ARROW",29:"OPENARROW",30:"MESSAGE"},productions_:[0,[3,2],[4,0],[4,2],[6,1],[6,1],[7,2],[7,1],[7,1],[7,2],[12,4],[12,4],[18,1],[18,3],[16,1],[16,1],[11,4],[10,1],[22,2],[22,1],[24,1],[24,1],[25,1],[25,1],[14,1]],performAction:function(e,n,r,i,a,o){var s=o.length-1;switch(a){case 1:return i;case 4:break;case 6:o[s];break;case 7:i.addSignal(o[s]);break;case 8:i.addSignal(o[s]);break;case 9:i.setTitle(o[s]);break;case 10:this.$=new t.Note(o[s-1],o[s-2],o[s]);break;case 11:this.$=new t.Note(o[s-1],t.PLACEMENT.OVER,o[s]);break;case 12:this.$=o[s];break;case 13:this.$=[o[s-2],o[s]];break;case 14:this.$=t.PLACEMENT.LEFTOF;break;case 15:this.$=t.PLACEMENT.RIGHTOF;break;case 16:this.$=new t.Signal(o[s-3],o[s-2],o[s-1],o[s]);break;case 17:this.$=i.getActor(o[s]);break;case 18:this.$=o[s-1]|o[s]<<2;break;case 19:this.$=o[s];break;case 20:this.$=t.LINETYPE.SOLID;break;case 21:this.$=t.LINETYPE.DOTTED;break;case 22:this.$=t.ARROWTYPE.FILLED;break;case 23:this.$=t.ARROWTYPE.OPEN;break;case 24:this.$=o[s].substring(1).trim().replace(/\\n/gm,"\n")}},table:[{3:1,4:2,5:[2,2],8:[2,2],9:[2,2],13:[2,2],15:[2,2],23:[2,2]},{1:[3]},{5:[1,3],6:4,7:5,8:[1,6],9:[1,7],10:11,11:8,12:9,13:[1,10],15:[1,12],23:[1,13]},{1:[2,1]},{5:[2,3],8:[2,3],9:[2,3],13:[2,3],15:[2,3],23:[2,3]},{5:[2,4],8:[2,4],9:[2,4],13:[2,4],15:[2,4],23:[2,4]},{5:[2,5],8:[2,5],9:[2,5],13:[2,5],15:[2,5],23:[2,5]},{10:14,23:[1,13]},{5:[2,7],8:[2,7],9:[2,7],13:[2,7],15:[2,7],23:[2,7]},{5:[2,8],8:[2,8],9:[2,8],13:[2,8],15:[2,8],23:[2,8]},{14:15,30:[1,16]},{22:17,24:18,26:[1,19],27:[1,20]},{16:21,17:[1,22],20:[1,23],21:[1,24]},{5:[2,17],8:[2,17],9:[2,17],13:[2,17],15:[2,17],19:[2,17],23:[2,17],26:[2,17],27:[2,17],30:[2,17]},{5:[2,6],8:[2,6],9:[2,6],13:[2,6],15:[2,6],23:[2,6]},{5:[2,9],8:[2,9],9:[2,9],13:[2,9],15:[2,9],23:[2,9]},{5:[2,24],8:[2,24],9:[2,24],13:[2,24],15:[2,24],23:[2,24]},{10:25,23:[1,13]},{23:[2,19],25:26,28:[1,27],29:[1,28]},{23:[2,20],28:[2,20],29:[2,20]},{23:[2,21],28:[2,21],29:[2,21]},{10:29,23:[1,13]},{10:31,18:30,23:[1,13]},{23:[2,14]},{23:[2,15]},{14:32,30:[1,16]},{23:[2,18]},{23:[2,22]},{23:[2,23]},{14:33,30:[1,16]},{14:34,30:[1,16]},{19:[1,35],30:[2,12]},{5:[2,16],8:[2,16],9:[2,16],13:[2,16],15:[2,16],23:[2,16]},{5:[2,10],8:[2,10],9:[2,10],13:[2,10],15:[2,10],23:[2,10]},{5:[2,11],8:[2,11],9:[2,11],13:[2,11],15:[2,11],23:[2,11]},{10:36,23:[1,13]},{30:[2,13]}],defaultActions:{3:[2,1],23:[2,14],24:[2,15],26:[2,18],27:[2,22],28:[2,23],36:[2,13]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);
this.trace(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||f,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,r=[0],i=[null],a=[],o=this.table,s="",l=0,c=0,u=0,h=2,f=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;a.push(d);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var g,m,v,y,b,x,w,_,C,S={};;){if(v=r[r.length-1],this.defaultActions[v]?y=this.defaultActions[v]:((null===g||"undefined"==typeof g)&&(g=e()),y=o[v]&&o[v][g]),"undefined"==typeof y||!y.length||!y[0]){var E="";C=[];for(x in o[v])this.terminals_[x]&&x>h&&C.push("'"+this.terminals_[x]+"'");E=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(l+1)+": Unexpected "+(g==f?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:d,expected:C})}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(y[0]){case 1:r.push(g),i.push(this.lexer.yytext),a.push(this.lexer.yylloc),r.push(y[1]),g=null,m?(g=m,m=null):(c=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,u>0&&u--);break;case 2:if(w=this.productions_[y[1]][1],S.$=i[i.length-w],S._$={first_line:a[a.length-(w||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(w||1)].first_column,last_column:a[a.length-1].last_column},p&&(S._$.range=[a[a.length-(w||1)].range[0],a[a.length-1].range[1]]),b=this.performAction.call(S,s,c,l,this.yy,y[1],i,a),"undefined"!=typeof b)return b;w&&(r=r.slice(0,-1*w*2),i=i.slice(0,-1*w),a=a.slice(0,-1*w)),r.push(this.productions_[y[1]][0]),i.push(S.$),a.push(S._$),_=o[r[r.length-2]][r[r.length-1]],r.push(_);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if(n=this._input.match(this.rules[i[a]]),n&&(!e||n[0].length>e[0].length)){if(e=n,r=a,this.options.backtrack_lexer){if(t=this.test_match(n,i[a]),t!==!1)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,i[r]),t!==!1?t:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return 8;case 1:break;case 2:break;case 3:return 9;case 4:return 20;case 5:return 21;case 6:return 17;case 7:return 15;case 8:return 13;case 9:return 19;case 10:return 23;case 11:return 27;case 12:return 26;case 13:return 29;case 14:return 28;case 15:return 30;case 16:return 5;case 17:return"INVALID"}},rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:participant\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:title\b)/i,/^(?:,)/i,/^(?:[^\->:\n,]+)/i,/^(?:--)/i,/^(?:-)/i,/^(?:>>)/i,/^(?:>)/i,/^(?:[^#\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}}};return t}();return n.lexer=r,e.prototype=n,n.Parser=e,new e}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=n,exports.Parser=n.Parser,exports.parse=function(){return n.parse.apply(n,arguments)},exports.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var e=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return exports.parser.parse(e)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1))),e.prototype=new Error,t.ParseError=e,n.parseError=function(t,n){throw new e(t,n)},t.parse=function(e){return n.yy=new t,n.parse(e)},this.Diagram=t}.call(this),define("diagram-grammar",function(){}),function(t){"function"==typeof define&&define.amd?define("Diagram",["raphael"],function(e){return t(e),Diagram}):t(Raphael)}(function(t){function e(t){this.message=t}function n(t,n){if(!t)throw new e(n)}function r(t){return t.x+t.width/2}function i(t){return t.y+t.height/2}var a=10,o=10,s=10,l=5,c=5,u=10,h=5,f=15,d=0,p=5,g=20,m=Diagram.PLACEMENT,v=Diagram.LINETYPE,y=Diagram.ARROWTYPE,b={stroke:"#000","stroke-width":2},x={fill:"#fff"};e.prototype.toString=function(){return"AssertException: "+this.message},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.fn.line=function(t,e,r,i){return n(_.all([t,r,e,i],_.isFinite),"x1,x2,y1,y2 must be numeric"),this.path("M{0},{1} L{2},{3}",t,e,r,i)},t.fn.wobble=function(t,e,r,i){n(_.all([t,r,e,i],_.isFinite),"x1,x2,y1,y2 must be numeric");var a=Math.sqrt((r-t)*(r-t)+(i-e)*(i-e))/25,o=Math.random(),s=Math.random(),l=Math.random()>.5?a:-a,c=Math.random()>.5?a:-a,u={x:(r-t)*o+t+l,y:(i-e)*o+e+c},h={x:(r-t)*s+t-l,y:(i-e)*s+e-c};return"C"+u.x+","+u.y+" "+h.x+","+h.y+" "+r+","+i},t.fn.text_bbox=function(t,e){var n;e._obj?n=this.print_center(0,0,t,e._obj,e["font-size"]):(n=this.text(0,0,t),n.attr(e));var r=n.getBBox();return n.remove(),r},t.fn.handRect=function(t,e,r,i){return n(_.all([t,e,r,i],_.isFinite),"x, y, w, h must be numeric"),this.path("M"+t+","+e+this.wobble(t,e,t+r,e)+this.wobble(t+r,e,t+r,e+i)+this.wobble(t+r,e+i,t,e+i)+this.wobble(t,e+i,t,e)).attr(x)},t.fn.handLine=function(t,e,r,i){return n(_.all([t,r,e,i],_.isFinite),"x1,x2,y1,y2 must be numeric"),this.path("M"+t+","+e+this.wobble(t,e,r,i))},t.fn.print_center=function(e,n,r,i,a,o){var s=this.print(e,n,r,i,a,"baseline",o),l=s.getBBox(),c=e-l.x-l.width/2,u=n-l.y-l.height/2,h=new t.matrix;return h.translate(c,u),s.attr("path",t.mapPath(s.attr("path"),h))};var w=function(t){this.init(t)};_.extend(w.prototype,{init:function(t){this.diagram=t,this._paper=void 0,this._font=void 0,this._title=void 0,this._actors_height=0,this._signals_height=0;var e=this.arrow_types={};e[y.FILLED]="block",e[y.OPEN]="open";var n=this.line_types={};n[v.SOLID]="",n[v.DOTTED]="-"},init_paper:function(e){this._paper=new t(e,320,200)},init_font:function(){},draw_line:function(t,e,n,r){return this._paper.line(t,e,n,r)},draw_rect:function(t,e,n,r){return this._paper.rect(t,e,n,r)},draw:function(t){var e=this.diagram;this.init_paper(t),this.init_font(),this.layout();var n=this._title?this._title.height:0;this._paper.setStart(),this._paper.setSize(e.width,e.height);var r=a+n;this.draw_title(),this.draw_actors(r),this.draw_signals(r+this._actors_height),this._paper.setFinish()},layout:function(){function t(t,e,r){n(e>t,"a must be less than or equal to b"),0>t?(e=v[e],e.x=Math.max(r-e.width/2,e.x)):e>=v.length?(t=v[t],t.padding_right=Math.max(r,t.padding_right)):(t=v[t],t.distances[e]=Math.max(r,t.distances[e]?t.distances[e]:0))}var e=this.diagram,r=this._paper,i=this._font,v=e.actors,y=e.signals;if(e.width=0,e.height=0,e.title){var b=this._title={},x=r.text_bbox(e.title,i);b.text_bb=x,b.message=e.title,b.width=x.width+2*(p+d),b.height=x.height+2*(p+d),b.x=a,b.y=a,e.width+=b.width,e.height+=b.height}_.each(v,function(t){var e=r.text_bbox(t.name,i);t.text_bb=e,t.x=0,t.y=0,t.width=e.width+2*(s+o),t.height=e.height+2*(s+o),t.distances=[],t.padding_right=0,this._actors_height=Math.max(t.height,this._actors_height)},this),_.each(y,function(e){var n,a,s=r.text_bbox(e.message,i);e.text_bb=s,e.width=s.width,e.height=s.height;var d=0;if("Signal"==e.type)e.width+=2*(l+c),e.height+=2*(l+c),e.isSelf()?(n=e.actorA.index,a=n+1,e.width+=g):(n=Math.min(e.actorA.index,e.actorB.index),a=Math.max(e.actorA.index,e.actorB.index));else{if("Note"!=e.type)throw new Error("Unhandled signal type:"+e.type);if(e.width+=2*(u+h),e.height+=2*(u+h),d=2*o,e.placement==m.LEFTOF)a=e.actor.index,n=a-1;else if(e.placement==m.RIGHTOF)n=e.actor.index,a=n+1;else if(e.placement==m.OVER&&e.hasManyActors())n=Math.min(e.actor[0].index,e.actor[1].index),a=Math.max(e.actor[0].index,e.actor[1].index),d=-(2*h+2*f);else if(e.placement==m.OVER)return n=e.actor.index,t(n-1,n,e.width/2),t(n,n+1,e.width/2),void(this._signals_height+=e.height)}t(n,a,e.width+d),this._signals_height+=e.height},this);var w=0;return _.each(v,function(t){t.x=Math.max(w,t.x),_.each(t.distances,function(e,n){"undefined"!=typeof e&&(n=v[n],e=Math.max(e,t.width/2,n.width/2),n.x=Math.max(n.x,t.x+t.width/2+e-n.width/2))}),w=t.x+t.width+t.padding_right},this),e.width=Math.max(w,e.width),e.width+=2*a,e.height+=2*a+2*this._actors_height+this._signals_height,this},draw_title:function(){var t=this._title;t&&this.draw_text_box(t,t.message,d,p,this._font)},draw_actors:function(t){var e=t;_.each(this.diagram.actors,function(t){this.draw_actor(t,e,this._actors_height),this.draw_actor(t,e+this._actors_height+this._signals_height,this._actors_height);var n=r(t),i=this.draw_line(n,e+this._actors_height-o,n,e+this._actors_height+o+this._signals_height);i.attr(b)},this)},draw_actor:function(t,e,n){t.y=e,t.height=n,this.draw_text_box(t,t.name,o,s,this._font)},draw_signals:function(t){var e=t;_.each(this.diagram.signals,function(t){"Signal"==t.type?t.isSelf()?this.draw_self_signal(t,e):this.draw_signal(t,e):"Note"==t.type&&this.draw_note(t,e),e+=t.height},this)},draw_self_signal:function(t,e){n(t.isSelf(),"signal must be a self signal");var i=t.text_bb,a=r(t.actorA),o=a+g+c-i.x,s=e+t.height/2;this.draw_text(o,s,t.message,this._font);var u,h=_.extend({},b,{"stroke-dasharray":this.line_types[t.linetype]}),f=e+l,d=f+t.height-l;u=this.draw_line(a,f,a+g,f),u.attr(h),u=this.draw_line(a+g,f,a+g,d),u.attr(h),u=this.draw_line(a+g,d,a,d),h["arrow-end"]=this.arrow_types[t.arrowtype]+"-wide-long",u.attr(h)},draw_signal:function(t,e){var n=r(t.actorA),i=r(t.actorB),a=(i-n)/2+n,o=e+l+2*c;this.draw_text(a,o,t.message,this._font),o=e+t.height-l-c;var s=this.draw_line(n,o,i,o);s.attr(b),s.attr({"arrow-end":this.arrow_types[t.arrowtype]+"-wide-long","stroke-dasharray":this.line_types[t.linetype]})},draw_note:function(t,e){t.y=e;var n=t.hasManyActors()?t.actor[0]:t.actor,i=r(n);switch(t.placement){case m.RIGHTOF:t.x=i+o;break;case m.LEFTOF:t.x=i-o-t.width;break;case m.OVER:if(t.hasManyActors()){var a=r(t.actor[1]),s=f+h;t.x=i-s,t.width=a+s-t.x}else t.x=i-t.width/2;break;default:throw new Error("Unhandled note placement:"+t.placement)}this.draw_text_box(t,t.message,u,h,this._font)},draw_text:function(t,e,n,r){var i,a=this._paper,o=r||{};o._obj?i=a.print_center(t,e,n,o._obj,o["font-size"]):(i=a.text(t,e,n),i.attr(o));var s=i.getBBox(),l=a.rect(s.x,s.y,s.width,s.height);l.attr({fill:"#fff",stroke:"none"}),i.toFront()},draw_text_box:function(t,e,n,a,o){var s=t.x+n,l=t.y+n,c=t.width-2*n,u=t.height-2*n,h=this.draw_rect(s,l,c,u);h.attr(b),s=r(t),l=i(t),this.draw_text(s,l,e,o)}});var C=function(t){this.init(t)};_.extend(C.prototype,w.prototype,{init_font:function(){this._font={"font-size":16,"font-family":"Andale Mono, monospace"}}});var S=function(t){this.init(t)};_.extend(S.prototype,w.prototype,{init_font:function(){this._font={"font-size":16,"font-family":"daniel"},this._font._obj=this._paper.getFont("daniel")},draw_line:function(t,e,n,r){return this._paper.handLine(t,e,n,r)},draw_rect:function(t,e,n,r){return this._paper.handRect(t,e,n,r)}});var E={simple:C,hand:S};Diagram.prototype.drawSVG=function(t,e){var n={theme:"hand"};if(e=_.defaults(e||{},n),!(e.theme in E))throw new Error("Unsupported theme: "+e.theme);var r=new E[e.theme](this);r.draw(t)}}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd&&define("flow-chart",[],e)}(this,function(){function t(e,n){if(!e||"function"==typeof e)return n;var r={};for(var i in n)r[i]=n[i];for(i in e)e[i]&&(r[i]="object"==typeof r[i]?t(r[i],e[i]):e[i]);return r}function e(t,e){if("function"==typeof Object.create)t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}function n(t,e,n){var r,i,a="M{0},{1}";for(r=2,i=2*n.length+2;i>r;r+=2)a+=" L{"+r+"},{"+(r+1)+"}";var o=[e.x,e.y];for(r=0,i=n.length;i>r;r++)o.push(n[r].x),o.push(n[r].y);var s=t.paper.path(a,o);s.attr("stroke",t.options["element-color"]),s.attr("stroke-width",t.options["line-width"]);var l=t.options.font,c=t.options["font-family"],u=t.options["font-weight"];return l&&s.attr({font:l}),c&&s.attr({"font-family":c}),u&&s.attr({"font-weight":u}),s}function r(t,e,n,r){var i,a;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var o="M{0},{1}";for(i=2,a=2*n.length+2;a>i;i+=2)o+=" L{"+i+"},{"+(i+1)+"}";var s=[e.x,e.y];for(i=0,a=n.length;a>i;i++)s.push(n[i].x),s.push(n[i].y);var l=t.paper.path(o,s);l.attr({stroke:t.options["line-color"],"stroke-width":t.options["line-width"],"arrow-end":t.options["arrow-end"]});var c=t.options.font,u=t.options["font-family"],h=t.options["font-weight"];if(c&&l.attr({font:c}),u&&l.attr({"font-family":u}),h&&l.attr({"font-weight":h}),r){var f=!1,d=t.paper.text(0,0,r),p=!1,g=n[0];e.y===g.y&&(p=!0);var m=0,v=0;f?(m=e.x>g.x?e.x-(e.x-g.x)/2:g.x-(g.x-e.x)/2,v=e.y>g.y?e.y-(e.y-g.y)/2:g.y-(g.y-e.y)/2,p?(m-=d.getBBox().width/2,v-=t.options["text-margin"]):(m+=t.options["text-margin"],v-=d.getBBox().height/2)):(m=e.x,v=e.y,p?(m+=t.options["text-margin"]/2,v-=t.options["text-margin"]):(m+=t.options["text-margin"]/2,v+=t.options["text-margin"])),d.attr({"text-anchor":"start","font-size":t.options["font-size"],fill:t.options["font-color"],x:m,y:v}),c&&d.attr({font:c}),u&&d.attr({"font-family":u}),h&&d.attr({"font-weight":h})}return l}function i(t,e,n,r,i,a,o,s){var l,c,u,h,f,d={x:null,y:null,onLine1:!1,onLine2:!1};return l=(s-a)*(n-t)-(o-i)*(r-e),0===l?d:(c=e-a,u=t-i,h=(o-i)*c-(s-a)*u,f=(n-t)*c-(r-e)*u,c=h/l,u=f/l,d.x=t+c*(n-t),d.y=e+c*(r-e),c>0&&1>c&&(d.onLine1=!0),u>0&&1>u&&(d.onLine2=!0),d)}function a(t,e){e=e||{},this.paper=new Raphael(t),this.options=m.defaults(e,g),this.symbols=[],this.lines=[],this.start=null}function o(t,e,n){this.chart=t,this.group=this.chart.paper.set(),this.symbol=n,this.connectedTo=[],this.symbolType=e.symbolType,this.flowstate=e.flowstate||"future",this.next_direction=e.next&&e.direction_next?e.direction_next:void 0,this.text=this.chart.paper.text(0,0,e.text),e.key&&(this.text.node.id=e.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var r=this.getAttr("font"),i=this.getAttr("font-family"),a=this.getAttr("font-weight");r&&this.text.attr({font:r}),i&&this.text.attr({"font-family":i}),a&&this.text.attr({"font-weight":a}),e.link&&this.text.attr("href",e.link),e.target&&this.text.attr("target",e.target);var o=this.getAttr("maxWidth");if(o){for(var s=e.text.split(" "),l="",c=0,u=s.length;u>c;c++){var h=s[c];this.text.attr("text",l+" "+h),l+=this.text.getBBox().width>o?"\n"+h:" "+h}this.text.attr("text",l.substring(1))}if(this.group.push(this.text),n){var f=this.getAttr("text-margin");n.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*f,height:this.text.getBBox().height+2*f}),n.node.setAttribute("class",this.getAttr("class")),e.link&&n.attr("href",e.link),e.target&&n.attr("target",e.target),e.key&&(n.node.id=e.key),this.group.push(n),n.insertBefore(this.text),this.text.attr({y:n.getBBox().height/2}),this.initialize()}}function s(t,e){var n=t.paper.rect(0,0,0,0,20);e=e||{},e.text=e.text||"Start",o.call(this,t,e,n)}function l(t,e){var n=t.paper.rect(0,0,0,0,20);e=e||{},e.text=e.text||"End",o.call(this,t,e,n)}function c(t,e){var n=t.paper.rect(0,0,0,0);e=e||{},o.call(this,t,e,n)}function u(t,e){var n=t.paper.rect(0,0,0,0);e=e||{},o.call(this,t,e,n),n.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var r=t.paper.rect(0,0,0,0);r.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),e.key&&(r.node.id=e.key+"i");var i=this.getAttr("font"),a=this.getAttr("font-family"),s=this.getAttr("font-weight");i&&r.attr({font:i}),a&&r.attr({"font-family":a}),s&&r.attr({"font-weight":s}),e.link&&r.attr("href",e.link),e.target&&r.attr("target",e.target),this.group.push(r),r.insertBefore(this.text),this.initialize()}function h(t,e){e=e||{},o.call(this,t,e),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var r=this.text.getBBox().width+4*this.textMargin,i=this.text.getBBox().height+2*this.textMargin,a=this.textMargin,s=i/2,l={x:a,y:s},c=[{x:a-this.textMargin,y:i},{x:a-this.textMargin+r,y:i},{x:a-this.textMargin+r+2*this.textMargin,y:0},{x:a-this.textMargin+2*this.textMargin,y:0},{x:a,y:s}],u=n(t,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&u.attr("href",e.link),e.target&&u.attr("target",e.target),e.key&&(u.node.id=e.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function f(t,e){e=e||{},o.call(this,t,e),this.textMargin=this.getAttr("text-margin"),this.yes_direction="bottom",this.no_direction="right",e.yes&&e.direction_yes&&e.no&&!e.direction_no?"right"===e.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):e.yes&&!e.direction_yes&&e.no&&e.direction_no?"right"===e.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right"),this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var r=this.text.getBBox().width+3*this.textMargin;r+=r/2;var i=this.text.getBBox().height+2*this.textMargin;i+=i/2,i=Math.max(.5*r,i);var a=r/4,s=i/4;this.text.attr({x:a+this.textMargin/2});var l={x:a,y:s},c=[{x:a-r/4,y:s+i/4},{x:a-r/4+r/2,y:s+i/4+i/2},{x:a-r/4+r,y:s+i/4},{x:a-r/4+r/2,y:s+i/4-i/2},{x:a-r/4,y:s+i/4}],u=n(t,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&u.attr("href",e.link),e.target&&u.attr("target",e.target),e.key&&(u.node.id=e.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function d(t){function e(t){var e=t.indexOf("(")+1,n=t.indexOf(")");return e>=0&&n>=0?r.symbols[t.substring(0,e-1)]:r.symbols[t]}function n(t){var e="next",n=t.indexOf("(")+1,r=t.indexOf(")");return n>=0&&r>=0&&(e=N.substring(n,r),e.indexOf(",")<0&&"yes"!==e&&"no"!==e&&(e="next, "+e)),e}t=t||"",t=t.trim();for(var r={symbols:{},start:null,drawSVG:function(t,e){function n(t){if(o[t.key])return o[t.key];switch(t.symbolType){case"start":o[t.key]=new s(i,t);break;case"end":o[t.key]=new l(i,t);break;case"operation":o[t.key]=new c(i,t);break;case"inputoutput":o[t.key]=new h(i,t);break;case"subroutine":o[t.key]=new u(i,t);break;case"condition":o[t.key]=new f(i,t);break;default:return new Error("Wrong symbol type!")}return o[t.key]}var r=this;this.diagram&&this.diagram.clean();var i=new a(t,e);this.diagram=i;var o={};!function d(t,e,a){var o=n(t);return r.start===t?i.startWith(o):e&&a&&!e.pathOk&&(e instanceof f?(a.yes===t&&e.yes(o),a.no===t&&e.no(o)):e.then(o)),o.pathOk?o:(o instanceof f?(t.yes&&d(t.yes,o,t),t.no&&d(t.no,o,t)):t.next&&d(t.next,o,t),o)}(this.start),i.render()},clean:function(){this.diagram.clean()}},i=[],o=0,d=1,p=t.length;p>d;d++)if("\n"===t[d]&&"\\"!==t[d-1]){var g=t.substring(o,d);o=d+1,i.push(g.replace(/\\\n/g,"\n"))}o<t.length&&i.push(t.substr(o));for(var m=1,v=i.length;v>m;){var y=i[m];y.indexOf(": ")<0&&y.indexOf("(")<0&&y.indexOf(")")<0&&y.indexOf("->")<0&&y.indexOf("=>")<0?(i[m-1]+="\n"+y,i.splice(m,1),v--):m++}for(;i.length>0;){var b=i.splice(0,1)[0];if(b.indexOf("=>")>=0){var x,w=b.split("=>"),_={key:w[0],symbolType:w[1],text:null,link:null,target:null,flowstate:null};if(_.symbolType.indexOf(": ")>=0&&(x=_.symbolType.split(": "),_.symbolType=x[0],_.text=x[1]),_.text&&_.text.indexOf(":>")>=0?(x=_.text.split(":>"),_.text=x[0],_.link=x[1]):_.symbolType.indexOf(":>")>=0&&(x=_.symbolType.split(":>"),_.symbolType=x[0],_.link=x[1]),_.symbolType.indexOf("\n")>=0&&(_.symbolType=_.symbolType.split("\n")[0]),_.link){var C=_.link.indexOf("[")+1,S=_.link.indexOf("]");C>=0&&S>=0&&(_.target=_.link.substring(C,S),_.link=_.link.substring(0,C-1))}if(_.text&&_.text.indexOf("|")>=0){var E=_.text.split("|");_.text=E[0],_.flowstate=E[1].trim()}r.symbols[_.key]=_}else if(b.indexOf("->")>=0)for(var k=b.split("->"),T=0,I=k.length;I>T;T++){var N=k[T],R=e(N),A=n(N),M=null;if(A.indexOf(",")>=0){var L=A.split(",");A=L[0],M=L[1].trim()}if(r.start||(r.start=R),I>T+1){var O=k[T+1];R[A]=e(O),R["direction_"+A]=M,M=null}}}return r}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in e&&e[i]===t)return i;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var p={},g={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block","class":"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},m={defaults:t,inherits:e};return a.prototype.handle=function(t){this.symbols.indexOf(t)<=-1&&this.symbols.push(t);var e=this;return t instanceof f?(t.yes=function(n){return t.yes_symbol=n,t.no_symbol&&(t.pathOk=!0),e.handle(n)},t.no=function(n){return t.no_symbol=n,t.yes_symbol&&(t.pathOk=!0),e.handle(n)}):t.then=function(n){return t.next=n,t.pathOk=!0,e.handle(n)},t},a.prototype.startWith=function(t){return this.start=t,this.handle(t)},a.prototype.render=function(){var t,e=0,n=0,r=0,i=0,a=0,o=0;for(r=0,i=this.symbols.length;i>r;r++)t=this.symbols[r],t.width>e&&(e=t.width),t.height>n&&(n=t.height);for(r=0,i=this.symbols.length;i>r;r++)t=this.symbols[r],t.shiftX(this.options.x+(e-t.width)/2+this.options["line-width"]),t.shiftY(this.options.y+(n-t.height)/2+this.options["line-width"]);for(this.start.render(),r=0,i=this.symbols.length;i>r;r++)t=this.symbols[r],t.renderLines();for(a=this.maxXFromLine,r=0,i=this.symbols.length;i>r;r++){t=this.symbols[r];var s=t.getX()+t.width,l=t.getY()+t.height;s>a&&(a=s),l>o&&(o=l)}this.paper.setSize(a+this.options["line-width"],o+this.options["line-width"])},a.prototype.clean=function(){if(this.paper){var t=this.paper.canvas;t.parentNode.removeChild(t)}},o.prototype.getAttr=function(t){if(!this.chart)return void 0;var e,n=this.chart.options?this.chart.options[t]:void 0,r=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][t]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(e=this.chart.options.flowstate[this.flowstate][t]),e||r||n},o.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},o.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},o.prototype.getX=function(){return this.group.getBBox().x},o.prototype.getY=function(){return this.group.getBBox().y},o.prototype.shiftX=function(t){this.group.transform("t"+(this.getX()+t)+","+this.getY())},o.prototype.setX=function(t){this.group.transform("t"+t+","+this.getY())},o.prototype.shiftY=function(t){this.group.transform("t"+this.getX()+","+(this.getY()+t))},o.prototype.setY=function(t){this.group.transform("t"+this.getX()+","+t)},o.prototype.getTop=function(){var t=this.getY(),e=this.getX()+this.width/2;return{x:e,y:t}},o.prototype.getBottom=function(){var t=this.getY()+this.height,e=this.getX()+this.width/2;return{x:e,y:t}},o.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX();return{x:e,y:t}},o.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.group.getBBox().width;return{x:e,y:t}},o.prototype.render=function(){if(this.next){var t=this.getAttr("line-length");if("right"===this.next_direction){var e=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(e.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+t);var n=this;!function i(){for(var e,r=!1,a=0,o=n.chart.symbols.length;o>a;a++){e=n.chart.symbols[a];var s=Math.abs(e.getCenter().x-n.next.getCenter().x);if(e.getCenter().y>n.next.getCenter().y&&s<=n.next.width/2){r=!0;break}}r&&(n.next.setX(e.getX()+e.width+t),i())}(),this.next.isPositioned=!0,this.next.render()}}else{var r=this.getBottom();this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+t),this.next.setX(r.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},o.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))},o.prototype.drawLineTo=function(t,e,n){this.connectedTo.indexOf(t)<0&&this.connectedTo.push(t);var a,o=this.getCenter().x,s=this.getCenter().y,l=(this.getTop(),this.getRight()),c=this.getBottom(),u=this.getLeft(),h=t.getCenter().x,f=t.getCenter().y,d=t.getTop(),p=t.getRight(),g=(t.getBottom(),t.getLeft()),m=o===h,v=s===f,y=f>s,b=s>f,x=o>h,w=h>o,_=0,C=this.getAttr("line-length"),S=this.getAttr("line-width");if(n&&"bottom"!==n||!m||!y)if(n&&"right"!==n||!v||!w)if(n&&"left"!==n||!v||!x)if(n&&"right"!==n||!m||!b)if(n&&"right"!==n||!m||!y)if(n&&"bottom"!==n||!x)if(n&&"bottom"!==n||!w)if(n&&"right"===n&&x)a=r(this.chart,l,[{x:l.x+C/2,y:l.y},{x:l.x+C/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+C/2;else if(n&&"right"===n&&w)a=r(this.chart,l,[{x:d.x,y:l.y},{x:d.x,y:d.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+C/2;else if(n&&"bottom"===n&&m&&b)a=r(this.chart,c,[{x:c.x,y:c.y+C/2},{x:l.x+C/2,y:c.y+C/2},{x:l.x+C/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.bottomStart=!0,t.topEnd=!0,_=c.x+C/2;else if("left"===n&&m&&b){var E=u.x-C/2;g.x<u.x&&(E=g.x-C/2),a=r(this.chart,u,[{x:E,y:u.y},{x:E,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.leftStart=!0,t.topEnd=!0,_=u.x}else"left"===n&&(a=r(this.chart,u,[{x:d.x+(u.x-d.x)/2,y:u.y},{x:d.x+(u.x-d.x)/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.leftStart=!0,t.topEnd=!0,_=u.x);else a=r(this.chart,c,[{x:c.x,y:c.y+C/2},{x:c.x+(c.x-d.x)/2,y:c.y+C/2},{x:c.x+(c.x-d.x)/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.bottomStart=!0,t.topEnd=!0,_=c.x+(c.x-d.x)/2;
else a=this.leftEnd&&b?r(this.chart,c,[{x:c.x,y:c.y+C/2},{x:c.x+(c.x-d.x)/2,y:c.y+C/2},{x:c.x+(c.x-d.x)/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e):r(this.chart,c,[{x:c.x,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.bottomStart=!0,t.topEnd=!0,_=c.x+(c.x-d.x)/2;else a=r(this.chart,l,[{x:l.x+C/2,y:l.y},{x:l.x+C/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+C/2;else a=r(this.chart,l,[{x:l.x+C/2,y:l.y},{x:l.x+C/2,y:d.y-C/2},{x:d.x,y:d.y-C/2},{x:d.x,y:d.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+C/2;else a=r(this.chart,u,p,e),this.leftStart=!0,t.rightEnd=!0,_=p.x;else a=r(this.chart,l,g,e),this.rightStart=!0,t.leftEnd=!0,_=g.x;else a=r(this.chart,c,d,e),this.bottomStart=!0,t.topEnd=!0,_=c.x;if(a){for(var k=0,T=this.chart.lines.length;T>k;k++)for(var I,N=this.chart.lines[k],R=N.attr("path"),A=a.attr("path"),M=0,L=R.length-1;L>M;M++){var O=[];O.push(["M",R[M][1],R[M][2]]),O.push(["L",R[M+1][1],R[M+1][2]]);for(var D=O[0][1],F=O[0][2],P=O[1][1],B=O[1][2],j=0,$=A.length-1;$>j;j++){var H=[];H.push(["M",A[j][1],A[j][2]]),H.push(["L",A[j+1][1],A[j+1][2]]);var U=H[0][1],q=H[0][2],z=H[1][1],G=H[1][2],W=i(D,F,P,B,U,q,z,G);if(W.onLine1&&W.onLine2){var X;q===G?U>z?(X=["L",W.x+2*S,q],A.splice(j+1,0,X),X=["C",W.x+2*S,q,W.x,q-4*S,W.x-2*S,q],A.splice(j+2,0,X),a.attr("path",A)):(X=["L",W.x-2*S,q],A.splice(j+1,0,X),X=["C",W.x-2*S,q,W.x,q-4*S,W.x+2*S,q],A.splice(j+2,0,X),a.attr("path",A)):q>G?(X=["L",U,W.y+2*S],A.splice(j+1,0,X),X=["C",U,W.y+2*S,U+4*S,W.y,U,W.y-2*S],A.splice(j+2,0,X),a.attr("path",A)):(X=["L",U,W.y-2*S],A.splice(j+1,0,X),X=["C",U,W.y-2*S,U+4*S,W.y,U,W.y+2*S],A.splice(j+2,0,X),a.attr("path",A)),j+=2,I+=2}}}this.chart.lines.push(a)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&_>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=_)},m.inherits(s,o),m.inherits(l,o),m.inherits(c,o),m.inherits(u,o),m.inherits(h,o),h.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.textMargin;return{x:e,y:t}},h.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.group.getBBox().width-this.textMargin;return{x:e,y:t}},m.inherits(f,o),f.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var t=this.getAttr("line-length");if(this.bottom_symbol){var e=this.getBottom();this.bottom_symbol.getTop(),this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+t),this.bottom_symbol.setX(e.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var n=this.getRight();if(this.right_symbol.getLeft(),!this.right_symbol.isPositioned){this.right_symbol.setY(n.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+t);var r=this;!function i(){for(var e,n=!1,a=0,o=r.chart.symbols.length;o>a;a++){e=r.chart.symbols[a];var s=Math.abs(e.getCenter().x-r.right_symbol.getCenter().x);if(e.getCenter().y>r.right_symbol.getCenter().y&&s<=r.right_symbol.width/2){n=!0;break}}n&&(r.right_symbol.setX(e.getX()+e.width+t),i())}(),this.right_symbol.isPositioned=!0,this.right_symbol.render()}}},f.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)},p.parse=d,p}),define("extensions/umlDiagrams",["underscore","utils","logger","classes/Extension","text!html/umlDiagramsSettingsBlock.html","crel","Diagram","flow-chart"],function(t,e,n,r,i,a,o,s){var l=new r("umlDiagrams","UML Diagrams",!0);return l.settingsBlock=i,l.defaultConfig={flowchartOptions:["{",'   "line-width": 2,','   "font-family": "sans-serif",','   "font-weight": "normal"',"}"].join("\n")},l.onLoadSettings=function(){e.setInputValue("#textarea-umldiagram-flowchart-options",l.config.flowchartOptions)},l.onSaveSettings=function(t,n){t.flowchartOptions=e.getInputJSONValue("#textarea-umldiagram-flowchart-options",n)},l.onPagedownConfigure=function(e){var n=document.getElementById("preview-contents");e.hooks.chain("onPreviewRefresh",function(){t.each(n.querySelectorAll(".prettyprint > .language-sequence"),function(t){try{var e=o.parse(t.textContent),n=t.parentNode,r=a("div",{"class":"sequence-diagram"});n.parentNode.replaceChild(r,n),e.drawSVG(r,{theme:"simple"})}catch(i){}}),t.each(n.querySelectorAll(".prettyprint > .language-flow"),function(t){try{var e=s.parse(t.textContent),n=t.parentNode,r=a("div",{"class":"flow-chart"});n.parentNode.replaceChild(r,n),e.drawSVG(r,JSON.parse(l.config.flowchartOptions))}catch(i){}})})},l}),define("text!html/tocSettingsBlock.html",[],function(){return'<p>Generates a table of contents when a [TOC] marker is found.</p>\n<div class="form-horizontal">\n	<div class="form-group">\n		<label class="col-sm-4 control-label" for="input-toc-marker">Marker\n			RegExp</label>\n		<div class="col-sm-7">\n		\n			<input type="text" id="input-toc-marker" class="col-sm-4 form-control">\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-4 control-label" for="input-toc-maxdepth">Max depth</label>\n		<div class="col-sm-7 form-inline">\n			<input type="text" id="input-toc-maxdepth"\n				class="col-sm-5 form-control" placeholder="6">\n		</div>\n	</div>\n	<div class="form-group">\n        <label class="col-sm-4 control-label" for="input-toc-button">Button over preview</label>\n        <div class="col-sm-7">\n        <div class="checkbox">\n            <input type="checkbox" id="input-toc-button">\n            </div>\n        </div>\n    </div>\n	\n</div>'}),define("extensions/toc",["underscore","utils","classes/Extension","text!html/tocSettingsBlock.html"],function(t,e,n,r){function i(t,e,n){this.tagName=t,this.anchor=e,this.text=n,this.children=[]}function a(e,n){function r(){void 0!==o&&(o.children.length>0&&(o.children=a(o.children,n+1)),c.push(o))}n=n||1;var o,l="H"+n,c=[];return t.each(e,function(t){t.tagName!=l?n!==s.config.maxDepth&&(void 0===o&&(o=new i),o.children.push(t)):(r(),o=t)}),r(),c}function o(){function n(n){for(var i=n.id||e.slugify(n.textContent)||"title",a=i,o=0;t.has(r,a);)a=i+"-"+ ++o;return r[a]=!0,n.id=a,a}var r={},o=[];return t.each(l.querySelectorAll("h1, h2, h3, h4, h5, h6"),function(t){o.push(new i(t.tagName,n(t),t.textContent))}),o=a(o),'<div class="toc">\n<ul>\n'+o.join("")+"</ul>\n</div>\n"}var s=new n("toc","Table of Contents",!0);s.settingsBlock=r,s.defaultConfig={marker:"\\[(TOC|toc)\\]",maxDepth:6,button:!0},s.onLoadSettings=function(){e.setInputValue("#input-toc-marker",s.config.marker),e.setInputValue("#input-toc-maxdepth",s.config.maxDepth),e.setInputChecked("#input-toc-button",s.config.button)},s.onSaveSettings=function(t,n){t.marker=e.getInputRegExpValue("#input-toc-marker",n),t.maxDepth=e.getInputIntValue("#input-toc-maxdepth"),t.button=e.getInputChecked("#input-toc-button")},i.prototype.childrenToString=function(){if(0===this.children.length)return"";var e="<ul>\n";return t.each(this.children,function(t){e+=t.toString()}),e+="</ul>\n"},i.prototype.toString=function(){var t="<li>";return this.anchor&&this.text&&(t+='<a href="#'+this.anchor+'">'+this.text+"</a>"),t+=this.childrenToString()+"</li>\n"};var l;return s.onPagedownConfigure=function(e){l=document.getElementById("preview-contents");var n=new RegExp("^\\s*"+s.config.marker+"\\s*$");e.hooks.chain("onPreviewRefresh",function(){var e=document.querySelectorAll(".table-of-contents, .toc"),r=o();t.each(l.getElementsByTagName("p"),function(t){n.test(t.innerHTML)&&(t.innerHTML=r)}),t.each(e,function(t){t.innerHTML=r}),$("#leanoteNavContentMd").height("auto");try{$(r).text()||$("#leanoteNavContentMd").html("&nbsp; &nbsp; Nothing...")}catch(i){}var a=$("#leanoteNavContentMd").height(),s=$("#mdEditor").height()-100;a>s&&$("#leanoteNavContentMd").height(s)})},s.onReady=function(){var t=!0;$(".preview-panel").on("hide.layout.toggle",function(){t=!1}).on("shown.layout.toggle",function(){t=!0}),$(".extension-preview-buttons .table-of-contents").on("click","a",function(e){!t&&e.preventDefault()})},s}),define("extensions/emailConverter",["classes/Extension"],function(t){var e=new t("emailConverter","Markdown Email",!0);return e.settingsBlock="<p>Converts email addresses in the form &lt;email@example.com&gt; into clickable links.</p>",e.onPagedownConfigure=function(t){t.getConverter().hooks.chain("postConversion",function(t){return t.replace(/<(mailto\:)?([^\s>]+@[^\s>]+\.\S+?)>/g,function(t,e,n){return'<a href="mailto:'+n+'">'+n+"</a>"})})},e}),define("text!html/scrollSyncSettingsBlock.html",[],function(){return"<p>Binds together editor and preview scrollbars.</p>\n<blockquote>\n	<p><b>Note:</b> The mapping between Markdown and HTML is based on the\n	position of the title elements (h1, h2...) in the page. Therefore if\n	your document does not contain any title, the mapping will be linear and\n	consequently less accurate.</p>\n</blockquote>"}),define("extensions/scrollSync",["underscore","classes/Extension","text!html/scrollSyncSettingsBlock.html"],function(t,e,n){function r(e,n,r){var i,a=t.find(n,function(t,n){return i=n,e<t.endOffset});if(void 0!==a){var o=(e-a.startOffset)/(a.height||1),s=r[i];return s.startOffset+s.height*o}}function i(t,e,n,r,i){function a(){var l=Date.now(),c=(l-s)/200;if(1>c){var u=e+o*Math.cos((1-c)*Math.PI/2);t.scrollTop=u,r(u),h=setTimeout(a,1)}else f=void 0,t.scrollTop=n,setTimeout(i,100)}f&&(clearTimeout(h),f()),f=i;var o=n-e,s=Date.now();a()}var a=new e("scrollSync","Scroll Sync",!0,!0);a.settingsBlock=n;var o;a.onSectionsCreated=function(t){o=t};var s,l,c,u,h,f,d=[],p=[],g=t.debounce(function(){d=[];var e,n;t.each(s.querySelectorAll(".wmd-input-section"),function(t){if(void 0===e)return void(e=0);t=t.firstChild;var n=t.offsetTop;d.push({startOffset:e,endOffset:n,height:n-e}),e=n}),n=s.scrollHeight,d.push({startOffset:e,endOffset:n,height:n-e}),p=[];var r;t.each(l.querySelectorAll(".wmd-preview-section"),function(t){if(void 0===r)return void(r=0);var e=t.offsetTop;p.push({startOffset:r,endOffset:e,height:e-r}),r=e}),n=l.scrollHeight,p.push({startOffset:r,endOffset:n,height:n-r}),c=-10,u=-10,w()},500),m=!0,v=!1,y=!1,b=!1,x=!1,w=t.throttle(function(){if(m&&0!==d.length&&d.length===p.length){var e=s.scrollTop;0>e&&(e=0);var n,a=l.scrollTop;if(v===!0){if(Math.abs(e-c)<=9)return;if(v=!1,c=e,n=r(e,d,p),n=t.min([n,l.scrollHeight-l.offsetHeight]),Math.abs(n-a)<=9)return void(u=a);i(l,a,n,function(t){x=!0,u=t},function(){x=!1})}else if(y===!0){if(Math.abs(a-u)<=9)return;if(y=!1,u=a,n=r(a,p,d),n=t.min([n,s.scrollHeight-s.offsetHeight]),Math.abs(n-e)<=9)return void(c=e);i(s,e,n,function(t){b=!0,c=t},function(){b=!1})}}},100);a.onLayoutResize=function(){v=!0,g()},a.onFileClosed=function(){d=[]};var _=!1;a.onReady=function(){l=document.querySelector(".preview-container"),s=document.querySelector("#wmd-input"),$(l).scroll(function(){x===!1&&_===!1&&(y=!0,v=!1,w()),_=!1}),$(s).scroll(function(){b===!1&&(v=!0,y=!1,w())}),$(".preview-panel").on("hide.layout.toggle",function(){m=!1}).on("shown.layout.toggle",function(){m=!0}),$(".extension-preview-buttons .table-of-contents").on("click","a",function(t){t.preventDefault();var e=this.hash,n=$(e);if(n.length){var i=n[0].getBoundingClientRect().top-l.getBoundingClientRect().top+l.scrollTop;l.scrollTop=i;var a=r(i,p,d);s.scrollTop=a}})};var C,S;return a.onPagedownConfigure=function(t){C=document.getElementById("preview-contents"),t.getConverter().hooks.chain("postConversion",function(t){return S=C.offsetHeight,C.style.height=S+"px",t})},a.onPreviewFinished=function(){C.style.removeProperty("height");var t=C.offsetHeight;v=!0,S>t&&(_=!0),g()},a}),define("text!extensions/shortcutsDefaultMapping.settings",[],function(){return"{\n    'mod+b': bindPagedownButton('bold'),\n    'mod+i': bindPagedownButton('italic'),\n    'mod+l': bindPagedownButton('link'),\n    'mod+q': bindPagedownButton('quote'),\n    'mod+k': bindPagedownButton('code'),\n    'mod+g': bindPagedownButton('image'),\n    'mod+o': bindPagedownButton('olist'),\n    'mod+u': bindPagedownButton('ulist'),\n    'mod+h': bindPagedownButton('heading'),\n    'mod+r': bindPagedownButton('hr'),\n    'mod+z': bindPagedownButton('undo'),\n    'mod+y': bindPagedownButton('redo'),\n    'mod+shift+z': bindPagedownButton('redo'),\n    'mod+m': function(evt) {\n        $('.button-open-discussion').click();\n        evt.preventDefault();\n    },\n    '= = > space': function() {\n        expand('==> ', ' ');\n    },\n    '< = = space': function() {\n        expand('<== ', ' ');\n    },\n    'S t a c k E d i t': function() {\n        eventMgr.onMessage(\"You are stunned!!! Aren't you?\");\n    }\n}\n"}),define("text!html/shortcutsSettingsBlock.html",[],function(){return'<p>Maps keyboard shortcuts to JavaScript functions.</p>\n<div class="form-horizontal">\n	<div class="form-group">\n		<label class="col-sm-3 control-label" for="textarea-shortcuts-mapping">Mapping\n			<a href="#" class="tooltip-shortcuts-extension">(?)</a>\n		</label>\n		<div class="col-sm-8">\n			<textarea id="textarea-shortcuts-mapping" class="form-control"></textarea>\n		</div>\n	</div>\n</div>\n'}),define("text!html/tooltipSettingsShortcutsExtension.html",[],function(){return'You can create expanding macros like this:\n<br />\n<br />\n\'- - > space\': function() {\n<br />\n	expand(\'--> \', \' \');\n<br />\n}\n<br />\n<br />\n<a target="_blank"\n	href="http://craig.is/killing/mice">More\n	info</a>\n<br />\n<br />\n<b class="text-danger"><i class="icon-attention"></i> Careful! This is subject to malicious code. Don\'t copy/paste untrusted content.</b>\n'}),define("extensions/shortcuts",["underscore","utils","mousetrap","classes/Extension","text!extensions/shortcutsDefaultMapping.settings","text!html/shortcutsSettingsBlock.html","text!html/tooltipSettingsShortcutsExtension.html"],function(_,utils,mousetrap,Extension,shortcutsDefaultMapping,shortcutsSettingsBlockHTML,tooltipSettingsShortcutsExtensionHTML){function bindPagedownButton(t){return function(e){pagedownEditor.uiManager.doClick(pagedownEditor.uiManager.buttons[t]),e.preventDefault()}}function expand(t,e){utils.defer(function(){require("editor").replacePreviousText(t,e)})}var shortcuts=new Extension("shortcuts","Shortcuts",!0,!0);shortcuts.settingsBlock=shortcutsSettingsBlockHTML,shortcuts.defaultConfig={mapping:shortcutsDefaultMapping};var eventMgr,pagedownEditor;return shortcuts.onEventMgrCreated=function(t){eventMgr=t,eventMgr.addListener("onPagedownConfigure",function(t){pagedownEditor=t})},shortcuts.onLoadSettings=function(){utils.setInputValue("#textarea-shortcuts-mapping",shortcuts.config.mapping)},shortcuts.onSaveSettings=function(newConfig,event){newConfig.code=utils.getInputValue("#textarea-shortcuts-mapping");try{eval("var test = "+newConfig.code)}catch(e){eventMgr.onError(e),utils.getInputTextValue("#textarea-shortcuts-mapping",event,/^$/)}},shortcuts.onInit=function(){try{var input=$(".editor-content");mousetrap.stopCallback=function(t,e){return e!==input[0]};var shortcutMap;eval("shortcutMap = "+shortcuts.config.mapping),_.each(shortcutMap,function(t,e){mousetrap.bind(e,t)})}catch(e){console.error(e)}},shortcuts.onReady=function(){},shortcuts}),define("text!html/findReplace.html",[],function(){return'<button type="button" class="close button-find-replace-dismiss"></button>\n<div class="form-inline">\n    <div class="form-group">\n        <label for="input-find-replace-search-for">Search for</label>\n        <input class="form-control" id="input-find-replace-search-for" placeholder="Search for">\n    </div>\n    <div class="form-group">\n        <label for="input-find-replace-replace-with">Replace with</label>\n        <input class="form-control" id="input-find-replace-replace-with" placeholder="Replace with">\n    </div>\n</div>\n<div class="pull-right">\n    <div class="help-block text-right">\n        <span class="found-counter">0</span> found\n    </div>\n    <div>\n        <button type="button" class="btn btn-primary search-button">Search</button>\n        <button type="button" class="btn btn-default replace-button">Replace</button>\n        <button type="button" class="btn btn-default replace-all-button">All</button>\n    </div>\n</div>\n<div class="pull-left">\n    <div class="checkbox">\n        <label>\n            <input type="checkbox" class="checkbox-case-sensitive"> Case sensitive\n        </label>\n    </div>\n    <div class="checkbox">\n        <label>\n            <input type="checkbox" class="checkbox-regexp"> Regular expression\n        </label>\n    </div>\n</div>\n'}),define("text!html/findReplaceSettingsBlock.html",[],function(){return'<p>Helps find and replace text in the current document.</p>\n<div class="form-horizontal">\n	<div class="form-group">\n		<label class="col-sm-5 control-label"\n			for="input-find-replace-shortcut">Shortcut <a href="http://craig.is/killing/mice#keys" target="_blank">(?)</a></label>\n		<div class="col-sm-6">\n			<input type="text" id="input-find-replace-shortcut"\n				class="form-control">\n		</div>\n	</div>\n</div>'}),define("extensions/findReplace",["underscore","crel","utils","classes/Extension","mousetrap","rangy","text!html/findReplace.html","text!html/findReplaceSettingsBlock.html"],function(t,e,n,r,i,a,o,s){function l(){c(),R.forEach(function(t){try{b.undoToRange(t)}catch(e){}}),R=[]}function c(){if(w){try{w&&x.undoToRange(w)}catch(t){}w=void 0}}function u(t){function e(t){return t.container===s.container?{container:o.endContainer.parentElement.nextSibling,offsetInContainer:t.offsetInContainer-s.offsetInContainer,offset:t.offset}:t}if(D){var n=S.val(),r=T.prop("checked"),i=I.prop("checked");if(t||n!=M||r!=L||i!=O){M=n,L=r,O=i,l();var o,s={};A=[];var c=0,u=n.length;if(u)try{var h=r?"gm":"gmi";if(n=i?n:n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),N=new RegExp(n,h),v.getValue().replace(N,function(t,e){A.push({start:e,end:e+t.length})}),c=A.length,A.length<200){var f=[];A.forEach(function(t){f.push(t.start),f.push(t.end)}),f=v.selectionMgr.findOffsets(f);for(var d=0;d<f.length;d+=2){var p=f[d],g=f[d+1],m=e(p),y=e(g),x=a.createRange();x.setStart(m.container,m.offsetInContainer),x.setEnd(y.container,y.offsetInContainer),s=g,o=x,b.applyToRange(x),R[p.offset]=x}v.selectionMgr.hasFocus&&v.selectionMgr.updateSelectionRange()}}catch(w){}k.innerHTML=c}}}function h(){y.onEditorPopover(),D=!0,C.show(),S.focus()[0].setSelectionRange(0,S.val().length),v.selectionMgr.adjustTop=50,v.selectionMgr.adjustBottom=220,u(!0)}function f(){D=!1,C.hide(),l(),v.selectionMgr.adjustTop=0,v.selectionMgr.adjustBottom=0,v.focus()}function d(){c();var e=Math.min(v.selectionMgr.selectionStart,v.selectionMgr.selectionEnd),n=t.find(A,function(t){return t.start>e});if(n||(n=t.first(A)),n){if(w=R[n.start],!w){var r=v.selectionMgr.createRange(n.start,n.end);w=a.createRange(),w.setStart(r.startContainer,r.startOffset),w.setEnd(r.endContainer,r.endOffset)}x.applyToRange(w),w.start=n.start,w.end=n.end,v.selectionMgr.setSelectionStartEnd(n.start,n.end),v.selectionMgr.updateCursorCoordinates(!0)}}function p(){if(!w)return d();var t=E.val();v.replace(w.start,w.end,t),setTimeout(function(){d(),E.focus()},1)}function g(){var t=E.val();v.replaceAll(N,t)}var m=new r("findReplace","Find and Replace",!0,!0);m.settingsBlock=s,m.defaultConfig={findReplaceShortcut:"mod+f"},m.onLoadSettings=function(){n.setInputValue("#input-find-replace-shortcut",m.config.findReplaceShortcut)},m.onSaveSettings=function(t,e){t.findReplaceShortcut=n.getInputTextValue("#input-find-replace-shortcut",e)};var v;m.onEditorCreated=function(t){v=t};var y;m.onEventMgrCreated=function(t){y=t};var b,x,w,_,C,S,E,k,T,I,N,R=[],A=[],M="",L=!1,O=!1,D=!1;return m.onEditorPopover=function(){f()},m.onContentChanged=t.bind(u,null,!0),m.onFileOpen=t.bind(u,null,!0),m.onReady=function(){b=a.createCssClassApplier("find-replace-highlight",{normalize:!1}),x=a.createCssClassApplier("find-replace-select",{normalize:!1}),_=document.querySelector("#wmd-input .editor-content");var n=e("div",{"class":"find-replace"});C=$(n).hide(),n.innerHTML=o,document.querySelector(".layout-wrapper-l2").appendChild(n),$(".button-find-replace-dismiss").click(function(){f()}),k=n.querySelector(".found-counter"),T=C.find(".checkbox-case-sensitive").change(t.bind(u,null,!1)),I=C.find(".checkbox-regexp").change(t.bind(u,null,!1)),C.find(".search-button").click(d),S=$("#input-find-replace-search-for").keyup(t.bind(u,null,!1)),C.find(".replace-button").click(p),E=$("#input-find-replace-replace-with"),C.find(".replace-all-button").click(g),$().add(S).add(E).keydown(function(t){13===t.which&&(t.preventDefault(),d())}),i.bind(m.config.findReplaceShortcut,function(t){var e=v.selectionMgr.getSelectedText();e&&S.val(e),h(),t.preventDefault()})},m}),define("text!html/htmlSanitizerSettingsBlock.html",[],function(){return'<p>Prevents cross-site-scripting attacks (XSS).</p>\n<p class="alert alert-danger"><i class="icon-attention"></i> <b>Careful:</b> Disable at your own risk!</p>\n'}),define("extensions/htmlSanitizer",["underscore","utils","logger","classes/Extension","text!html/htmlSanitizerSettingsBlock.html"],function(t,e,n,r,i){function a(t,n){var r,i=n?p:d;return r=e.urlResolve(t).href,""===r||r.match(i)?void 0:"unsafe:"+r}function o(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}function s(t,e){function n(t,n,i,a){if(n=n&&n.toLowerCase(),I[n])for(;s.last()&&N[s.last()];)r("",s.last());T[n]&&s.last()==n&&r("",n),a=S[n]||!!a,a||s.push(n);var o={};i.replace(v,function(t,e,n,r,i){var a=n||r||i||"";o[e]=l(a)}),e.start&&e.start(n,o,a)}function r(t,n){var r,i=0;if(n=n&&n.toLowerCase())for(i=s.length-1;i>=0&&s[i]!=n;i--);if(i>=0){for(r=s.length-1;r>=i;r--)e.end&&e.end(s[r]);s.length=i}}var i,a,o,s=[],c=t;for(s.last=function(){return s[s.length-1]};t;){if(a=!0,s.last()&&R[s.last()])t=t.replace(new RegExp("(.*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(t,n){return n=n.replace(x,"$1").replace(_,"$1"),e.chars&&e.chars(l(n)),""}),r("",s.last());else if(0===t.indexOf("<!--")?(i=t.indexOf("--",4),i>=0&&t.lastIndexOf("-->",i)===i&&(e.comment&&e.comment(t.substring(4,i)),t=t.substring(i+3),a=!1)):w.test(t)?(o=t.match(w),o&&(t=t.replace(o[0],""),a=!1)):b.test(t)?(o=t.match(m),o&&(t=t.substring(o[0].length),o[0].replace(m,r),a=!1)):y.test(t)&&(o=t.match(g),o&&(t=t.substring(o[0].length),o[0].replace(g,n),a=!1)),a){i=t.indexOf("<");var u=0>i?t:t.substring(0,i);t=0>i?"":t.substring(i),e.chars&&e.chars(l(u))}if(t==c)return s.reverse(),s.forEach(function(t){f.push("</"),f.push(t),f.push(">")});c=t}r()}function l(t){if(!t)return"";var e=D.exec(t),n=e[1],r=e[3],i=e[2];return i&&(O.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in O?O.textContent:O.innerText),n+i+r}function c(t){return t.replace(/&/g,"&amp;").replace(C,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,n){var r=!1,i=t.bind(e.push,e);return{start:function(e,a,o){e=e&&e.toLowerCase(),!r&&R[e]&&(r=e),r||A[e]!==!0||(i("<"),i(e),t.forEach(a,function(t,r){var a=r&&r.toLowerCase(),o="img"===e&&"src"===a||"background"===a;L[a]!==!0||M[a]===!0&&!n(t,o)||(i(" "),i(r),i('="'),i(c(t)),i('"'))}),i(o?"/>":">"))},end:function(t){t=t&&t.toLowerCase(),r||A[t]!==!0||(i("</"),i(t),i(">")),t==r&&(r=!1)},chars:function(t){r||i(c(t))},comment:function(t){r||(i("<!--"),i(c(t)),i("-->"))}}}var h=new r("htmlSanitizer","HTML Sanitizer",!0);h.settingsBlock=i;var f;h.onPagedownConfigure=function(t){var e=t.getConverter();e.hooks.chain("postConversion",function(t){return f=[],t.split('<div class="se-preview-section-delimiter"></div>').forEach(function(t){s(t,u(f,function(t,e){return!/^unsafe/.test(a(t,e))})),f.push('<div class="se-preview-section-delimiter"></div>')}),f.slice(0,-1).join("")})};var d=/^\s*(https?|ftp|mailto|tel|file):/,p=/^\s*(https?|ftp|file):|data:image\//,g=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,m=/^<\s*\/\s*([\w:-]+)[^>]*>/,v=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,y=/^</,b=/^<\s*\//,x=/<!--(.*?)-->/g,w=/<!DOCTYPE([^>]*?)>/i,_=/<!\[CDATA\[(.*?)]]>/g,C=/([^\#-~| |!])/g,S=o("area,br,col,hr,img,wbr"),E=o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),k=o("rp,rt"),T=t.extend({},k,E),I=t.extend({},E,o("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),N=t.extend({},k,o("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),R=o("script,style");I.iframe=!0;var A=t.extend({},S,I,N,T),M=o("background,cite,href,longdesc,src,usemap"),L=t.extend({},M,o("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"));L.id=!0,L.allowfullscreen=!0;var O=document.createElement("pre"),D=/^(\s*)([\s\S]*?)(\s*)$/;return h}),function(t){var e="waitForImages";t.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]},t.expr[":"].uncached=function(e){if(!t(e).is('img[src!=""]'))return!1;var n=new Image;return n.src=e.src,!n.complete},t.fn.waitForImages=function(n,r,i){var a=0,o=0;if(t.isPlainObject(arguments[0])&&(i=arguments[0].waitForAll,r=arguments[0].each,n=arguments[0].finished),n=n||t.noop,r=r||t.noop,i=!!i,!t.isFunction(n)||!t.isFunction(r))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var s=t(this),l=[],c=t.waitForImages.hasImageProperties||[],u=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?s.find("*").andSelf().each(function(){var e=t(this);e.is("img:uncached")&&l.push({src:e.attr("src"),element:e[0]}),t.each(c,function(t,n){var r,i=e.css(n);if(!i)return!0;for(;r=u.exec(i);)l.push({src:r[2],element:e[0]})})}):s.find("img:uncached").each(function(){l.push({src:this.src,element:this})}),a=l.length,o=0,0===a&&n.call(s[0]),t.each(l,function(i,l){var c=new Image;t(c).bind("load."+e+" error."+e,function(t){return o++,r.call(l.element,o,a,"load"==t.type),o==a?(n.call(s[0]),!1):void 0}),c.src=l.src})})}}(jQuery),define("jquery-waitforimages",function(){}),define("eventMgr",["underscore","crel","mousetrap","utils","logger","classes/Extension","settings","extensions/yamlFrontMatterParser","extensions/markdownSectionParser","extensions/partialRendering","extensions/workingIndicator","extensions/notifications","extensions/umlDiagrams","extensions/markdownExtra","extensions/toc","extensions/mathJax","extensions/emailConverter","extensions/scrollSync","extensions/shortcuts","extensions/findReplace","extensions/htmlSanitizer","jquery-waitforimages"],function(t,e,n,r,i,a,o){function s(e){return t.chain(h).map(function(t){return t.enabled&&t[e]}).compact().value()}function l(e){return d[e]=s(e),function(){i.log(e,arguments);var n=arguments;t.each(d[e],function(e){try{e.apply(null,n)}catch(r){console.error(t.isObject(r)?r.stack:r)}})}}function c(t){u[t]=l(t)}var u={},h=t.chain(arguments).map(function(t){return t instanceof a&&t}).compact().value(),f=o.extensionSettings||{};t.each(h,function(e){e.config=t.extend({},e.defaultConfig,f[e.extensionId]),e.enabled=window.viewerMode===!0&&e.disableInViewer===!0?!1:!e.isOptional||void 0===e.config.enabled||e.config.enabled===!0});var d={};u.addListener=function(t,e){try{d[t].push(e)}catch(n){console.error("No event listener called "+t)}},l("onInit")(),u.onLoadSettings=function(){i.log("onLoadSettings"),t.each(h,function(t){var e=!t.isOptional||void 0===t.config.enabled||t.config.enabled===!0;r.setInputChecked("#input-enable-extension-"+t.extensionId,e),"markdownExtra"==t.extensionId?r.setInputChecked("#input-settings-markdown-extra",e):"mathJax"==t.extensionId&&r.setInputChecked("#input-settings-mathjax",e);var n=t.onLoadSettings;n&&n()})},u.onSaveSettings=function(e,n){i.log("onSaveSettings"),t.each(h,function(i){var a=t.extend({},i.defaultConfig);a.enabled=r.getInputChecked("#input-enable-extension-"+i.extensionId);var o;"markdownExtra"==i.extensionId?(o=r.getInputChecked("#input-settings-markdown-extra"),o!=i.enabled&&(a.enabled=o)):"mathJax"==i.extensionId&&(o=r.getInputChecked("#input-settings-mathjax"),o!=i.enabled&&(a.enabled=o));var s=i.onSaveSettings;s&&s(a,n),e[i.extensionId]=a})},c("onMessage"),c("onError"),c("onOfflineChanged"),c("onUserActive"),c("onAsyncRunning"),c("onPeriodicRun"),c("onEditorCreated"),c("onFileMgrCreated"),c("onSynchronizerCreated"),c("onPublisherCreated"),c("onSharingCreated"),c("onEventMgrCreated"),c("onFileCreated"),c("onFileDeleted"),c("onFileSelected"),c("onFileOpen"),c("onFileClosed"),c("onContentChanged"),c("onTitleChanged"),c("onFoldersChanged"),c("onSyncRunning"),c("onSyncSuccess"),c("onSyncImportSuccess"),c("onSyncExportSuccess"),c("onSyncRemoved"),c("onPublishRunning"),c("onPublishSuccess"),c("onNewPublishSuccess"),c("onPublishRemoved"),c("onLayoutCreated"),c("onLayoutResize"),c("onExtensionButtonResize"),c("onPagedownConfigure"),c("onSectionsCreated"),c("onCursorCoordinates"),c("onEditorPopover"),c("onDiscussionCreated"),c("onDiscussionRemoved"),c("onCommentsChanged"),c("onTweet");var p,g,m=l("onPreviewFinished"),v=s("onAsyncPreview");u.onAsyncPreview=function(){function e(n){var i=n.length?n.shift():function(){setTimeout(function(){var e="";t.each(p.children,function(t){e+=t.innerHTML});var n=r.trim(e),i=n.replace(/ <span class="comment label label-danger">.*?<\/span> /g,"");m(n,i)},10)};i(function(){e(n)})}i.log("onAsyncPreview"),e(v.concat([function(t){g.waitForImages(t)}]))};var y=l("onReady");return u.onReady=function(){p=document.getElementById("preview-contents"),g=$(p);var r=function(n){var r=e("div",{"class":"btn-group"}),i=n();return t.isString(i)?r.innerHTML=i:t.isElement(i)&&r.appendChild(i),r};window.viewerMode===!1,i.log("onCreatePreviewButton");var a=s("onCreatePreviewButton"),o=document.createDocumentFragment();t.each(a,function(t){o.appendChild(r(t))});var l=document.querySelector(".extension-preview-buttons");l.appendChild(o),n.bind("escape",function(){u.onEditorPopover()}),y()},u.onEventMgrCreated(u),u}),function(){var t=/\blang(?:uage)?-(?!\*)(\w+)\b/i,e=self.Prism={util:{type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},clone:function(t){var n=e.util.type(t);switch(n){case"Object":var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=e.util.clone(t[i]));return r;case"Array":return t.slice()}return t}},languages:{extend:function(t,n){var r=e.util.clone(e.languages[t]);for(var i in n)r[i]=n[i];return r},insertBefore:function(t,n,r,i){i=i||e.languages;var a=i[t],o={};for(var s in a)if(a.hasOwnProperty(s)){if(s==n)for(var l in r)r.hasOwnProperty(l)&&(o[l]=r[l]);o[s]=a[s]}return i[t]=o},DFS:function(t,n){for(var r in t)n.call(t,r,t[r]),"Object"===e.util.type(t)&&e.languages.DFS(t[r],n)}},highlightAll:function(t,n){for(var r,i=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),a=0;r=i[a++];)e.highlightElement(r,t===!0,n)},highlightElement:function(r,i,a){for(var o,s,l=r;l&&!t.test(l.className);)l=l.parentNode;if(l&&(o=(l.className.match(t)||[,""])[1],s=e.languages[o]),s){r.className=r.className.replace(t,"").replace(/\s+/g," ")+" language-"+o,l=r.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+o);var c=r.textContent;if(c){c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var u={element:r,language:o,grammar:s,code:c};if(e.hooks.run("before-highlight",u),i&&self.Worker){var h=new Worker(e.filename);h.onmessage=function(t){u.highlightedCode=n.stringify(JSON.parse(t.data),o),e.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,a&&a.call(u.element),e.hooks.run("after-highlight",u)
},h.postMessage(JSON.stringify({language:u.language,code:u.code}))}else u.highlightedCode=e.highlight(u.code,u.grammar,u.language),e.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,a&&a.call(r),e.hooks.run("after-highlight",u)}}},highlight:function(t,r,i){return n.stringify(e.tokenize(t,r),i)},tokenize:function(t,n){var r=e.Token,i=[t],a=n.rest;if(a){for(var o in a)n[o]=a[o];delete n.rest}t:for(var o in n)if(n.hasOwnProperty(o)&&n[o]){var s=n[o],l=s.inside,c=!!s.lookbehind,u=0;s=s.pattern||s;for(var h=0;h<i.length;h++){var f=i[h];if(i.length>t.length)break t;if(!(f instanceof r)){s.lastIndex=0;var d=s.exec(f);if(d){c&&(u=d[1].length);var p=d.index-1+u,d=d[0].slice(u),g=d.length,m=p+g,v=f.slice(0,p+1),y=f.slice(m+1),b=[h,1];v&&b.push(v);var x=new r(o,l?e.tokenize(d,l):d);b.push(x),y&&b.push(y),Array.prototype.splice.apply(i,b)}}}}return i},hooks:{all:{},add:function(t,n){var r=e.hooks.all;r[t]=r[t]||[],r[t].push(n)},run:function(t,n){var r=e.hooks.all[t];if(r&&r.length)for(var i,a=0;i=r[a++];)i(n)}}},n=e.Token=function(t,e){this.type=t,this.content=e};if(n.stringify=function(t,r,i){if("string"==typeof t)return t;if("[object Array]"==Object.prototype.toString.call(t))return t.map(function(e){return n.stringify(e,r,t)}).join("");var a={type:t.type,content:n.stringify(t.content,r,i),tag:"span",classes:["token",t.type],attributes:{},language:r,parent:i};"comment"==a.type&&(a.attributes.spellcheck="true"),e.hooks.run("wrap",a);var o="";for(var s in a.attributes)o+=s+'="'+(a.attributes[s]||"")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'" '+o+">"+a.content+"</"+a.tag+">"},!self.document)return void self.addEventListener("message",function(t){var n=JSON.parse(t.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(e.tokenize(i,e.languages[r]))),self.close()},!1);var r=document.getElementsByTagName("script");r=r[r.length-1],r&&(e.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",e.highlightAll))}(),define("prism-core",function(t){return function(){var e;return e||t.Prism}}(this));var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(t,e,n,r){"undefined"==typeof r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[DIFF_EQUAL,t]]:[];"undefined"==typeof n&&(n=!0);var a=n,o=this.diff_commonPrefix(t,e),s=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var c=this.diff_compute_(t,e,a,i);return s&&c.unshift([DIFF_EQUAL,s]),l&&c.push([DIFF_EQUAL,l]),this.diff_cleanupMerge(c),c},diff_match_patch.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[DIFF_INSERT,e]];if(!e)return[[DIFF_DELETE,t]];var a=t.length>e.length?t:e,o=t.length>e.length?e:t,s=a.indexOf(o);if(-1!=s)return i=[[DIFF_INSERT,a.substring(0,s)],[DIFF_EQUAL,o],[DIFF_INSERT,a.substring(s+o.length)]],t.length>e.length&&(i[0][0]=i[2][0]=DIFF_DELETE),i;if(1==o.length)return[[DIFF_DELETE,t],[DIFF_INSERT,e]];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],u=l[1],h=l[2],f=l[3],d=l[4],p=this.diff_main(c,h,n,r),g=this.diff_main(u,f,n,r);return p.concat([[DIFF_EQUAL,d]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},diff_match_patch.prototype.diff_lineMode_=function(t,e,n){var r=this.diff_linesToChars_(t,e);t=r.chars1,e=r.chars2;var i=r.lineArray,a=this.diff_main(t,e,!1,n);this.diff_charsToLines_(a,i),this.diff_cleanupSemantic(a),a.push([DIFF_EQUAL,""]);for(var o=0,s=0,l=0,c="",u="";o<a.length;){switch(a[o][0]){case DIFF_INSERT:l++,u+=a[o][1];break;case DIFF_DELETE:s++,c+=a[o][1];break;case DIFF_EQUAL:if(s>=1&&l>=1){a.splice(o-s-l,s+l),o=o-s-l;for(var r=this.diff_main(c,u,!1,n),h=r.length-1;h>=0;h--)a.splice(o,0,r[h]);o+=r.length}l=0,s=0,c="",u=""}o++}return a.pop(),a},diff_match_patch.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,a=Math.ceil((r+i)/2),o=a,s=2*a,l=new Array(s),c=new Array(s),u=0;s>u;u++)l[u]=-1,c[u]=-1;l[o+1]=0,c[o+1]=0;for(var h=r-i,f=h%2!=0,d=0,p=0,g=0,m=0,v=0;a>v&&!((new Date).getTime()>n);v++){for(var y=-v+d;v-p>=y;y+=2){var b,x=o+y;b=y==-v||y!=v&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1;for(var w=b-y;r>b&&i>w&&t.charAt(b)==e.charAt(w);)b++,w++;if(l[x]=b,b>r)p+=2;else if(w>i)d+=2;else if(f){var _=o+h-y;if(_>=0&&s>_&&-1!=c[_]){var C=r-c[_];if(b>=C)return this.diff_bisectSplit_(t,e,b,w,n)}}}for(var S=-v+g;v-m>=S;S+=2){var C,_=o+S;C=S==-v||S!=v&&c[_-1]<c[_+1]?c[_+1]:c[_-1]+1;for(var E=C-S;r>C&&i>E&&t.charAt(r-C-1)==e.charAt(i-E-1);)C++,E++;if(c[_]=C,C>r)m+=2;else if(E>i)g+=2;else if(!f){var x=o+h-S;if(x>=0&&s>x&&-1!=l[x]){var b=l[x],w=o+b-x;if(C=r-C,b>=C)return this.diff_bisectSplit_(t,e,b,w,n)}}}}return[[DIFF_DELETE,t],[DIFF_INSERT,e]]},diff_match_patch.prototype.diff_bisectSplit_=function(t,e,n,r,i){var a=t.substring(0,n),o=e.substring(0,r),s=t.substring(n),l=e.substring(r),c=this.diff_main(a,o,!1,i),u=this.diff_main(s,l,!1,i);return c.concat(u)},diff_match_patch.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,a=-1,o=r.length;a<t.length-1;){a=t.indexOf("\n",n),-1==a&&(a=t.length-1);var s=t.substring(n,a+1);n=a+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?e+=String.fromCharCode(i[s]):(e+=String.fromCharCode(o),i[s]=o,r[o++]=s)}return e}var r=[],i={};r[0]="";var a=n(t),o=n(e);return{chars1:a,chars2:o,lineArray:r}},diff_match_patch.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],a=0;a<r.length;a++)i[a]=e[r.charCodeAt(a)];t[n][1]=i.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,a=0;i>n;)t.substring(a,i)==e.substring(a,i)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return i},diff_match_patch.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,a=0;i>n;)t.substring(t.length-i,t.length-a)==e.substring(e.length-i,e.length-a)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return i},diff_match_patch.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):r>n&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var a=0,o=1;;){var s=t.substring(i-o),l=e.indexOf(s);if(-1==l)return a;o+=l,(0==l||t.substring(i-o)==e.substring(0,o))&&(a=o,o++)}},diff_match_patch.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var r,i,a,s,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(l,c+1));){var h=o.diff_commonPrefix(t.substring(n),e.substring(c)),f=o.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<f+h&&(u=e.substring(c-f,c)+e.substring(c,c+h),r=t.substring(0,n-f),i=t.substring(n+h),a=e.substring(0,c-f),s=e.substring(c+h))}return 2*u.length>=t.length?[r,i,a,s,u]:null}if(this.Diff_Timeout<=0)return null;var r=t.length>e.length?t:e,i=t.length>e.length?e:t;if(r.length<4||2*i.length<r.length)return null;var a,o=this,s=n(r,i,Math.ceil(r.length/4)),l=n(r,i,Math.ceil(r.length/2));if(!s&&!l)return null;a=l?s&&s[4].length>l[4].length?s:l:s;var c,u,h,f;t.length>e.length?(c=a[0],u=a[1],h=a[2],f=a[3]):(h=a[0],f=a[1],c=a[2],u=a[3]);var d=a[4];return[c,u,h,f,d]},diff_match_patch.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,a=0,o=0,s=0,l=0,c=0;a<t.length;)t[a][0]==DIFF_EQUAL?(n[r++]=a,o=l,s=c,l=0,c=0,i=t[a][1]):(t[a][0]==DIFF_INSERT?l+=t[a][1].length:c+=t[a][1].length,i&&i.length<=Math.max(o,s)&&i.length<=Math.max(l,c)&&(t.splice(n[r-1],0,[DIFF_DELETE,i]),t[n[r-1]+1][0]=DIFF_INSERT,r--,r--,a=r>0?n[r-1]:-1,o=0,s=0,l=0,c=0,i=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==DIFF_DELETE&&t[a][0]==DIFF_INSERT){var u=t[a-1][1],h=t[a][1],f=this.diff_commonOverlap_(u,h),d=this.diff_commonOverlap_(h,u);f>=d?(f>=u.length/2||f>=h.length/2)&&(t.splice(a,0,[DIFF_EQUAL,h.substring(0,f)]),t[a-1][1]=u.substring(0,u.length-f),t[a+1][1]=h.substring(f),a++):(d>=u.length/2||d>=h.length/2)&&(t.splice(a,0,[DIFF_EQUAL,u.substring(0,d)]),t[a-1][0]=DIFF_INSERT,t[a-1][1]=h.substring(0,h.length-d),t[a+1][0]=DIFF_DELETE,t[a+1][1]=u.substring(d),a++),a++}a++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),i=n.match(diff_match_patch.nonAlphaNumericRegex_),a=r.match(diff_match_patch.nonAlphaNumericRegex_),o=i&&n.match(diff_match_patch.whitespaceRegex_),s=a&&r.match(diff_match_patch.whitespaceRegex_),l=o&&n.match(diff_match_patch.linebreakRegex_),c=s&&r.match(diff_match_patch.linebreakRegex_),u=l&&t.match(diff_match_patch.blanklineEndRegex_),h=c&&e.match(diff_match_patch.blanklineStartRegex_);return u||h?5:l||c?4:i&&!o&&s?3:o||s?2:i||a?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==DIFF_EQUAL&&t[n+1][0]==DIFF_EQUAL){var r=t[n-1][1],i=t[n][1],a=t[n+1][1],o=this.diff_commonSuffix(r,i);if(o){var s=i.substring(i.length-o);r=r.substring(0,r.length-o),i=s+i.substring(0,i.length-o),a=s+a}for(var l=r,c=i,u=a,h=e(r,i)+e(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var f=e(r,i)+e(i,a);f>=h&&(h=f,l=r,c=i,u=a)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,u?t[n+1][1]=u:(t.splice(n+1,1),n--))}n++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,diff_match_patch.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,a=0,o=!1,s=!1,l=!1,c=!1;a<t.length;)t[a][0]==DIFF_EQUAL?(t[a][1].length<this.Diff_EditCost&&(l||c)?(n[r++]=a,o=l,s=c,i=t[a][1]):(r=0,i=null),l=c=!1):(t[a][0]==DIFF_DELETE?c=!0:l=!0,i&&(o&&s&&l&&c||i.length<this.Diff_EditCost/2&&o+s+l+c==3)&&(t.splice(n[r-1],0,[DIFF_DELETE,i]),t[n[r-1]+1][0]=DIFF_INSERT,r--,i=null,o&&s?(l=c=!0,r=0):(r--,a=r>0?n[r-1]:-1,l=c=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_cleanupMerge=function(t){t.push([DIFF_EQUAL,""]);for(var e,n=0,r=0,i=0,a="",o="";n<t.length;)switch(t[n][0]){case DIFF_INSERT:i++,o+=t[n][1],n++;break;case DIFF_DELETE:r++,a+=t[n][1],n++;break;case DIFF_EQUAL:r+i>1?(0!==r&&0!==i&&(e=this.diff_commonPrefix(o,a),0!==e&&(n-r-i>0&&t[n-r-i-1][0]==DIFF_EQUAL?t[n-r-i-1][1]+=o.substring(0,e):(t.splice(0,0,[DIFF_EQUAL,o.substring(0,e)]),n++),o=o.substring(e),a=a.substring(e)),e=this.diff_commonSuffix(o,a),0!==e&&(t[n][1]=o.substring(o.length-e)+t[n][1],o=o.substring(0,o.length-e),a=a.substring(0,a.length-e))),0===r?t.splice(n-i,r+i,[DIFF_INSERT,o]):0===i?t.splice(n-r,r+i,[DIFF_DELETE,a]):t.splice(n-r-i,r+i,[DIFF_DELETE,a],[DIFF_INSERT,o]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&t[n-1][0]==DIFF_EQUAL?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,a="",o=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)t[n-1][0]==DIFF_EQUAL&&t[n+1][0]==DIFF_EQUAL&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,a=0,o=0;for(n=0;n<t.length&&(t[n][0]!==DIFF_INSERT&&(r+=t[n][1].length),t[n][0]!==DIFF_DELETE&&(i+=t[n][1].length),!(r>e));n++)a=r,o=i;return t.length!=n&&t[n][0]===DIFF_DELETE?o:o+(e-a)},diff_match_patch.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,a=/\n/g,o=0;o<t.length;o++){var s=t[o][0],l=t[o][1],c=l.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(a,"&para;<br>");switch(s){case DIFF_INSERT:e[o]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case DIFF_DELETE:e[o]='<del style="background:#ffe6e6;">'+c+"</del>";break;case DIFF_EQUAL:e[o]="<span>"+c+"</span>"}}return e.join("")},diff_match_patch.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==DIFF_INSERT&&(e[n]=t[n][1]);return e.join("")},diff_match_patch.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==DIFF_DELETE&&(e[n]=t[n][1]);return e.join("")},diff_match_patch.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var a=t[i][0],o=t[i][1];switch(a){case DIFF_INSERT:n+=o.length;break;case DIFF_DELETE:r+=o.length;break;case DIFF_EQUAL:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},diff_match_patch.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case DIFF_INSERT:e[n]="+"+encodeURI(t[n][1]);break;case DIFF_DELETE:e[n]="-"+t[n][1].length;break;case DIFF_EQUAL:e[n]="="+t[n][1].length}return e.join("	").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,a=e.split(/\t/g),o=0;o<a.length;o++){var s=a[o].substring(1);switch(a[o].charAt(0)){case"+":try{n[r++]=[DIFF_INSERT,decodeURI(s)]}catch(l){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var c=parseInt(s,10);if(isNaN(c)||0>c)throw new Error("Invalid number in diff_fromDelta: "+s);var u=t.substring(i,i+=c);n[r++]="="==a[o].charAt(0)?[DIFF_EQUAL,u]:[DIFF_DELETE,u];break;default:if(a[o])throw new Error("Invalid diff operation in diff_fromDelta: "+a[o])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},diff_match_patch.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},diff_match_patch.prototype.match_bitap_=function(t,e,n){function r(t,r){var i=t/e.length,o=Math.abs(n-r);return a.Match_Distance?i+o/a.Match_Distance:o?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),a=this,o=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(o=Math.min(r(0,s),o),s=t.lastIndexOf(e,n+e.length),-1!=s&&(o=Math.min(r(0,s),o)));var l=1<<e.length-1;s=-1;for(var c,u,h,f=e.length+t.length,d=0;d<e.length;d++){for(c=0,u=f;u>c;)r(d,n+u)<=o?c=u:f=u,u=Math.floor((f-c)/2+c);f=u;var p=Math.max(1,n-u+1),g=Math.min(n+u,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<d)-1;for(var v=g;v>=p;v--){var y=i[t.charAt(v-1)];if(m[v]=0===d?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|((h[v+1]|h[v])<<1|1)|h[v+1],m[v]&l){var b=r(d,v-1);if(o>=b){if(o=b,s=v-1,!(s>n))break;p=Math.max(1,2*n-s)}}}if(r(d+1,n)>o)break;h=m}return s},diff_match_patch.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},diff_match_patch.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([DIFF_EQUAL,i]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+r);a&&t.diffs.push([DIFF_EQUAL,a]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+a.length,t.length2+=i.length+a.length}},diff_match_patch.prototype.patch_make=function(t,e,n){var r,i;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof n)r=t,i=this.diff_main(r,e,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(t&&"object"==typeof t&&"undefined"==typeof e&&"undefined"==typeof n)i=t,r=this.diff_text1(i);else if("string"==typeof t&&e&&"object"==typeof e&&"undefined"==typeof n)r=t,i=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=t,i=n}if(0===i.length)return[];for(var a=[],o=new diff_match_patch.patch_obj,s=0,l=0,c=0,u=r,h=r,f=0;f<i.length;f++){var d=i[f][0],p=i[f][1];switch(s||d===DIFF_EQUAL||(o.start1=l,o.start2=c),d){case DIFF_INSERT:o.diffs[s++]=i[f],o.length2+=p.length,h=h.substring(0,c)+p+h.substring(c);break;case DIFF_DELETE:o.length1+=p.length,o.diffs[s++]=i[f],h=h.substring(0,c)+h.substring(c+p.length);break;case DIFF_EQUAL:p.length<=2*this.Patch_Margin&&s&&i.length!=f+1?(o.diffs[s++]=i[f],o.length1+=p.length,o.length2+=p.length):p.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(o,u),a.push(o),o=new diff_match_patch.patch_obj,s=0,u=h,l=c)}d!==DIFF_INSERT&&(l+=p.length),d!==DIFF_DELETE&&(c+=p.length)}return s&&(this.patch_addContext_(o,u),a.push(o)),a},diff_match_patch.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=new diff_match_patch.patch_obj;i.diffs=[];for(var a=0;a<r.diffs.length;a++)i.diffs[a]=r.diffs[a].slice();i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,e[n]=i}return e},diff_match_patch.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],a=0;a<t.length;a++){var o,s=t[a].start2+r,l=this.diff_text1(t[a].diffs),c=-1;if(l.length>this.Match_MaxBits?(o=this.match_main(e,l.substring(0,this.Match_MaxBits),s),-1!=o&&(c=this.match_main(e,l.substring(l.length-this.Match_MaxBits),s+l.length-this.Match_MaxBits),(-1==c||o>=c)&&(o=-1))):o=this.match_main(e,l,s),-1==o)i[a]=!1,r-=t[a].length2-t[a].length1;else{i[a]=!0,r=o-s;var u;if(u=-1==c?e.substring(o,o+l.length):e.substring(o,c+this.Match_MaxBits),l==u)e=e.substring(0,o)+this.diff_text2(t[a].diffs)+e.substring(o+l.length);else{var h=this.diff_main(l,u,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(h)/l.length>this.Patch_DeleteThreshold)i[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,d=0,p=0;p<t[a].diffs.length;p++){var g=t[a].diffs[p];g[0]!==DIFF_EQUAL&&(f=this.diff_xIndex(h,d)),g[0]===DIFF_INSERT?e=e.substring(0,o+f)+g[1]+e.substring(o+f):g[0]===DIFF_DELETE&&(e=e.substring(0,o+f)+e.substring(o+this.diff_xIndex(h,d+g[1].length))),g[0]!==DIFF_DELETE&&(d+=g[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,i]},diff_match_patch.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;e>=r;r++)n+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],a=i.diffs;if(0==a.length||a[0][0]!=DIFF_EQUAL)a.unshift([DIFF_EQUAL,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>a[0][1].length){var o=e-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],i.start1-=o,i.start2-=o,i.length1+=o,i.length2+=o}if(i=t[t.length-1],a=i.diffs,0==a.length||a[a.length-1][0]!=DIFF_EQUAL)a.push([DIFF_EQUAL,n]),i.length1+=e,i.length2+=e;else if(e>a[a.length-1][1].length){var o=e-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,o),i.length1+=o,i.length2+=o}return n},diff_match_patch.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var i=r.start1,a=r.start2,o="";0!==r.diffs.length;){var s=new diff_match_patch.patch_obj,l=!0;for(s.start1=i-o.length,s.start2=a-o.length,""!==o&&(s.length1=s.length2=o.length,s.diffs.push([DIFF_EQUAL,o]));0!==r.diffs.length&&s.length1<e-this.Patch_Margin;){var c=r.diffs[0][0],u=r.diffs[0][1];c===DIFF_INSERT?(s.length2+=u.length,a+=u.length,s.diffs.push(r.diffs.shift()),l=!1):c===DIFF_DELETE&&1==s.diffs.length&&s.diffs[0][0]==DIFF_EQUAL&&u.length>2*e?(s.length1+=u.length,i+=u.length,l=!1,s.diffs.push([c,u]),r.diffs.shift()):(u=u.substring(0,e-s.length1-this.Patch_Margin),s.length1+=u.length,i+=u.length,c===DIFF_EQUAL?(s.length2+=u.length,a+=u.length):l=!1,s.diffs.push([c,u]),u==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(u.length))}o=this.diff_text2(s.diffs),o=o.substring(o.length-this.Patch_Margin);var h=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==h&&(s.length1+=h.length,s.length2+=h.length,0!==s.diffs.length&&s.diffs[s.diffs.length-1][0]===DIFF_EQUAL?s.diffs[s.diffs.length-1][1]+=h:s.diffs.push([DIFF_EQUAL,h])),l||t.splice(++n,0,s)}}},diff_match_patch.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},diff_match_patch.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),r=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var a=n[r].match(i);if(!a)throw new Error("Invalid patch string: "+n[r]);var o=new diff_match_patch.patch_obj;for(e.push(o),o.start1=parseInt(a[1],10),""===a[2]?(o.start1--,o.length1=1):"0"==a[2]?o.length1=0:(o.start1--,o.length1=parseInt(a[2],10)),o.start2=parseInt(a[3],10),""===a[4]?(o.start2--,o.length2=1):"0"==a[4]?o.length2=0:(o.start2--,o.length2=parseInt(a[4],10)),r++;r<n.length;){var s=n[r].charAt(0);try{var l=decodeURI(n[r].substring(1))}catch(c){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==s)o.diffs.push([DIFF_DELETE,l]);else if("+"==s)o.diffs.push([DIFF_INSERT,l]);else if(" "==s)o.diffs.push([DIFF_EQUAL,l]);else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+l)}r++}}return e},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,r=["@@ -"+t+" +"+e+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case DIFF_INSERT:n="+";break;case DIFF_DELETE:n="-";break;case DIFF_EQUAL:n=" "}r[i+1]=n+encodeURI(this.diffs[i][1])+"\n"}return r.join("").replace(/%20/g," ")},this.diff_match_patch=diff_match_patch,this.DIFF_DELETE=DIFF_DELETE,this.DIFF_INSERT=DIFF_INSERT,this.DIFF_EQUAL=DIFF_EQUAL,define("diff_match_patch_uncompressed",function(t){return function(){var e;return e||t.diff_match_patch}}(this)),!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define("jsondiffpatch",t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.jsondiffpatch=t()}}(function(){return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(t,e,n){var r=t("../pipe").Pipe,i=function(){};i.prototype.setResult=function(t){return this.result=t,this.hasResult=!0,this},i.prototype.exit=function(){return this.exiting=!0,this},i.prototype.switchTo=function(t,e){return"string"==typeof t||t instanceof r?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this},i.prototype.push=function(t,e){return t.parent=this,"undefined"!=typeof e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this},n.Context=i},{"../pipe":15}],3:[function(t,e,n){var r=t("./context").Context,i=function(t,e){this.left=t,this.right=e,this.pipe="diff"};i.prototype=new r,n.DiffContext=i},{"./context":2}],4:[function(t,e,n){var r=t("./context").Context,i=function(t,e){this.left=t,this.delta=e,this.pipe="patch"};i.prototype=new r,n.PatchContext=i},{"./context":2}],5:[function(t,e,n){var r=t("./context").Context,i=function(t){this.delta=t,this.pipe="reverse"};i.prototype=new r,n.ReverseContext=i},{"./context":2}],6:[function(t,e){e.exports=function(t,e){var n;return"string"==typeof e&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])):e}},{}],7:[function(t,e,n){var r=t("./processor").Processor,i=t("./pipe").Pipe,a=t("./contexts/diff").DiffContext,o=t("./contexts/patch").PatchContext,s=t("./contexts/reverse").ReverseContext,l=t("./filters/trivial"),c=t("./filters/nested"),u=t("./filters/arrays"),h=t("./filters/dates"),f=t("./filters/texts"),d=function(t){this.processor=new r(t),this.processor.pipe(new i("diff").append(c.collectChildrenDiffFilter,l.diffFilter,h.diffFilter,f.diffFilter,c.objectsDiffFilter,u.diffFilter).shouldHaveResult()),this.processor.pipe(new i("patch").append(c.collectChildrenPatchFilter,u.collectChildrenPatchFilter,l.patchFilter,f.patchFilter,c.patchFilter,u.patchFilter).shouldHaveResult()),this.processor.pipe(new i("reverse").append(c.collectChildrenReverseFilter,u.collectChildrenReverseFilter,l.reverseFilter,f.reverseFilter,c.reverseFilter,u.reverseFilter).shouldHaveResult())};d.prototype.options=function(){return this.processor.options.apply(this.processor,arguments)},d.prototype.diff=function(t,e){return this.processor.process(new a(t,e))},d.prototype.patch=function(t,e){return this.processor.process(new o(t,e))},d.prototype.reverse=function(t){return this.processor.process(new s(t))},d.prototype.unpatch=function(t,e){return this.patch(t,this.reverse(e))},n.DiffPatcher=d},{"./contexts/diff":3,"./contexts/patch":4,"./contexts/reverse":5,"./filters/arrays":9,"./filters/dates":10,"./filters/nested":12,"./filters/texts":13,"./filters/trivial":14,"./pipe":15,"./processor":16}],8:[function(t,e,n){(function(e){var r=t("./diffpatcher").DiffPatcher;n.DiffPatcher=r,n.create=function(t){return new r(t)},n.dateReviver=t("./date-reviver");var i;n.diff=function(){return i||(i=new r),i.diff.apply(i,arguments)},n.patch=function(){return i||(i=new r),i.patch.apply(i,arguments)},n.unpatch=function(){return i||(i=new r),i.unpatch.apply(i,arguments)},n.reverse=function(){return i||(i=new r),i.reverse.apply(i,arguments)};var a="undefined"!=typeof e&&"string"==typeof e.execPath;if(a){var o=t("./formatters/index");n.formatters=o,n.console=o.console}else n.homepage="https://github.com/benjamine/jsondiffpatch",n.version="0.1.5"}).call(this,t("/home/sheila/proj/JsonDiffPatch/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./date-reviver":6,"./diffpatcher":7,"/home/sheila/proj/JsonDiffPatch/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":1}],9:[function(t,e,n){var r=t("../contexts/diff").DiffContext,i=t("../contexts/patch").PatchContext,a=t("../contexts/reverse").ReverseContext,o=t("./lcs"),s=3,l="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},c="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=t.length,r=0;n>r;r++)if(t[r]===e)return r;return-1},u=function(t){if(t.leftIsArray){for(var e,n,i,a,l=t.options&&t.options.objectHash,u=function(t,e,n,r,i){var a=t[n],o=e[r];if(a===o)return!0;if("object"!=typeof a||"object"!=typeof o)return!1;if(!l)return!1;var s,c;return"number"==typeof n?(i.hashCache1=i.hashCache1||[],s=i.hashCache1[n],"undefined"==typeof s&&(i.hashCache1[n]=s=l(a,n))):s=l(a),"undefined"==typeof s?!1:("number"==typeof r?(i.hashCache2=i.hashCache2||[],c=i.hashCache2[r],"undefined"==typeof c&&(i.hashCache2[r]=c=l(o,r))):c=l(o),"undefined"==typeof c?!1:s===c)},h={},f=0,d=0,p=t.left,g=t.right,m=p.length,v=g.length;m>f&&v>f&&u(p,g,f,f,h);)e=f,a=new r(t.left[e],t.right[e]),t.push(a,e),f++;for(;m>d+f&&v>d+f&&u(p,g,m-1-d,v-1-d,h);)n=m-1-d,i=v-1-d,a=new r(t.left[n],t.right[i]),t.push(a,i),d++;var y;if(f+d===m){if(m===v)return void t.setResult(void 0).exit();for(y=y||{_t:"a"},e=f;v-d>e;e++)y[e]=[g[e]];return void t.setResult(y).exit()}if(f+d===v){for(y=y||{_t:"a"},e=f;m-d>e;e++)y["_"+e]=[p[e],0,0];return void t.setResult(y).exit()}h={};var b=p.slice(f,m-d),x=g.slice(f,v-d),w=o.get(b,x,u,h),_=[];for(y=y||{_t:"a"},e=f;m-d>e;e++)c(w.indices1,e-f)<0&&(y["_"+e]=[p[e],0,0],_.push(e));var C=!0;t.options&&t.options.arrays&&t.options.arrays.detectMove===!1&&(C=!1);var S=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(S=!0);var E=_.length;for(e=f;v-d>e;e++){var k=c(w.indices2,e-f);if(0>k){var T=!1;if(C&&E>0)for(n=0;E>n;n++)if(u(b,x,_[n]-f,e-f,h)){y["_"+_[n]].splice(1,2,e,s),S||(y["_"+_[n]][0]=""),n=_[n],i=e,a=new r(t.left[n],t.right[i]),t.push(a,i),_.splice(n,1),T=!0;break}T||(y[e]=[g[e]])}else n=w.indices1[k]+f,i=w.indices2[k]+f,a=new r(t.left[n],t.right[i]),t.push(a,i)}t.setResult(y).exit()}};u.filterName="arrays";var h={numerically:function(t,e){return t-e},numericallyBy:function(t){return function(e,n){return e[t]-n[t]}}},f=function(t){if(t.nested&&"a"===t.delta._t){var e,n,r=t.delta,a=t.left,o=[],l=[],c=[];for(e in r)if("_t"!==e)if("_"===e[0]){if(0!==r[e][2]&&r[e][2]!==s)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+r[e][2]);o.push(parseInt(e.slice(1),10))}else 1===r[e].length?l.push({index:parseInt(e,10),value:r[e][0]}):c.push({index:parseInt(e,10),delta:r[e]});for(o=o.sort(h.numerically),e=o.length-1;e>=0;e--){n=o[e];var u=r["_"+n],f=a.splice(n,1)[0];u[2]===s&&l.push({index:u[1],value:f})}l=l.sort(h.numericallyBy("index"));var d=l.length;for(e=0;d>e;e++){var p=l[e];a.splice(p.index,0,p.value)}var g,m=c.length;if(m>0)for(e=0;m>e;e++){var v=c[e];g=new i(t.left[v.index],v.delta),t.push(g,v.index)}return t.children?void t.exit():void t.setResult(t.left).exit()}};f.filterName="arrays";var d=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e,n=t.children.length,r=0;n>r;r++)e=t.children[r],t.left[e.childName]=e.result;t.setResult(t.left).exit()}};d.filterName="arraysCollectChildren";var p=function(t){if(!t.nested)return void(t.delta[2]===s&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),s]).exit()));if("a"===t.delta._t){var e,n;for(e in t.delta)"_t"!==e&&(n=new a(t.delta[e]),t.push(n,e));t.exit()}};p.filterName="arrays";var g=function(t,e,n){var r=e;if("string"==typeof e&&"_"===e[0])r=parseInt(e.substr(1),10);else{var i="_"+e;if(l(n)&&0===n[2])r=i;else for(var a in t){var o=t[a];l(o)&&o[2]===s&&o[1].toString()===e&&(r=a.substr(1))}}return r},m=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e,n=t.children.length,r={_t:"a"},i=0;n>i;i++){e=t.children[i];var a=e.newName;"undefined"==typeof a&&(a=g(t.delta,e.childName,e.result)),r[a]!==e.result&&(r[a]=e.result)}t.setResult(r).exit()}};m.filterName="arraysCollectChildren",n.diffFilter=u,n.patchFilter=f,n.collectChildrenPatchFilter=d,n.reverseFilter=p,n.collectChildrenReverseFilter=m},{"../contexts/diff":3,"../contexts/patch":4,"../contexts/reverse":5,"./lcs":11}],10:[function(t,e,n){var r=function(t){t.left instanceof Date?(t.setResult(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?[t.left,t.right]:void 0:[t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()
};r.filterName="dates",n.diffFilter=r},{}],11:[function(t,e,n){var r=function(t,e,n,r){return t[n]===e[r]},i=function(t,e,n,r){var i,a,o=t.length,s=e.length,l=[o+1];for(i=0;o+1>i;i++)for(l[i]=[s+1],a=0;s+1>a;a++)l[i][a]=0;for(l.match=n,i=1;o+1>i;i++)for(a=1;s+1>a;a++)l[i][a]=n(t,e,i-1,a-1,r)?l[i-1][a-1]+1:Math.max(l[i-1][a],l[i][a-1]);return l},a=function(t,e,n,r,i,o){if(0===r||0===i)return{sequence:[],indices1:[],indices2:[]};if(t.match(e,n,r-1,i-1,o)){var s=a(t,e,n,r-1,i-1,o);return s.sequence.push(e[r-1]),s.indices1.push(r-1),s.indices2.push(i-1),s}return t[r][i-1]>t[r-1][i]?a(t,e,n,r,i-1,o):a(t,e,n,r-1,i,o)},o=function(t,e,n,o){o=o||{};var s=i(t,e,n||r,o),l=a(s,t,e,t.length,e.length,o);return"string"==typeof t&&"string"==typeof e&&(l.sequence=l.sequence.join("")),l};n.get=o},{}],12:[function(t,e,n){var r=t("../contexts/diff").DiffContext,i=t("../contexts/patch").PatchContext,a=t("../contexts/reverse").ReverseContext,o=function(t){if(t&&t.children){for(var e,n=t.children.length,r=t.result,i=0;n>i;i++)e=t.children[i],"undefined"!=typeof e.result&&(r=r||{},r[e.childName]=e.result);r&&t.leftIsArray&&(r._t="a"),t.setResult(r).exit()}};o.filterName="collectChildren";var s=function(t){if(!t.leftIsArray&&"object"===t.leftType){var e,n;for(e in t.left)n=new r(t.left[e],t.right[e]),t.push(n,e);for(e in t.right)"undefined"==typeof t.left[e]&&(n=new r(void 0,t.right[e]),t.push(n,e));return t.children&&0!==t.children.length?void t.exit():void t.setResult(void 0).exit()}};s.filterName="objects";var l=function(t){if(t.nested&&!t.delta._t){var e,n;for(e in t.delta)n=new i(t.left[e],t.delta[e]),t.push(n,e);t.exit()}};l.filterName="objects";var c=function(t){if(t&&t.children&&!t.delta._t){for(var e,n=t.children.length,r=0;n>r;r++)e=t.children[r],t.left[e.childName]!==e.result&&(t.left[e.childName]=e.result);t.setResult(t.left).exit()}};c.filterName="collectChildren";var u=function(t){if(t.nested&&!t.delta._t){var e,n;for(e in t.delta)n=new a(t.delta[e]),t.push(n,e);t.exit()}};u.filterName="objects";var h=function(t){if(t&&t.children&&!t.delta._t){for(var e,n=t.children.length,r={},i=0;n>i;i++)e=t.children[i],r[e.childName]!==e.result&&(r[e.childName]=e.result);t.setResult(r).exit()}};h.filterName="collectChildren",n.collectChildrenDiffFilter=o,n.objectsDiffFilter=s,n.patchFilter=l,n.collectChildrenPatchFilter=c,n.reverseFilter=u,n.collectChildrenReverseFilter=h},{"../contexts/diff":3,"../contexts/patch":4,"../contexts/reverse":5}],13:[function(t,e,n){var r=2,i=60,a=null,o=function(){if(!a){var e;if("undefined"!=typeof diff_match_patch)e=new diff_match_patch;else if("function"==typeof t){var n=t("../../external/diff_match_patch_uncompressed");e=new n.diff_match_patch}if(!e){var r=new Error("text diff_match_patch library not found");throw r.diff_match_patch_not_found=!0,r}a={diff:function(t,n){return e.patch_toText(e.patch_make(t,n))},patch:function(t,n){for(var r=e.patch_apply(e.patch_fromText(n),t),i=0;i<r[1].length;i++)if(!r[1][i]){var a=new Error("text patch failed");a.textPatchFailed=!0}return r[0]}}}return a},s=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||i;if(t.left.length<e||t.right.length<e)return void t.setResult([t.left,t.right]).exit();var n=o().diff;t.setResult([n(t.left,t.right),0,r]).exit()}};s.filterName="texts";var l=function(t){if(!t.nested&&t.delta[2]===r){var e=o().patch;t.setResult(e(t.left,t.delta[0])).exit()}};l.filterName="texts";var c=function(t){var e,n,r,i,a,o,s,l,c=null,u=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(r=t.split("\n"),e=0,n=r.length;n>e;e++){i=r[e];var h=i.slice(0,1);"@"===h?(c=u.exec(i),o=e,s=null,l=null,r[o]="@@ -"+c[3]+","+c[4]+" +"+c[1]+","+c[2]+" @@"):"+"===h?(s=e,r[e]="-"+r[e].slice(1),"+"===r[e-1].slice(0,1)&&(a=r[e],r[e]=r[e-1],r[e-1]=a)):"-"===h&&(l=e,r[e]="+"+r[e].slice(1))}return r.join("\n")},u=function(t){t.nested||t.delta[2]===r&&t.setResult([c(t.delta[0]),0,r]).exit()};u.filterName="texts",n.diffFilter=s,n.patchFilter=l,n.reverseFilter=u},{}],14:[function(t,e,n){var r="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},i=function(t){if(t.left===t.right)return void t.setResult(void 0).exit();if("undefined"==typeof t.left){if("function"==typeof t.right)throw new Error("functions are not supported");return void t.setResult([t.right]).exit()}if("undefined"==typeof t.right)return void t.setResult([t.left,0,0]).exit();if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");return t.leftType=null===t.left?"null":typeof t.left,t.rightType=null===t.right?"null":typeof t.right,t.leftType!==t.rightType?void t.setResult([t.left,t.right]).exit():"boolean"===t.leftType||"number"===t.leftType?void t.setResult([t.left,t.right]).exit():("object"===t.leftType&&(t.leftIsArray=r(t.left)),"object"===t.rightType&&(t.rightIsArray=r(t.right)),t.leftIsArray!==t.rightIsArray?void t.setResult([t.left,t.right]).exit():void 0)};i.filterName="trivial";var a=function(t){return"undefined"==typeof t.delta?void t.setResult(t.left).exit():(t.nested=!r(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult(t.delta[0]).exit():2===t.delta.length?void t.setResult(t.delta[1]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult(void 0).exit():void 0)};a.filterName="trivial";var o=function(t){return"undefined"==typeof t.delta?void t.setResult(t.delta).exit():(t.nested=!r(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult([t.delta[0],0,0]).exit():2===t.delta.length?void t.setResult([t.delta[1],t.delta[0]]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult([t.delta[0]]).exit():void 0)};o.filterName="trivial",n.diffFilter=i,n.patchFilter=a,n.reverseFilter=o},{}],15:[function(t,e,n){var r=function(t){this.name=t,this.filters=[]};r.prototype.process=function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,n=this.filters.length,r=t,i=0;n>i;i++){var a=this.filters[i];if(e&&this.log("filter: "+a.filterName),a(r),"object"==typeof r&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)},r.prototype.log=function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)},r.prototype.append=function(){return this.filters.push.apply(this.filters,arguments),this},r.prototype.prepend=function(){return this.filters.unshift.apply(this.filters,arguments),this},r.prototype.indexOf=function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++){var n=this.filters[e];if(n.filterName===t)return e}throw new Error("filter not found: "+t)},r.prototype.list=function(){for(var t=[],e=0;e<this.filters.length;e++){var n=this.filters[e];t.push(n.filterName)}return t},r.prototype.after=function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e+1,0),Array.prototype.splice.apply(this.filters,n),this},r.prototype.before=function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,0),Array.prototype.splice.apply(this.filters,n),this},r.prototype.clear=function(){return this.filters.length=0,this},r.prototype.shouldHaveResult=function(t){if(t===!1)return void(this.resultCheck=null);if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var n=new Error(e.name+" failed");throw n.noResult=!0,n}},this}},n.Pipe=r},{}],16:[function(t,e,n){var r=function(t){this.selfOptions=t,this.pipes={}};r.prototype.options=function(t){return t&&(this.selfOptions=t),this.selfOptions},r.prototype.pipe=function(t,e){if("string"==typeof t){if("undefined"==typeof e)return this.pipes[t];this.pipes[t]=e}if(t&&t.name){if(e=t,e.processor===this)return e;this.pipes[e.name]=e}return e.processor=this,e},r.prototype.process=function(t,e){var n=t;n.options=this.options();for(var r,i,a=e||t.pipe||"default";a;)"undefined"!=typeof n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof a&&(a=this.pipe(a)),a.process(n),i=n,r=a,a=null,n&&n.next&&(n=n.next,a=i.nextPipe||n.pipe||r);return n.hasResult?n.result:void 0},n.Processor=r},{}]},{},[8])(8)}),"undefined"==typeof WeakMap&&!function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(e++ +"__")};n.prototype={set:function(e,n){var r=e[this.name];r&&r[0]===e?r[1]=n:t(e,this.name,{value:[e,n],writable:!0})},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){this.set(t,void 0)}},window.WeakMap=n}(),define("WeakMap",function(){}),function(t){function e(t){x.push(t),b||(b=!0,m(r))}function n(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function r(){b=!1;var t=x;x=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var n=t.takeRecords();i(t),n.length&&(t.callback_(n,t),e=!0)}),e&&r()}function i(t){t.nodes_.forEach(function(e){var n=g.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function a(t,e){for(var n=t;n;n=n.parentNode){var r=g.get(n);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.options;if(n===t||o.subtree){var s=e(o);s&&a.enqueue(s)}}}}function o(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++w}function s(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new s(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function c(t,e){return _=new s(t,e)}function u(t){return C?C:(C=l(_),C.oldValue=t,C)}function h(){_=C=void 0}function f(t){return t===C||t===_}function d(t,e){return t===e?t:C&&f(t)?C:null}function p(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}var g=new WeakMap,m=window.msSetImmediate;if(!m){var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),m=function(t){v.push(t),window.postMessage(y,"*")}}var b=!1,x=[],w=0;o.prototype={observe:function(t,e){if(t=n(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var r=g.get(t);r||g.set(t,r=[]);for(var i,a=0;a<r.length;a++)if(r[a].observer===this){i=r[a],i.removeListeners(),i.options=e;break}i||(i=new p(this,t,e),r.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),n=0;n<e.length;n++){var r=e[n];if(r.observer===this){r.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var _,C;p.prototype={enqueue:function(t){var n=this.observer.records_,r=n.length;if(n.length>0){var i=n[r-1],a=d(i,t);if(a)return void(n[r-1]=a)}else e(this.observer);n[r]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,r=t.target,i=new c("attributes",r);i.attributeName=e,i.attributeNamespace=n;var o=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;a(r,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?u(o):i});break;case"DOMCharacterDataModified":var r=t.target,i=c("characterData",r),o=t.prevValue;a(r,function(t){return t.characterData?t.characterDataOldValue?u(o):i:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,l,r=t.relatedNode,f=t.target;"DOMNodeInserted"===t.type?(s=[f],l=[]):(s=[],l=[f]);var d=f.previousSibling,p=f.nextSibling,i=c("childList",r);i.addedNodes=s,i.removedNodes=l,i.previousSibling=d,i.nextSibling=p,a(r,function(t){return t.childList?i:void 0})}h()}},t.JsMutationObserver=o,t.MutationObserver||(t.MutationObserver=o)}(this),define("MutationObservers",function(){}),Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|[^\s'">=]+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),define("bower-libs/prism/components/prism-markup",function(){}),Prism.languages.latex={keyword:/\\(?:[^a-zA-Z]|[a-zA-Z]+)/g,lparen:/[[({]/g,rparen:/[\])}]/g,comment:/%.*/g},define("libs/prism-latex",function(){}),Prism.languages.md=function(){var t="(&amp;|[-A-Z0-9+@#/%?=~_|[\\]()!:,.;])",e="(&amp;|[-A-Z0-9+@#/%=~_|[\\])])",n=new RegExp("(https?|ftp)(://"+t+"*"+e+")(?=$|\\W)","gi"),r=/(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)/gi,i=Prism.languages.latex,a=/\n/gm,o={};o["pre gfm"]={pattern:/^`{3}.*\n(?:[\s\S]*?)\n`{3} *$/gm,inside:{"md md-pre":/`{3}/,lf:a}},o["h1 alt"]={pattern:/^(.+)[ \t]*\n=+[ \t]*$/gm,inside:{}},o["h2 alt"]={pattern:/^(.+)[ \t]*\n-+[ \t]*$/gm,inside:{}};for(var s=6;s>=1;s--)o["h"+s]={pattern:new RegExp("^#{"+s+"}.+$","gm"),inside:{"md md-hash":new RegExp("^#{"+s+"}")}};o.li={pattern:/^[ \t]*([*+\-]|\d+\.)[ \t].+(?:\n|[ \t].*\n)*/gm,inside:{"md md-li":/^[ \t]*([*+\-]|\d+\.)[ \t]/m,"pre gfm":{pattern:/^((?: {4}|\t)+)`{3}.*\n(?:[\s\S]*?)\n\1`{3} *$/gm,inside:{"md md-pre":/`{3}/,lf:a}},lf:a}},o.pre={pattern:/(^|(?:^|(?:^|\n)(?![ \t]*([*+\-]|\d+\.)[ \t]).*\n)\s*?\n)(\s*(?: {4}|\t).*(?:\n|$))+/g,lookbehind:!0,inside:{lf:a}},o.table={pattern:new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),inside:{lf:a}},o["table alt"]={pattern:new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),inside:{lf:a}},o.hr={pattern:/^([*\-_] *){3,}$/gm},o.blockquote={pattern:/^ {0,3}> *[^\n]+$/gm,inside:{"md md-gt":/^ {0,3}> */,li:o.li}},o["math block"]={pattern:/(\$\$|\\\\\[|\\\\\\\\\()[\s\S]*?(\$\$|\\\\\]|\\\\\\\\\))/g,inside:{"md md-bracket-start":/^(\$\$|\\\\\[|\\\\\\\\\()/,"md md-bracket-end":/(\$\$|\\\\\]|\\\\\\\\\))/,lf:a,rest:i}},o["latex block"]={pattern:/\\?\\begin\{([a-z]*\*?)\}[\s\S]*?\\?\\end\{\1\}/g,inside:{keyword:/\\?\\(begin|end)/,lf:a,rest:i}},o.fndef={pattern:/^ {0,3}\[\^.*?\]:[ \t]+.*$/gm,inside:{"ref-id":{pattern:/\[\^.*?\]/,inside:{"md md-bracket-start":/\[/,"md md-bracket-end":/\]/}}}},o.linkdef={pattern:/^ {0,3}\[.*?\]:[ \t]+.*$/gm,inside:{"link-id":{pattern:/\[.*?\]/,inside:{"md md-bracket-start":/\[/,"md md-bracket-end":/\]/}},url:n,linktitle:/['\"\(][^\'\"\)]*['\"\)]/}},o.p={pattern:/.+/g,inside:{"md md-toc":/^\s*\[(toc|TOC)\]\s*$/g}},o.lf=/^\n$/gm,o.img={pattern:/!\[[^\]]*\]\([^\)]+\)/g,inside:{"md md-bang":/^!/,"md md-bracket-start":/\[/,"md md-alt":/[^\[]+(?=\])/,"md md-bracket-end":/\](?=\()/,"md img-parens":{pattern:/\([^\)]+\)/,inside:{"md md-paren-start":/^\(/,"md md-title":/(['][^']*[']|["][^"]*["])(?=\)$)/,"md md-src":/[^\('" \t]+(?=[\)'" \t])/,"md md-paren-end":/\)$/}}}},o.link={pattern:/\[(?:(\\.)|[^\[\]])*\]\([^\(\)\s]+(\(\S*?\))??[^\(\)\s]*?(\s(['][^']*[']|["][^"]*["]))?\)/gm,inside:{"md md-bracket-start":{pattern:/(^|[^\\])\[/,lookbehind:!0},"md md-underlined-text":{pattern:/(?:(\\.)|[^\[\]])+(?=\])/},"md md-bracket-end":/\]\s?\(/,"md md-paren-end":/\)$/,"md md-href":/.*/}},o.fn={pattern:/\[\^(.*?)\]/g,inside:{ref:{pattern:/^\[[^\[\]]+\] ?/,inside:{"md md-bracket-start":/\[/,"md md-ref":/^[^\[\]]+/,"md md-bracket-end":/\]/}}}},o.imgref={pattern:/!\[(.*?)\] ?\[(.*?)\]/g,inside:{"md md-bang":/^!/,"ref-end":{pattern:/\[[^\[\]]+\]$/,inside:{"md md-bracket-start":/\[/,"md md-href":/[^\[\]]+(?=]$)/,"md md-bracket-end":/\]/}},"ref-start":{pattern:/^\[[^\[\]]+\] ?/,inside:{"md md-bracket-start":/\[/,"md md-alt":/^[^\[\]]+/,"md md-bracket-end":/\]/}}}},o.linkref={pattern:/\[(.*?)\] ?\[(.*?)\]/g,inside:{"ref-end":{pattern:/\[[^\[\]]+\]$/,inside:{"md md-bracket-start":/\[/,"md md-href":/[^\[\]]+(?=]$)/,"md md-bracket-end":/\]/}},"ref-start":{pattern:/^\[[^\[\]]+\] ?/,inside:{"md md-bracket-start":/\[/,"md md-underlined-text":/^[^\[\]]+/,"md md-bracket-end":/\]/}}}},o.code={pattern:/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/g,lookbehind:!0,inside:{"md md-code":/`/}},o.math={pattern:/\$.*?\$/g,inside:{"md md-bracket-start":/^\$/,"md md-bracket-end":/\$$/,rest:i}},o.strong={pattern:/([_\*])\1((?!\1{2}).)*\1{2}/g,inside:{"md md-strong":/([_\*])\1/g}},o.em={pattern:/(^|[^\\])(\*|_)(\S[^\2]*?)??[^\s\\]+?\2/g,lookbehind:!0,inside:{"md md-em md-start":/^(\*|_)/,"md md-em md-close":/(\*|_)$/}},o.strike={pattern:/(^|\n|\W)(~~)(?=\S)([^\r]*?\S)\2/gm,lookbehind:!0,inside:{"md md-s":/(~~)/,"md-strike-text":/[^~]+/}};for(var l={code:o.code,math:o.math,fn:o.fn,img:o.img,link:o.link,imgref:o.imgref,linkref:o.linkref,url:n,email:r,strong:o.strong,em:o.em,strike:o.strike,conflict://g,comment:Prism.languages.markup.comment,tag:Prism.languages.markup.tag,entity:Prism.languages.markup.entity},c=6;c>=1;c--)o["h"+c].inside.rest=l;o["h1 alt"].inside.rest=l,o["h2 alt"].inside.rest=l,o.table.inside.rest=l,o["table alt"].inside.rest=l,o.p.inside.rest=l,o.blockquote.inside.rest=l,o.li.inside.rest=l,o.fndef.inside.rest=l,l={code:o.code,fn:o.fn,link:o.link,linkref:o.linkref,conflict://g},o.strong.inside.rest=l,o.em.inside.rest=l,o.strike.inside.rest=l;var u={code:o.code,strong:o.strong,em:o.em,strike:o.strike,conflict://g,comment:Prism.languages.markup.comment,tag:Prism.languages.markup.tag,entity:Prism.languages.markup.entity};return o.link.inside["md md-underlined-text"].inside=u,o.linkref.inside["ref-start"].inside["md md-underlined-text"].inside=u,o}(),define("libs/prism-markdown",function(){}),define("editor",["underscore","utils","settings","eventMgr","prism-core","diff_match_patch_uncompressed","jsondiffpatch","crel","rangy","MutationObservers","libs/prism-markdown"],function(t,e,n,r,i,a,o,s,l){function c(){this.isWatching=!1;var t;this.startWatching=function(){this.isWatching=!0,t=t||new MutationObserver(w),t.observe(N,{childList:!0,subtree:!0,characterData:!0})},this.stopWatching=function(){t.disconnect(),this.isWatching=!1},this.noWatch=function(t){this.isWatching===!0?(this.stopWatching(),t(),this.startWatching()):t()}}function u(){var i=this,a=0,o=0;this.selectionStart=0,this.selectionEnd=0,this.cursorY=0,this.adjustTop=0,this.adjustBottom=0,this.findOffsets=function(t){var e=[];if(!t.length)return e;for(var n=t.shift(),r=document.createTreeWalker(N,4,null,!1),i="",a=0;r.nextNode();){i=r.currentNode.nodeValue||"";for(var o=a+i.length;o>n;){if(e.push({container:r.currentNode,offsetInContainer:n-a,offset:n}),!t.length)return e;n=t.shift()}a=o}do e.push({container:r.currentNode,offsetInContainer:i.length,offset:n}),n=t.shift();while(n);return e},this.createRange=function(e,n){e=0>e?0:e,n=0>n?0:n;var r,i,a=document.createRange(),o=[];t.isNumber(e)&&(o.push(e),r=o.length-1),t.isNumber(n)&&(o.push(n),i=o.length-1),o=this.findOffsets(o);var s=t.isObject(e)?e:o[r];a.setStart(s.container,s.offsetInContainer);var l=s;return n&&n!=e&&(l=t.isObject(n)?n:o[i]),a.setEnd(l.container,l.offsetInContainer),a};var s,c=e.debounce(function(){I.toggleClass("has-selection",this.selectionStart!==this.selectionEnd);var t=this.getCoordinates(this.selectionEnd,this.selectionEndContainer,this.selectionEndOffset);if(this.cursorY!==t.y&&(this.cursorY=t.y,r.onCursorCoordinates(t.x,t.y)),s){var e,i;if(e=i=T.offsetHeight/2*n.cursorFocusRatio,e=this.adjustTop||e,i=this.adjustBottom||e,e&&i){var a=T.scrollTop+e,o=T.scrollTop+T.offsetHeight-i;W.cursorY<a?T.scrollTop+=W.cursorY-a:W.cursorY>o&&(T.scrollTop+=W.cursorY-o)}}s=!1},this);this.updateCursorCoordinates=function(t){s=s||t,c()},this.updateSelectionRange=function(){var t=Math.min(this.selectionStart,this.selectionEnd),e=Math.max(this.selectionStart,this.selectionEnd),n=this.createRange(t,e),r=l.getSelection();r.removeAllRanges(),r.addRange(n,this.selectionStart>this.selectionEnd)};var u=t.debounce(function(){a=i.selectionStart,o=i.selectionEnd},50);this.setSelectionStartEnd=function(t,e){void 0===t&&(t=this.selectionStart),0>t&&(t=0),void 0===e&&(e=this.selectionEnd),0>e&&(e=0),this.selectionStart=t,this.selectionEnd=e,H.editorStart=t,H.editorEnd=e,u()},this.saveSelectionState=function(){function t(){if(U===!1){var t=i.selectionStart,e=i.selectionEnd,n=l.getSelection();if(n.rangeCount>0){var r=n.getRangeAt(0),a=r.startContainer;if(N.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY||N===a){var o=r.startOffset;a.hasChildNodes()&&o>0&&(a=a.childNodes[o-1],o=a.textContent.length);for(var s=a;a!=N;){for(;a=a.previousSibling;)a.textContent&&(o+=a.textContent.length);a=s=s.parentNode}n.isBackwards()?(t=o+r.toString().length,e=o):(t=o,e=o+r.toString().length),t===e&&"\n"==r.startContainer.textContent&&1==r.startOffset&&(t=--e,i.setSelectionStartEnd(t,e),i.updateSelectionRange())}}i.setSelectionStartEnd(t,e)}Y.saveSelectionState()}var n=!1,r=e.debounce(function(){t(),i.updateCursorCoordinates(n),s()}),s=e.debounce(function(){t(),a===i.selectionStart&&o===i.selectionEnd&&(n=!1),i.updateCursorCoordinates(n),n=!1},10);return function(e,i,s){return s&&(a=void 0,o=void 0),e?(n=n||i,r()):void t()}}(),this.getSelectedText=function(){var t=Math.min(this.selectionStart,this.selectionEnd),e=Math.max(this.selectionStart,this.selectionEnd);return X.substring(t,e)},this.getCoordinates=function(t,e,n){if(!e){var r=this.findOffsets([t])[0];e=r.container,n=r.offsetInContainer}var i=0,a=0;if("\n"==e.textContent)a=e.parentNode.offsetTop+e.parentNode.offsetHeight/2;else{var o=X[t],s={container:e,offsetInContainer:n,offset:t},l={container:e,offsetInContainer:n,offset:t};t>0&&(void 0===o||"\n"==o)?0===s.offset?s=t-1:s.offsetInContainer-=1:l.offset===e.textContent.length?l=t+1:l.offsetInContainer+=1;var c=this.createRange(s,l),u=c.getBoundingClientRect();a=u.top+u.height/2-T.getBoundingClientRect().top+T.scrollTop}return{x:i,y:a}},this.getClosestWordOffset=function(t){var e=0,n=0,r=0;return X.split(/\s/).some(function(i){return i&&(e=r,n=r+i.length,n>t)?!0:void(r+=i.length+1)}),{start:e,end:n}}}function h(t){void 0!==T&&W.saveSelectionState(!0,!0,t)}function f(t){var e=z.diff_commonPrefix(X,t);e===X.length&&e--;var n=Math.min(z.diff_commonSuffix(X,t),X.length-e,t.length-e),r=t.substring(e,t.length-n),i=W.createRange(e,X.length-n);return i.deleteContents(),i.insertNode(document.createTextNode(r)),{start:e,end:t.length-n}}function d(t,e,n){Y.currentMode=Y.currentMode||"replace";var r=W.createRange(Math.min(t,e),Math.max(t,e));""+r!=n&&(r.deleteContents(),r.insertNode(document.createTextNode(n)));var i=t+n.length;W.setSelectionStartEnd(i,i),W.updateSelectionRange(),W.updateCursorCoordinates(!0)}function p(t,e){Y.currentMode=Y.currentMode||"replace";var n=X.replace(t,e);if(n!=X){var r=F.setValue(n);W.setSelectionStartEnd(r.end,r.end),W.updateSelectionRange(),W.updateCursorCoordinates(!0)}}function g(t,e){var n=W.selectionStart;if(n!==W.selectionEnd)return!1;var r=W.createRange(n-t.length,n);return""+r!=t?!1:(r.deleteContents(),r.insertNode(document.createTextNode(e)),n=n-t.length+e.length,W.setSelectionStartEnd(n,n),W.updateSelectionRange(),W.updateCursorCoordinates(!0),!0)}function m(t){f(t),X=t}function v(){return X}function y(){R.focus(),W.updateSelectionRange(),T.scrollTop=P}function b(){function n(e,n,i){q.noWatch(function(){X!=e.content&&(m(e.content),H.content=e.content,r.onContentChanged(H,e.content)),W.setSelectionStartEnd(n,i),W.updateSelectionRange(),W.updateCursorCoordinates(!0);var a=H.discussionListJSON;if(a!=e.discussionListJSON){var o=H.discussionList;H.discussionListJSON=e.discussionListJSON;var s=H.discussionList,l=G.diff(o,s),c=!1;t.each(l,function(e,n){t.isArray(e)?1===e.length?r.onDiscussionCreated(H,s[n]):r.onDiscussionRemoved(H,o[n]):c=!0}),c&&r.onCommentsChanged(H)}}),s=n,l=i,o=e,this.currentMode=void 0,a=void 0,this.onButtonStateChange(),h()}var i,a,o,s,l,c=[],u=[];this.setCommandMode=function(){this.currentMode="command"},this.setMode=function(){},this.onButtonStateChange=function(){},this.saveState=e.debounce(function(){u=[];var t=Date.now();if("comment"==this.currentMode||"replace"==this.currentMode||"newlines"==a||this.currentMode!=a||t-i>1e3)for(c.push(o);c.length>100;)c.shift();else s=o.selectionStartBefore,l=o.selectionEndBefore;o={selectionStartBefore:s,selectionEndBefore:l,selectionStartAfter:W.selectionStart,selectionEndAfter:W.selectionEnd,content:X,discussionListJSON:H.discussionListJSON},i=t,a=this.currentMode,this.currentMode=void 0,this.onButtonStateChange()},this),this.saveSelectionState=t.debounce(function(){void 0===this.currentMode&&(s=W.selectionStart,l=W.selectionEnd)},50),this.canUndo=function(){return c.length},this.canRedo=function(){return u.length},this.undo=function(){var t=c.pop();t&&(u.push(o),n.call(this,t,o.selectionStartBefore,o.selectionEndBefore))},this.redo=function(){var t=u.pop();t&&(c.push(o),n.call(this,t,t.selectionStartAfter,t.selectionEndAfter))},this.init=function(){var t=H.content;c=[],u=[],i=0,o={selectionStartAfter:H.selectionStart,selectionEndAfter:H.selectionEnd,content:t,discussionListJSON:H.discussionListJSON},this.currentMode=void 0,a=void 0,N.textContent=t,w()}}function x(){q.isWatching===!0&&(Y.currentMode=Y.currentMode||"comment",Y.saveState())}function w(){var e=T.textContent;if(N.lastChild===D&&"\n"==D.textContent.slice(-1)&&(e=e.slice(0,-1)),e=e.replace(/\r\n?/g,"\n"),U===!1){if(e==X)return void(0===N.children.length&&(N.innerHTML="",K.forEach(function(t){N.appendChild(t.elt)}),E()));Y.currentMode=Y.currentMode||"typing";var n=t.values(H.discussionList);H.newDiscussion&&n.push(H.newDiscussion);var i=_(X,e,n);X=e,i===!0&&(H.discussionList=H.discussionList),H.content=X,W.saveSelectionState(),r.onContentChanged(H,X),i&&r.onCommentsChanged(H),Y.saveState(),J()}else X=e,H.content=X,W.setSelectionStartEnd(H.editorStart,H.editorEnd),W.updateSelectionRange(),W.updateCursorCoordinates(),Y.saveSelectionState(),r.onFileOpen(H,X),L.scrollTop=H.previewScrollTop,P=H.editorScrollTop,T.scrollTop=P,U=!1}function _(t,e,n){if(n.length){var r=z.diff_main(t,e),i=!1,a=0;return r.forEach(function(t){var e=t[0],r=t[1];if(0===e)return void(a+=r.length);var o=a,s=r.length;-1===e&&(o+=s,s=-s),n.forEach(function(t){t.selectionEnd>o?(t.selectionEnd+=s,t.discussionIndex&&(i=!0)):t.selectionEnd>a&&(t.selectionEnd=a,t.discussionIndex&&(i=!0)),t.selectionStart>=o?(t.selectionStart+=s,t.discussionIndex&&(i=!0)):t.selectionStart>a&&(t.selectionStart=a,t.discussionIndex&&(i=!0))}),1===e&&(a+=r.length)}),i}}function C(e){if(te=[],Z=[],Q=void 0,U===!0)return Z=K,K=e,void(te=e);var n=K.length;t.some(K,function(t,r){var i=e[r];return r>=e.length||t.textWithFrontMatter!=i.textWithFrontMatter||t.elt.parentNode!==N||t.elt.textContent!=i.textWithFrontMatter?(n=r,!0):void 0});var r=-K.length;t.some(K.slice().reverse(),function(t,n){var i=e[e.length-n-1];return n>=e.length||t.textWithFrontMatter!=i.textWithFrontMatter||t.elt.parentNode!==N||t.elt.textContent!=i.textWithFrontMatter?(r=-n,!0):void 0}),n-r>K.length&&(r=n-K.length);var i=K.slice(0,n);te=e.slice(n,e.length+r);var a=K.slice(K.length+r,K.length);Q=t.first(a),Z=K.slice(n,K.length+r),K=i.concat(te).concat(a)}function S(){var t=document.createDocumentFragment();te.forEach(function(e){k(e),t.appendChild(e.elt)}),q.noWatch(function(){if(U===!0)N.innerHTML="",N.appendChild(t);else{Z.forEach(function(t){t.elt.parentNode===N&&N.removeChild(t.elt),t.elt.generated=!1}),void 0!==Q?N.insertBefore(t,Q.elt):N.appendChild(t);for(var e=N.firstChild;e;){var n=e.nextSibling;e.generated||N.removeChild(e),e=n}}E(),W.updateSelectionRange(),W.updateCursorCoordinates()})}function E(){D=s("span",{"class":"token lf"}),D.textContent="\n",N.appendChild(D)}function k(t){var e=ee(t.text);window.viewerMode||(e=i.highlight(e,i.languages.md));var n=t.textWithFrontMatter.substring(0,t.textWithFrontMatter.length-t.text.length);n.length&&(n=ee(n),n=n.replace(/\n/g,'<span class="token lf">\n</span>'),e='<span class="token md">'+n+"</span>"+e);var r=s("span",{id:"wmd-input-section-"+t.id,"class":"wmd-input-section"});r.generated=!0,r.innerHTML=e,t.elt=r}var T,I,N,R,A,M,L,O,D,F={},P=0,B=function(){var e,r=0,i=function(){var t=Date.now();O.refreshPreview(),r=Date.now()-t};return n.lazyRendering===!0?t.debounce(i,500):function(){clearTimeout(e),e=setTimeout(i,2e3>r?r:2e3)}}();r.addListener("onPagedownConfigure",function(t){O=t});var j=0;r.addListener("onSectionsCreated",function(t){j||(C(t),S()),U===!0?O.refreshPreview():B()});var H,U=!0;r.addListener("onFileSelected",function(t){U=!0,H=t});var q=new c;F.watcher=q;var z=new a,G=o.create({objectHash:function(t){return JSON.stringify(t)},arrays:{detectMove:!1},textDiff:{minLength:9999999}}),W=new u;F.selectionMgr=W,$(document).on("selectionchange",".editor-content",t.bind(W.saveSelectionState,W,!0,!1)),F.adjustCursorPosition=h;var X;F.setValue=f,F.onResize=function(){r.onLayoutResize()};var V=!1;F.setContent=function(t){H||(H={content:t}),N?(H={content:t},N.textContent=t,r.onFileSelected(H),w(),V=!1):V=t},window.we=F,F.replace=d,F.replaceAll=p,F.replacePreviousText=g,F.setValueNoWatch=m,F.getValue=v,F.getContent=v,F.focus=y;var Y=new b;F.undoMgr=Y,r.addListener("onDiscussionCreated",x),r.addListener("onDiscussionRemoved",x),r.addListener("onCommentsChanged",x);var J=t.debounce(function(){var t=window.getSelection();W.hasFocus&&!j&&W.selectionStart===W.selectionEnd&&t.modify&&(W.selectionStart?(t.modify("move","backward","character"),t.modify("move","forward","character")):(t.modify("move","forward","character"),t.modify("move","backward","character")))},10);F.adjustCommentOffsets=_,F.init=function(){if(T=document.getElementById("wmd-input"),I=$(T),N=T.querySelector(".editor-content"),R=$(N),A=T.querySelector(".editor-margin"),M=$(A),L=document.querySelector(".preview-container"),I.addClass(n.editorFontClass),q.startWatching(),$(T).scroll(function(){P=T.scrollTop,U===!1&&(H.editorScrollTop=P)}),$(L).scroll(function(){U===!1&&(H.previewScrollTop=L.scrollTop)}),/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent)){var e=$('<input style="width:1px;height:1px;border:none;margin:0;padding:0;" tabIndex="-1">').appendTo("html");
R.blur(function(){e[0].setSelectionRange(0,0),e.blur()})}T.focus=y,T.adjustCursorPosition=h,Object.defineProperty(T,"value",{get:function(){return X},set:f}),Object.defineProperty(T,"selectionStart",{get:function(){return Math.min(W.selectionStart,W.selectionEnd)},set:function(t){W.setSelectionStartEnd(t),W.updateSelectionRange(),W.updateCursorCoordinates()},enumerable:!0,configurable:!0}),Object.defineProperty(T,"selectionEnd",{get:function(){return Math.max(W.selectionStart,W.selectionEnd)},set:function(t){W.setSelectionStartEnd(void 0,t),W.updateSelectionRange(),W.updateCursorCoordinates()},enumerable:!0,configurable:!0});var r=!1;R.on("keydown",function(t){if(17!==t.which&&91!==t.which&&18!==t.which&&16!==t.which){W.saveSelectionState(),h();var e=t.metaKey||t.ctrlKey;switch(t.which){case 9:e||(i("indent",{inverse:t.shiftKey}),t.preventDefault());break;case 13:i("newline"),t.preventDefault()}13!==t.which&&(r=!1)}}).on("compositionstart",function(){j++}).on("compositionend",function(){setTimeout(function(){j--},0)}).on("mouseup",t.bind(W.saveSelectionState,W,!0,!1)).on("paste",function(t){Y.currentMode="paste",t.preventDefault();var e,n=(t.originalEvent||t).clipboardData;n?e=n.getData("text/plain"):(n=window.clipboardData,e=n&&n.getData("Text")),e&&(d(W.selectionStart,W.selectionEnd,e),h())}).on("cut",function(){Y.currentMode="cut",h()}).on("focus",function(){W.hasFocus=!0}).on("blur",function(){W.hasFocus=!1});var i=function(t,e){var n=v(),r=Math.min(W.selectionStart,W.selectionEnd),i=Math.max(W.selectionStart,W.selectionEnd),a={selectionStart:r,selectionEnd:i,before:n.slice(0,r),after:n.slice(i),selection:n.slice(r,i)};o[t](a,e||{}),f(a.before+a.selection+a.after),W.setSelectionStartEnd(a.selectionStart,a.selectionEnd),W.updateSelectionRange()},a=/^ {0,3}>[ ]*|^[ \t]*(?:[*+\-]|(\d+)\.)[ \t]|^\s+/,o={indent:function(t,e){function n(t,e,n,r){return n=+n||0,r=r||"",t.slice(0,e)+r+t.slice(e+n)}var r=t.before.lastIndexOf("\n")+1;if(e.inverse)/\s/.test(t.before.charAt(r))&&(t.before=n(t.before,r,1),t.selectionStart--,t.selectionEnd--),t.selection=t.selection.replace(/^[ \t]/gm,"");else{var i=t.before.slice(r);if(!t.selection&&!i.match(a))return t.before+="	",t.selectionStart++,void t.selectionEnd++;t.before=n(t.before,r,0,"	"),t.selection=t.selection.replace(/\r?\n(?=[\s\S])/g,"\n	"),t.selectionStart++,t.selectionEnd++}t.selectionEnd=t.selectionStart+t.selection.length},newline:function(t){var e=t.before.lastIndexOf("\n")+1;if(r)return t.before=t.before.substring(0,e),t.selection="",t.selectionStart=e,t.selectionEnd=e,void(r=!1);r=!1;var n=t.before.slice(e),i=n.match(a),o=(i||[""])[0];if(i&&i[1]){var s=parseInt(i[1],10);o=o.replace(/\d+/,s+1)}o.length&&(r=!0),Y.currentMode="newlines",t.before+="\n"+o,t.selection="",t.selectionStart+=o.length+1,t.selectionEnd=t.selectionStart}};V!==!1&&F.setContent(V)};var Q,K=[],Z=[],te=[],ee=function(){var t={"&":"&amp;","<":"&lt;","":" "};return function(e){return e.replace(/[&<\u00a0]/g,function(e){return t[e]})}}();return r.onEditorCreated(F),F}),function(){function t(){}function e(t){this.buttonBar=h.getElementById("wmd-button-bar"+t),this.preview=h.getElementById("wmd-preview"+t),this.input=h.getElementById("wmd-input"+t)}function n(t,e){var n,i,a,o=this,s=[],c=0,u="none",h=function(t,e){u!=t&&(u=t,e||d()),g.isIE&&"moving"==u?a=null:i=setTimeout(f,1)},f=function(t){a=new r(e,t),i=void 0};this.setCommandMode=function(){u="command",d(),i=setTimeout(f,0)},this.canUndo=function(){return c>1},this.canRedo=function(){return s[c+1]?!0:!1},this.undo=function(){o.canUndo()&&(n?(n.restore(),n=null):(s[c]=new r(e),s[--c].restore(),t&&t())),u="none",e.input.focus(),f()},this.redo=function(){o.canRedo()&&(s[++c].restore(),t&&t()),u="none",e.input.focus(),f()};var d=function(){var i=a||new r(e);return i?"moving"==u?void(n||(n=i)):(n&&(s[c-1].text!=n.text&&(s[c++]=n),n=null),s[c++]=i,s[c+1]=null,void(t&&t())):!1},p=function(t){if(!t.ctrlKey&&!t.metaKey){var e=t.keyCode;e>=33&&40>=e||e>=63232&&63235>=e?h("moving"):8==e||46==e||127==e?h("deleting"):13==e?h("newlines"):27==e?h("escape"):(16>e||e>20)&&91!=e&&h("typing")}},m=function(){l.addEvent(e.input,"keypress",function(t){!t.ctrlKey&&!t.metaKey||t.altKey||89!=t.keyCode&&90!=t.keyCode||t.preventDefault()});var t=function(){(g.isIE||a&&a.text!=e.input.value)&&void 0==i&&(u="paste",d(),f())};l.addEvent(e.input,"keydown",p),l.addEvent(e.input,"mousedown",function(){h("moving")}),e.input.onpaste=t,e.input.ondrop=t},v=function(){m(),f(!0)};this.reinit=function(t,e,r,o){s=[],c=0,u="none",n=void 0,i=void 0,f(),a.text=t,a.start=e,a.end=r,a.scrollTop=o,a.setInputAreaSelection(),d()},this.setMode=h,v()}function r(e){var n=this,r=e.input;this.init=function(){l.isVisible(r)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=r.scrollTop,(!this.text&&r.selectionStart||0===r.selectionStart)&&(this.text=r.value))},this.setInputAreaSelection=function(){l.isVisible(r)&&(r.focus(),r.selectionStart=n.start,r.selectionEnd=n.end)},this.setInputAreaSelectionStartEnd=function(){n.start=r.selectionStart,n.end=r.selectionEnd},this.restore=function(){void 0!=n.text&&n.text!=r.value&&(r.value=n.text),this.setInputAreaSelection()},this.getChunks=function(){var e=new t;return e.before=l.fixEolChars(n.text.substring(0,n.start)),e.startTag="",e.selection=l.fixEolChars(n.text.substring(n.start,n.end)),e.endTag="",e.after=l.fixEolChars(n.text.substring(n.end)),e.scrollTop=n.scrollTop,e},this.setChunks=function(t){t.before=t.before+t.startTag,t.after=t.endTag+t.after,this.start=t.before.length,this.end=t.before.length+t.selection.length,this.text=t.before+t.selection+t.after,this.scrollTop=t.scrollTop},this.init()}function i(t,e,n){var r,i,a,o=3e3,s="manual",c=function(t,e){l.addEvent(t,"input",e),t.onpaste=e,t.ondrop=e,l.addEvent(t,"keypress",e),l.addEvent(t,"keydown",e)},u=function(){if(e.preview){var n=e.input.value;if(!n||n!=a){a=n;var r=(new Date).getTime();n=t.makeHtml(n);var o=(new Date).getTime();i=o-r,m(n)}}},h=function(){if(r&&(clearTimeout(r),r=void 0),"manual"!==s){var t=0;"delayed"===s&&(t=i),t>o&&(t=o),r=setTimeout(u,t)}};this.refresh=function(t){t?(a="",u()):h()},this.processingTime=function(){return i};var f,d=function(t){var n=e.preview,r=n.parentNode,i=n.nextSibling;r.removeChild(n),n.innerHTML=t,i?r.insertBefore(n,i):r.appendChild(n)},p=function(t){e.preview.innerHTML=t},g=function(t){if(f)return f(t);try{p(t),f=p}catch(e){f=d,f(t)}},m=function(t){e.preview&&(g(t),n())},v=function(){c(e.input,h),e.preview&&(e.preview.scrollTop=0)};v()}function a(t,e,n,i,a,o,s){function l(t,a){p.focus(),n&&n.setCommandMode();var o=new r(e);if(o){var s=o.getChunks(),l=function(){p.focus(),s&&o.setChunks(s),o.restore(),i.refresh()},c=b.insertLink(s,l,t,a);c||l()}}function c(t){p.focus();var a="wmd-link-button"==t.id||"wmd-image-button"==t.id;if(t.textOp){n&&!a&&n.setCommandMode();var o=new r(e);if(!o)return;var s=o.getChunks(),l=function(){p.focus(),s&&o.setChunks(s),o.restore(),i.refresh()},c=t.textOp(s,l);c||(l(),a||p.adjustCursorPosition())}t.execute&&t.execute(n)}function u(t,n){var r="0px",i="-20px",a="-40px",o=t.getElementsByTagName("span")[0];t.className=t.className.replace(/ disabled/g,""),n?(o.style.backgroundPosition=t.XShift+" "+r,t.onmouseover=function(){o.style.backgroundPosition=this.XShift+" "+a},t.onmouseout=function(){o.style.backgroundPosition=this.XShift+" "+r},g.isIE&&(t.onmousedown=function(){e.ieCachedRange=document.selection.createRange(),e.ieCachedScrollTop=e.input.scrollTop}),t.isHelp||(t.onclick=function(){return this.onmouseout&&this.onmouseout(),c(this),!1})):(o.style.backgroundPosition=t.XShift+" "+i,t.onmouseover=t.onmouseout=t.onclick=function(){},t.className+=" disabled")}function h(t){return"string"==typeof t&&(t=a[t]),function(){t.apply(a,arguments)}}function f(){var n=e.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+t,r.className="wmd-button-row",r=n.appendChild(r);var i=0,a=function(e,n,a,o){var s=document.createElement("li");s.className="wmd-button",s.style.left=i+"px",i+=25;var l=document.createElement("span");return s.id=e+t,s.appendChild(l),s.title=n,s.XShift=a,o&&(s.textOp=o),u(s,!0),r.appendChild(s),s},l=function(e){var n=document.createElement("li");n.className="wmd-spacer wmd-spacer"+e,n.id="wmd-spacer"+e+t,r.appendChild(n),i+=25};if(m.bold=a("wmd-bold-button",s("bold"),"0px",h("doBold")),m.italic=a("wmd-italic-button",s("italic"),"-20px",h("doItalic")),l(1),m.link=a("wmd-link-button",s("link"),"-40px",h(function(t,e){return this.doLinkOrImage(t,e,!1)})),m.quote=a("wmd-quote-button",s("quote"),"-60px",h("doBlockquote")),m.code=a("wmd-code-button",s("code"),"-80px",h("doCode")),m.image=a("wmd-image-button",s("image"),"-100px",h(function(t,e){return this.doLinkOrImage(t,e,!0)})),l(2),m.olist=a("wmd-olist-button",s("olist"),"-120px",h(function(t,e){this.doList(t,e,!0)})),m.ulist=a("wmd-ulist-button",s("ulist"),"-140px",h(function(t,e){this.doList(t,e,!1)})),m.heading=a("wmd-heading-button",s("heading"),"-160px",h("doHeading")),m.hr=a("wmd-hr-button",s("hr"),"-180px",h("doHorizontalRule")),l(3),m.undo=a("wmd-undo-button",s("undo"),"-200px",null),m.undo.execute=function(t){t&&t.undo()},m.redo=a("wmd-redo-button",s("redo"),"-220px",null),m.redo.execute=function(t){t&&t.redo()},o){var c=document.createElement("li"),f=document.createElement("span");c.appendChild(f),c.className="wmd-button wmd-help-button",c.id="wmd-help-button"+t,c.XShift="-240px",c.isHelp=!0,c.style.right="0px",c.title=s("help"),c.onclick=o.handler,u(c,!0),r.appendChild(c),m.help=c}d()}function d(){n&&(u(m.undo,n.canUndo()),u(m.redo,n.canRedo()))}var p=e.input,m={};f();var v="keydown";g.isOpera&&(v="keypress"),MD.insertLink=l,this.setUndoRedoButtonStates=d,this.buttons=m,this.doClick=c}function o(t,e){this.hooks=t,this.getString=e}function s(t){return t.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(t,e,n){return e=e.replace(/\?.*$/,function(t){return t.replace(/\+/g," ")}),e=decodeURIComponent(e),e=encodeURI(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),e=e.replace(/\?.*$/,function(t){return t.replace(/\+/g,"%2b")}),n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,""),n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?e+' "'+n+'"':e})}var l={},c={},u={},h=window.document,f=window.RegExp,d=window.navigator,p={lineLength:72},g={isIE:/msie/.test(d.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(d.userAgent.toLowerCase())||/msie 5/.test(d.userAgent.toLowerCase()),isOpera:/opera/.test(d.userAgent.toLowerCase())},m={bold:"Strong <strong> Ctrl/Cmd+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl/Cmd+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl/Cmd+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:"Blockquote <blockquote> Ctrl/Cmd+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl/Cmd+K",codeexample:"enter code here",image:"Image <img> Ctrl/Cmd+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:"Numbered List <ol> Ctrl/Cmd+O",ulist:"Bulleted List <ul> Ctrl/Cmd+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl/Cmd+H",headingexample:"Heading",hr:"Horizontal Rule <hr> Ctrl/Cmd+R",undo:"Undo - Ctrl/Cmd+Z",redo:"Redo - Ctrl/Cmd+Y",help:"Markdown Editing Help"},v="http://",y="http://";Markdown.Editor=function(t,r,s){s=s||{},"function"==typeof s.handler&&(s={helpButton:s}),s.strings=s.strings||{},s.helpButton&&(s.strings.help=s.strings.help||s.helpButton.title);var l=function(t){return s.strings[t]||m[t]};r=r||"";var c=this.hooks=new Markdown.HookCollection;c.addNoop("onPreviewRefresh"),c.addNoop("postBlockquoteCreation"),c.addFalse("insertImageDialog"),c.addFalse("insertLinkDialog"),this.getConverter=function(){return t};var u,f,d=this;this.run=function(){if(!u){u=new e(r);var p,g=new o(c,l),m=new i(t,u,function(){c.onPreviewRefresh()});s.undoManager?(f=s.undoManager,f.onButtonStateChange=function(){p.setUndoRedoButtonStates()},p&&p.setUndoRedoButtonStates()):/\?noundo/.test(h.location.href)||(f=new n(function(){m.refresh(),p&&p.setUndoRedoButtonStates()},u),this.textOperation=function(t){f.setCommandMode(),t(),d.refreshPreview()}),p=new a(r,u,f,m,g,s.helpButton,l),p.setUndoRedoButtonStates();{d.refreshPreview=function(){m.refresh(!0)}}d.undoManager=f,d.uiManager=p}}},t.prototype.findTags=function(t,e){var n,r=this;t&&(n=l.extendRegExp(t,"","$"),this.before=this.before.replace(n,function(t){return r.startTag=r.startTag+t,""}),n=l.extendRegExp(t,"^",""),this.selection=this.selection.replace(n,function(t){return r.startTag=r.startTag+t,""})),e&&(n=l.extendRegExp(e,"","$"),this.selection=this.selection.replace(n,function(t){return r.endTag=t+r.endTag,""}),n=l.extendRegExp(e,"^",""),this.after=this.after.replace(n,function(t){return r.endTag=t+r.endTag,""}))},t.prototype.trimWhitespace=function(t){var e,n,r=this;t?e=n="":(e=function(t){return r.before+=t,""},n=function(t){return r.after=t+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,e).replace(/(\s*)$/,n)},t.prototype.skipLines=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=1),t++,e++;var r,i;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+f.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+f.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+f.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+f.$1,this.before){for(r=i="";t--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.before=this.before.replace(new f(r+"$",""),i)}if(this.after){for(r=i="";e--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.after=this.after.replace(new f(r,""),i)}},l.isVisible=function(t){return window.getComputedStyle?"none"!==window.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle?"none"!==t.currentStyle.display:void 0},l.addEvent=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n,!1)},l.removeEvent=function(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener(e,n,!1)},l.fixEolChars=function(t){return t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n")},l.extendRegExp=function(t,e,n){(null===e||void 0===e)&&(e=""),(null===n||void 0===n)&&(n="");var r,i=t.toString();return i=i.replace(/\/([gim]*)$/,function(t,e){return r=e,""}),i=i.replace(/(^\/|\/$)/g,""),i=e+i+n,new f(i,r)},c.getTop=function(t,e){var n=t.offsetTop;if(!e)for(;t=t.offsetParent;)n+=t.offsetTop;return n},c.getHeight=function(t){return t.offsetHeight||t.scrollHeight},c.getWidth=function(t){return t.offsetWidth||t.scrollWidth},c.getPageSize=function(){var t,e,n,r;self.innerHeight&&self.scrollMaxY?(t=h.body.scrollWidth,e=self.innerHeight+self.scrollMaxY):h.body.scrollHeight>h.body.offsetHeight?(t=h.body.scrollWidth,e=h.body.scrollHeight):(t=h.body.offsetWidth,e=h.body.offsetHeight),self.innerHeight?(n=self.innerWidth,r=self.innerHeight):h.documentElement&&h.documentElement.clientHeight?(n=h.documentElement.clientWidth,r=h.documentElement.clientHeight):h.body&&(n=h.body.clientWidth,r=h.body.clientHeight);var i=Math.max(t,n),a=Math.max(e,r);return[i,a,n,r]},u.createBackground=function(){var t=h.createElement("div"),e=t.style;t.className="wmd-prompt-background",e.position="absolute",e.top="0",e.zIndex="1000",g.isIE?e.filter="alpha(opacity=50)":e.opacity="0.5";var n=c.getPageSize();return e.height=n[1]+"px",g.isIE?(e.left=h.documentElement.scrollLeft,e.width=h.documentElement.clientWidth):(e.left="0",e.width="100%"),h.body.appendChild(t),t},u.prompt=function(t,e,n){var r,i;void 0===e&&(e="");var a=function(t){var e=t.charCode||t.keyCode;27===e&&o(!0)},o=function(t){l.removeEvent(h.body,"keydown",a);var e=i.value;return t?e=null:(e=e.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(e)||(e="http://"+e)),r.parentNode.removeChild(r),n(e),!1},s=function(){r=h.createElement("div"),r.className="wmd-prompt-dialog",r.style.padding="10px;",r.style.position="fixed",r.style.width="400px",r.style.zIndex="1001";var n=h.createElement("div");n.innerHTML=t,n.style.padding="5px",r.appendChild(n);var s=h.createElement("form"),u=s.style;s.onsubmit=function(){return o(!1)},u.padding="0",u.margin="0",u.cssFloat="left",u.width="100%",u.textAlign="center",u.position="relative",r.appendChild(s),i=h.createElement("input"),i.type="text",i.value=e,u=i.style,u.display="block",u.width="80%",u.marginLeft=u.marginRight="auto",s.appendChild(i);var f=h.createElement("input");f.type="button",f.onclick=function(){return o(!1)},f.value="OK",u=f.style,u.margin="10px",u.display="inline",u.width="7em";var d=h.createElement("input");d.type="button",d.onclick=function(){return o(!0)},d.value="Cancel",u=d.style,u.margin="10px",u.display="inline",u.width="7em",s.appendChild(f),s.appendChild(d),l.addEvent(h.body,"keydown",a),r.style.top="50%",r.style.left="50%",r.style.display="block",g.isIE_5or6&&(r.style.position="absolute",r.style.top=h.documentElement.scrollTop+200+"px",r.style.left="50%"),h.body.appendChild(r),r.style.marginTop=-(c.getHeight(r)/2)+"px",r.style.marginLeft=-(c.getWidth(r)/2)+"px"};setTimeout(function(){s();var t=e.length;if(void 0!==i.selectionStart)i.selectionStart=0,i.selectionEnd=t;else if(i.createTextRange){var n=i.createTextRange();n.collapse(!1),n.moveStart("character",-t),n.moveEnd("character",t),n.select()}i.focus()},0)};var b=o.prototype;b.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",b.unwrap=function(t){var e=new f("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");t.selection=t.selection.replace(e,"$1 $2")},b.wrap=function(t,e){this.unwrap(t);var n=new f("(.{1,"+e+"})( +|$\\n?)","gm"),r=this;t.selection=t.selection.replace(n,function(t,e){return new f("^"+r.prefixes,"").test(t)?t:e+"\n"}),t.selection=t.selection.replace(/\s+$/,"")},b.doBold=function(t,e){return this.doBorI(t,e,2,this.getString("boldexample"))},b.doItalic=function(t,e){return this.doBorI(t,e,1,this.getString("italicexample"))},b.doBorI=function(t,e,n,r){t.trimWhitespace(),t.selection=t.selection.replace(/\n{2,}/g,"\n");var i=/(\**$)/.exec(t.before)[0],a=/(^\**)/.exec(t.after)[0],o=Math.min(i.length,a.length);if(o>=n&&(2!=o||1!=n))t.before=t.before.replace(f("[*]{"+n+"}$",""),""),t.after=t.after.replace(f("^[*]{"+n+"}",""),"");else if(!t.selection&&a){t.after=t.after.replace(/^([*_]*)/,""),t.before=t.before.replace(/(\s?)$/,"");var s=f.$1;t.before=t.before+a+s}else{t.selection||a||(t.selection=r);var l=1>=n?"*":"**";t.before=t.before+l,t.after=l+t.after}},b.stripLinkDefs=function(t,e){return t=t.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(t,n,r,i,a){return e[n]=t.replace(/\s*$/,""),i?(e[n]=t.replace(/["(](.+?)[")]$/,""),i+a):""})},b.addLinkDef=function(t,e){var n=0,r={};t.before=this.stripLinkDefs(t.before,r),t.selection=this.stripLinkDefs(t.selection,r),t.after=this.stripLinkDefs(t.after,r);var i="",a=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(t){n++,t=t.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),i+="\n"+t},s=function(t,e,i,l,c,u){return i=i.replace(a,s),r[c]?(o(r[c]),e+i+l+n+u):t};t.before=t.before.replace(a,s),e?o(e):t.selection=t.selection.replace(a,s);var l=n;return t.after=t.after.replace(a,s),t.after&&(t.after=t.after.replace(/\n*$/,"")),t.after||(t.selection=t.selection.replace(/\n*$/,"")),t.after+="\n\n"+i,l},b.insertLink=function(t,e,n,r){isImage=!1,t.trimWhitespace(),t.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var i;if(!(t.endTag.length>1&&t.startTag.length>0)){if(t.selection=t.startTag+t.selection+t.endTag,t.startTag=t.endTag="",/\n\n/.test(t.selection))return void this.addLinkDef(t,null);var a=function(n){i.parentNode.removeChild(i),null!==n&&(t.selection=(" "+t.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),t.startTag=isImage?"![":"[",t.endTag="]("+s(n)+")",t.selection=r),e()};return i=u.createBackground(),a(n),!0}t.startTag=t.startTag.replace(/!?\[/,""),t.endTag="",this.addLinkDef(t,null)},b.doLinkOrImage=function(t,e,n){t.trimWhitespace(),t.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\(.*?\))?/);var r;if(!(t.endTag.length>1&&t.startTag.length>0)){if(t.selection=t.startTag+t.selection+t.endTag,t.startTag=t.endTag="",/\n\n/.test(t.selection))return void this.addLinkDef(t,null);var i=this,a=function(a){r.parentNode.removeChild(r),null!==a&&(t.selection=(" "+t.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),t.startTag=n?"![":"[",t.endTag="]("+s(a)+")",t.selection||(t.selection=i.getString(n?"imagedescription":"linkdescription"))),e()};return r=u.createBackground(),n?this.hooks.insertImageDialog(a)||u.prompt(this.getString("imagedialog"),v,a):this.hooks.insertLinkDialog(a)||u.prompt(this.getString("linkdialog"),y,a),!0}t.startTag=t.startTag.replace(/!?\[/,""),t.endTag="",this.addLinkDef(t,null)},b.doAutoindent=function(t){var e=this,n=!1;t.before=t.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),t.selection||/^[ \t]*(?:\n|$)/.test(t.after)||(t.after=t.after.replace(/^[^\n]*/,function(e){return t.selection=e,""}),n=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(t.before)&&e.doList&&e.doList(t),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(t.before)&&e.doBlockquote&&e.doBlockquote(t),/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&e.doCode&&e.doCode(t),n&&(t.after=t.selection+t.after,t.selection="")},b.doBlockquote=function(t){t.selection=t.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(e,n,r,i){return t.before+=n,t.after=i+t.after,r}),t.before=t.before.replace(/(>[ \t]*)$/,function(e,n){return t.selection=n+t.selection,""}),t.selection=t.selection.replace(/^(\s|>)+$/,""),t.selection=t.selection||this.getString("quoteexample");var e,n="",r="";if(t.before){for(var i=t.before.replace(/\n$/,"").split("\n"),a=!1,o=0;o<i.length;o++){var s=!1;e=i[o],a=a&&e.length>0,/^>/.test(e)?(s=!0,!a&&e.length>1&&(a=!0)):s=/^[ \t]*$/.test(e)?!0:a,s?n+=e+"\n":(r+=n+e,n="\n")}/(^|\n)>/.test(n)||(r+=n,n="")}t.startTag=n,t.before=r,t.after&&(t.after=t.after.replace(/^\n?/,"\n")),t.after=t.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(e){return t.endTag=e,""});var l=function(e){var n=e?"> ":"";t.startTag&&(t.startTag=t.startTag.replace(/\n((>|\s)*)\n$/,function(t,e){return"\n"+e.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),t.endTag&&(t.endTag=t.endTag.replace(/^\n((>|\s)*)\n/,function(t,e){return"\n"+e.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))};/^(?![ ]{0,3}>)/m.test(t.selection)?(this.wrap(t,p.lineLength-2),t.selection=t.selection.replace(/^/gm,"> "),l(!0),t.skipLines()):(t.selection=t.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(t),l(!1),!/^(\n|^)[ ]{0,3}>/.test(t.selection)&&t.startTag&&(t.startTag=t.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(t.selection)&&t.endTag&&(t.endTag=t.endTag.replace(/^\n{0,2}/,"\n\n"))),t.selection=this.hooks.postBlockquoteCreation(t.selection),/\n/.test(t.selection)||(t.selection=t.selection.replace(/^(> *)/,function(e,n){return t.startTag+=n,""}))},b.doCode=function(t){var e=/\S[ ]*$/.test(t.before),n=/^[ ]*\S/.test(t.after);if(!n&&!e||/\n/.test(t.selection)){t.before=t.before.replace(/[ ]{4}$/,function(e){return t.selection=e+t.selection,""});var r=1,i=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&(r=0),/^\n(\t|[ ]{4,})/.test(t.after)&&(i=0),t.skipLines(r,i),t.selection?/^[ ]{0,3}\S/m.test(t.selection)?/\n/.test(t.selection)?t.selection=t.selection.replace(/^/gm,"    "):t.before+="    ":t.selection=t.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(t.startTag="    ",t.selection=this.getString("codeexample"))}else t.trimWhitespace(),t.findTags(/`/,/`/),t.startTag||t.endTag?t.endTag&&!t.startTag?(t.before+=t.endTag,t.endTag=""):t.startTag=t.endTag="":(t.startTag=t.endTag="`",t.selection||(t.selection=this.getString("codeexample")))},b.doList=function(t,e,n){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,i=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,a="-",o=1,s=function(){var t;return n?(t=" "+o+". ",o++):t=" "+a+" ",t},l=function(t){return void 0===n&&(n=/^\s*\d/.test(t)),t=t.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return s()})};if(t.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!t.before||/\n$/.test(t.before)||/^\n/.test(t.startTag)||(t.before+=t.startTag,t.startTag=""),t.startTag){var c=/\d+[.]/.test(t.startTag);if(t.startTag="",t.selection=t.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(t),t.skipLines(),c&&(t.after=t.after.replace(i,l)),n==c)return}var u=1;t.before=t.before.replace(r,function(t){return/^\s*([*+-])/.test(t)&&(a=f.$1),u=/[^\n]\n\n[^\n]/.test(t)?1:0,l(t)}),t.selection||(t.selection=this.getString("litem"));var h=s(),d=1;t.after=t.after.replace(i,function(t){return d=/[^\n]\n\n[^\n]/.test(t)?1:0,l(t)}),t.trimWhitespace(!0),t.skipLines(u,d,!0),t.startTag=h;var g=h.replace(/./g," ");this.wrap(t,p.lineLength-g.length),t.selection=t.selection.replace(/\n/g,"\n"+g)},b.doHeading=function(t){if(t.selection=t.selection.replace(/\s+/g," "),t.selection=t.selection.replace(/(^\s+|\s+$)/g,""),!t.selection)return t.startTag="## ",t.selection=this.getString("headingexample"),void(t.endTag=" ##");var e=0;t.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(t.startTag)&&(e=f.lastMatch.length),t.startTag=t.endTag="",t.findTags(null,/\s?(-+|=+)/),/=+/.test(t.endTag)&&(e=1),/-+/.test(t.endTag)&&(e=2),t.startTag=t.endTag="",t.skipLines(1,1);var n=0==e?2:e-1;if(n>0){var r=n>=2?"-":"=",i=t.selection.length;for(i>p.lineLength&&(i=p.lineLength),t.endTag="\n";i--;)t.endTag+=r}},b.doHorizontalRule=function(t){t.startTag="----------\n",t.selection="",t.skipLines(2,1,!0)}}(),define("pagedown",function(){}),define("core",["underscore","crel","editor","constants","utils","storage","settings","eventMgr","pagedown"],function(t,e,n,r,i,a,o,s){function l(){f=!0,d=!0;var t=i.currentTime;t>p+1e3&&(p=t,s.onUserActive())}var c={};MD=n;var u,h,f=!1,d=!1,p=0;return c.initEditorFirst=function(){var t=new Markdown.Converter,e={_DoItalicsAndBold:function(t){return t=t.replace(/(\*\*|__)(?=\S)(.+?[*_]*)(?=\S)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)(.+?)(?=\S)\1/g,"<em>$2</em>")}};t.setOptions(e),u=new Markdown.Editor(t,void 0,{undoManager:n.undoMgr}),MD.insertLink2=u.insertLink,u.hooks.set("insertLinkDialog",function(t){return c.insertLinkCallback=t,i.resetModalInputs(),$(".modal-insert-link").modal(),!0}),u.hooks.set("insertImageDialog",function(t){if(c.insertLinkCallback=t,c.catchModal)return!0;i.resetModalInputs();var e=$("#leauiIfrForMD");return e.attr("src")||e.attr("src","/tinymce/plugins/leaui_image/index.html?md=1"),$(".modal-insert-image").modal(),!0}),s.onPagedownConfigure(u),u.hooks.chain("onPreviewRefresh",s.onAsyncPreview),u.run(),$(".wmd-button-row li").addClass("btn btn-success").css("left",0).find("span").hide();var r=$(".wmd-button-group1");$("#wmd-bold-button").append($('<i class="fa fa-bold">')).appendTo(r),$("#wmd-italic-button").append($('<i class="fa fa-italic">')).appendTo(r),r=$(".wmd-button-group2"),$("#wmd-link-button").append($('<i class="fa fa-link">')).appendTo(r),$("#wmd-quote-button").append($('<i class="fa fa-quote-left">')).appendTo(r),$("#wmd-code-button").append($('<i class="fa fa-code">')).appendTo(r),$("#wmd-image-button").append($('<i class="fa fa-picture-o">')).appendTo(r),r=$(".wmd-button-group3"),$("#wmd-olist-button").append($('<i class="fa fa-list-ol">')).appendTo(r),$("#wmd-ulist-button").append($('<i class="fa fa-list-ul">')).appendTo(r),$("#wmd-heading-button").append($('<i class="fa fa-header">')).appendTo(r),$("#wmd-hr-button").append($('<i class="fa fa-ellipsis-h">')).appendTo(r),r=$(".wmd-button-group5"),$("#wmd-undo-button").append($('<i class="fa fa-undo">')).appendTo(r),$("#wmd-redo-button").append($('<i class="fa fa-repeat">')).appendTo(r),$("#wmd-help-button").show()},c.initEditor=function(t){return void 0!==h&&s.onFileClosed(h),h=t,void 0!==u?(n.undoMgr.init(),u.uiManager.setUndoRedoButtonStates()):(c.initEditorFirst(),void n.undoMgr.init())},c.onReady=function(){document.body.className+=" "+o.editMode,i.init(),$(document).mousemove(l).keypress(l),s.onReady(),c.initEditorFirst(),n.init()},s.addListener("onReady",function(){$(document.body).on("shown.bs.modal",".modal",function(){var t=$(this);setTimeout(function(){t.find(".btn:first").focus(),t.find("button:first").focus(),t.find("input:enabled:visible:first").focus()},50)}).on("hidden.bs.modal",".modal",function(){n.focus()}).on("keypress",".modal",function(t){13!=t.which||$(t.target).is("textarea")||$(this).find(".modal-footer a:last").click()}),$(".action-insert-link").click(function(t){var e=i.getInputTextValue($("#input-insert-link"),t);void 0!==e&&(c.insertLinkCallback(e),c.insertLinkCallback=void 0)}),$(".action-insert-image").click(function(){var t=document.mdImageManager.mdGetImgSrc();t&&(c.insertLinkCallback(t),c.insertLinkCallback=void 0)}),$(".modal-insert-link, .modal-insert-image").on("hidden.bs.modal",function(){void 0!==c.insertLinkCallback&&(c.insertLinkCallback(null),c.insertLinkCallback=void 0)}),$("div.dropdown-menu").click(function(t){t.stopPropagation()}),$("#wmd-help-button").click(function(){window.open("http://leanote.com/blog/view/531b263bdfeb2c0ea9000002")}),t.each(document.querySelectorAll("img"),function(t){var e=$(t),n=e.data("stackeditSrc");n&&e.attr("src",window.baseDir+"/img/"+n)})}),c}),define("css/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,n){n()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;e[1]||e[7]?n=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?r=!1:e[4]&&(n=parseInt(e[4])<18);var i={};i.pluginBuilder="./css-builder";var a,o,s,l=function(){a=document.createElement("style"),t.appendChild(a),o=a.styleSheet||a.sheet},c=0,u=[],h=function(t){c++,32==c&&(l(),c=0),o.addImport(t),a.onload=function(){f()}},f=function(){s();var t=u.shift();return t?(s=t[1],void h(t[0])):void(s=null)},d=function(t,e){if(o&&o.addImport||l(),o&&o.addImport)s?u.push([t,e]):(h(t),s=e);else{a.textContent='@import "'+t+'";';var n=setInterval(function(){try{a.sheet.cssRules,clearInterval(n),e()}catch(t){}},10)}},p=function(e,n){var i=document.createElement("link");if(i.type="text/css",i.rel="stylesheet",r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var a=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==i.href)return clearInterval(a),n()}},10);i.href=e,t.appendChild(i)};return i.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},i.load=function(t,e,r){(n?d:p)(e.toUrl(t+".css"),r)},i}),define("css",["css/css"],function(t){return t}),rangy.createModule("CssClassApplier",function(t,e){function n(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r(t,e){return t.className&&new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(t.className)}function i(t,e){t.className?r(t,e)||(t.className+=" "+e):t.className=e}function a(t){return t.split(/\s+/).sort().join(" ")}function o(t){return a(t.className)}function s(t,e){return o(t)==o(e)}function l(t){for(var e=t.parentNode;t.hasChildNodes();)e.insertBefore(t.firstChild,t);e.removeChild(t)}function c(t,e){var n=t.cloneRange();n.selectNodeContents(e);var r=n.intersection(t),i=r?r.toString():"";return n.detach(),""!=i}function u(t){return t.getNodes([3],function(e){return c(t,e)})}function h(t,e){if(t.attributes.length!=e.attributes.length)return!1;
for(var n,r,i,a=0,o=t.attributes.length;o>a;++a)if(n=t.attributes[a],i=n.name,"class"!=i){if(r=e.attributes.getNamedItem(i),n.specified!=r.specified)return!1;if(n.specified&&n.nodeValue!==r.nodeValue)return!1}return!0}function f(t,e){for(var n,r=0,i=t.attributes.length;i>r;++r)if(n=t.attributes[r].name,(!e||!k.arrayContains(e,n))&&t.attributes[r].specified&&"class"!=n)return!0;return!1}function d(t,e){for(var n in e)if(e.hasOwnProperty(n)&&t[n]!==e[n])return!1;return!0}function p(t){var e;return t&&1==t.nodeType&&((e=t.parentNode)&&9==e.nodeType&&"on"==e.designMode||N(t)&&!N(t.parentNode))}function g(t){return(N(t)||1!=t.nodeType&&N(t.parentNode))&&!p(t)}function m(t){return t&&1==t.nodeType&&!R.test(E(t,"display"))}function v(t){if(0==t.data.length)return!0;if(A.test(t.data))return!1;var e=E(t.parentNode,"whiteSpace");switch(e){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(t.data))return!1}return m(t.previousSibling)||m(t.nextSibling)}function y(t,e){return k.isCharacterDataNode(t)?0==e?!!t.previousSibling:e==t.length?!!t.nextSibling:!0:e>0&&e<t.childNodes.length}function b(t,n,r,i){var a,o=0==r;if(k.isAncestorOf(n,t))return t;if(k.isCharacterDataNode(n))if(0==r)r=k.getNodeIndex(n),n=n.parentNode;else{if(r!=n.length)throw e.createError("splitNodeAt should not be called with offset in the middle of a data node ("+r+" in "+n.data);r=k.getNodeIndex(n)+1,n=n.parentNode}if(y(n,r)){if(!a){a=n.cloneNode(!1),a.id&&a.removeAttribute("id");for(var s;s=n.childNodes[r];)a.appendChild(s);k.insertAfter(a,n)}return n==t?a:b(t,a.parentNode,k.getNodeIndex(a),i)}if(t!=n){a=n.parentNode;var l=k.getNodeIndex(n);return o||l++,b(t,a,l,i)}return t}function x(t,e){return t.tagName==e.tagName&&s(t,e)&&h(t,e)}function w(t){var e=t?"nextSibling":"previousSibling";return function(n,r){var i=n.parentNode,a=n[e];if(a){if(a&&3==a.nodeType)return a}else if(r&&(a=i[e],a&&1==a.nodeType&&x(i,a)))return a[t?"firstChild":"lastChild"];return null}}function _(t){this.isElementMerge=1==t.nodeType,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function C(t,e,r){this.cssClass=t;var i,o,s,l,c=null;if("object"==typeof e&&null!==e){for(r=e.tagNames,c=e.elementProperties,o=0;l=O[o++];)e.hasOwnProperty(l)&&(this[l]=e[l]);i=e.normalize}else i=e;this.normalize="undefined"==typeof i?!0:i,this.attrExceptions=[];var u=document.createElement(this.elementTagName);this.elementProperties={};for(var h in c)c.hasOwnProperty(h)&&(D.hasOwnProperty(h)&&(h=D[h]),u[h]=c[h],this.elementProperties[h]=u[h],this.attrExceptions.push(h));this.elementSortedClassName=this.elementProperties.hasOwnProperty("className")?a(this.elementProperties.className+" "+t):t,this.applyToAnyTagName=!1;var f=typeof r;if("string"==f)"*"==r?this.applyToAnyTagName=!0:this.tagNames=n(r.toLowerCase()).split(/\s*,\s*/);else if("object"==f&&"number"==typeof r.length)for(this.tagNames=[],o=0,s=r.length;s>o;++o)"*"==r[o]?this.applyToAnyTagName=!0:this.tagNames.push(r[o].toLowerCase());else this.tagNames=[this.elementTagName]}function S(t,e,n){return new C(t,e,n)}t.requireModules(["WrappedSelection","WrappedRange"]);var E,k=t.dom,T="span",I=function(){function t(t,e,n){return e&&n?" ":""}return function(e,n){e.className&&(e.className=e.className.replace(new RegExp("(?:^|\\s)"+n+"(?:\\s|$)"),t))}}();"undefined"!=typeof window.getComputedStyle?E=function(t,e){return k.getWindow(t).getComputedStyle(t,null)[e]}:"undefined"!=typeof document.documentElement.currentStyle?E=function(t,e){return t.currentStyle[e]}:e.fail("No means of obtaining computed style properties found");var N;!function(){var t=document.createElement("div");N="boolean"==typeof t.isContentEditable?function(t){return t&&1==t.nodeType&&t.isContentEditable}:function(t){return t&&1==t.nodeType&&"false"!=t.contentEditable?"true"==t.contentEditable||N(t.parentNode):!1}}();var R=/^inline(-block|-table)?$/i,A=/[^\r\n\t\f \u200B]/,M=w(!1),L=w(!0);_.prototype={doMerge:function(){for(var t,e,n,r=[],i=0,a=this.textNodes.length;a>i;++i)t=this.textNodes[i],e=t.parentNode,r[i]=t.data,i&&(e.removeChild(t),e.hasChildNodes()||e.parentNode.removeChild(e));return this.firstTextNode.data=n=r.join(""),n},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,n=this.textNodes.length;n>e;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}};var O=["elementTagName","ignoreWhiteSpace","applyToEditableOnly"],D={"class":"className"};C.prototype={elementTagName:T,elementProperties:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,hasClass:function(t){return 1==t.nodeType&&k.arrayContains(this.tagNames,t.tagName.toLowerCase())&&r(t,this.cssClass)},getSelfOrAncestorWithClass:function(t){for(;t;){if(this.hasClass(t,this.cssClass))return t;t=t.parentNode}return null},isModifiable:function(t){return!this.applyToEditableOnly||g(t)},isIgnorableWhiteSpaceNode:function(t){return this.ignoreWhiteSpace&&t&&3==t.nodeType&&v(t)},postApply:function(t,e,n){for(var r,i,a,o=t[0],s=t[t.length-1],l=[],c=o,u=s,h=0,f=s.length,d=0,p=t.length;p>d;++d)i=t[d],a=M(i,!n),a?(r||(r=new _(a),l.push(r)),r.textNodes.push(i),i===o&&(c=r.firstTextNode,h=c.length),i===s&&(u=r.firstTextNode,f=r.getLength())):r=null;var g=L(s,!n);if(g&&(r||(r=new _(s),l.push(r)),r.textNodes.push(g)),l.length){for(d=0,p=l.length;p>d;++d)l[d].doMerge();e.setStart(c,h),e.setEnd(u,f)}},createContainer:function(e){var n=e.createElement(this.elementTagName);return t.util.extend(n,this.elementProperties),i(n,this.cssClass),n},applyToTextNode:function(t){var e=t.parentNode;if(1==e.childNodes.length&&k.arrayContains(this.tagNames,e.tagName.toLowerCase()))i(e,this.cssClass);else{var n=this.createContainer(k.getDocument(t));t.parentNode.insertBefore(n,t),n.appendChild(t)}},isRemovable:function(t){return t.tagName.toLowerCase()==this.elementTagName&&o(t)==this.elementSortedClassName&&d(t,this.elementProperties)&&!f(t,this.attrExceptions)&&this.isModifiable(t)},undoToTextNode:function(t,e,n){if(!e.containsNode(n)){var r=e.cloneRange();r.selectNode(n),r.isPointInRange(e.endContainer,e.endOffset)&&(b(n,e.endContainer,e.endOffset,[e]),e.setEndAfter(n)),r.isPointInRange(e.startContainer,e.startOffset)&&(n=b(n,e.startContainer,e.startOffset,[e]))}this.isRemovable(n)?l(n):I(n,this.cssClass)},applyToRange:function(t){t.splitBoundaries();var e=u(t);if(e.length){for(var n,r=0,i=e.length;i>r;++r)n=e[r],this.isIgnorableWhiteSpaceNode(n)||this.getSelfOrAncestorWithClass(n)||!this.isModifiable(n)||this.applyToTextNode(n);t.setStart(e[0],0),n=e[e.length-1],t.setEnd(n,n.length),this.normalize&&this.postApply(e,t,!1)}},applyToSelection:function(e){e=e||window;var n,r=t.getSelection(e),i=r.getAllRanges();r.removeAllRanges();for(var a=i.length;a--;)n=i[a],this.applyToRange(n),r.addRange(n)},undoToRange:function(t){t.splitBoundaries();var e,n,r=u(t),i=r[r.length-1];if(r.length){for(var a=0,o=r.length;o>a;++a)e=r[a],n=this.getSelfOrAncestorWithClass(e),n&&this.isModifiable(e)&&this.undoToTextNode(e,t,n),t.setStart(r[0],0),t.setEnd(i,i.length);this.normalize&&this.postApply(r,t,!0)}},undoToSelection:function(e){e=e||window;var n,r=t.getSelection(e),i=r.getAllRanges();r.removeAllRanges();for(var a=0,o=i.length;o>a;++a)n=i[a],this.undoToRange(n),r.addRange(n)},getTextSelectedByRange:function(t,e){var n=e.cloneRange();n.selectNodeContents(t);var r=n.intersection(e),i=r?r.toString():"";return n.detach(),i},isAppliedToRange:function(t){if(t.collapsed)return!!this.getSelfOrAncestorWithClass(t.commonAncestorContainer);for(var e,n=t.getNodes([3]),r=0;e=n[r++];)if(!this.isIgnorableWhiteSpaceNode(e)&&c(t,e)&&this.isModifiable(e)&&!this.getSelfOrAncestorWithClass(e))return!1;return!0},isAppliedToSelection:function(e){e=e||window;for(var n=t.getSelection(e),r=n.getAllRanges(),i=r.length;i--;)if(!this.isAppliedToRange(r[i]))return!1;return!0},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)},toggleSelection:function(t){this.isAppliedToSelection(t)?this.undoToSelection(t):this.applyToSelection(t)},detach:function(){}},C.util={hasClass:r,addClass:i,removeClass:I,hasSameClasses:s,replaceWithOwnChildren:l,elementsHaveSameNonClassAttributes:h,elementHasNonClassAttributes:f,splitNodeAt:b,isEditableElement:N,isEditingHost:p,isEditable:g},t.CssClassApplier=C,t.createCssClassApplier=S}),define("rangy-cssclassapplier",function(){}),function(t){t(jQuery)}(function(t,e){var n=0,r=Array.prototype.slice,i=t.cleanData;t.cleanData=function(e){for(var n,r=0;null!=(n=e[r]);r++)try{t(n).triggerHandler("remove")}catch(a){}i(e)},t.widget=function(e,n,r){var i,a,o,s,l={},c=e.split(".")[0];e=e.split(".")[1],i=c+"-"+e,r||(r=n,n=t.Widget),t.expr[":"][i.toLowerCase()]=function(e){return!!t.data(e,i)},t[c]=t[c]||{},a=t[c][e],o=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,a,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(r,function(e,r){return t.isFunction(r)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},i=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,a=this._superApply;return this._super=t,this._superApply=i,e=r.apply(this,arguments),this._super=n,this._superApply=a,e}}()):void(l[e]=r)}),o.prototype=t.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:e},l,{constructor:o,namespace:c,widgetName:e,widgetFullName:i}),a?(t.each(a._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(n){for(var i,a,o=r.call(arguments,1),s=0,l=o.length;l>s;s++)for(i in o[s])a=o[s][i],o[s].hasOwnProperty(i)&&a!==e&&(n[i]=t.isPlainObject(a)?t.isPlainObject(n[i])?t.widget.extend({},n[i],a):t.widget.extend({},a):a);return n},t.widget.bridge=function(n,i){var a=i.prototype.widgetFullName||n;t.fn[n]=function(o){var s="string"==typeof o,l=r.call(arguments,1),c=this;return o=!s&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,this.each(s?function(){var r,i=t.data(this,a);return i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(r=i[o].apply(i,l),r!==i&&r!==e?(c=r&&r.jquery?c.pushStack(r.get()):r,!1):void 0):t.error("no such method '"+o+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}:function(){var e=t.data(this,a);e?e.option(o||{})._init():t.data(this,a,new i(o,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,r){r=t(r||this.defaultElement||this)[0],this.element=t(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),r!==this&&(t.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===r&&this.destroy()}}),this.document=t(r.style?r.ownerDocument:r.document||r),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,r){var i,a,o,s=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(s={},i=n.split("."),n=i.shift(),i.length){for(a=s[n]=t.widget.extend({},this.options[n]),o=0;o<i.length-1;o++)a[i[o]]=a[i[o]]||{},a=a[i[o]];if(n=i.pop(),r===e)return a[n]===e?null:a[n];a[n]=r}else{if(r===e)return this.options[n]===e?null:this.options[n];s[n]=r}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,r){var i,a=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=i=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),t.each(r,function(r,o){function s(){return e||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||t.guid++);var l=r.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?i.delegate(u,c,s):n.bind(c,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?r[t]:t).apply(r,arguments)}var r=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var i,a,o=this.options[e];if(r=r||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,r),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,i,a){"string"==typeof i&&(i={effect:i});var o,s=i?i===!0||"number"==typeof i?n:i.effect||n:e;i=i||{},"number"==typeof i&&(i={duration:i}),o=!t.isEmptyObject(i),i.complete=a,i.delay&&r.delay(i.delay),o&&t.effects&&t.effects.effect[s]?r[e](i):s!==e&&r[s]?r[s](i.duration,i.easing,a):r.queue(function(n){t(this)[e](),a&&a.call(r[0]),n()})}})}),define("jquery.ui.widget",function(){}),function(t){t(window.jQuery)}(function(t){var e=0;t.ajaxTransport("iframe",function(n){if(n.async){var r,i,a;return{send:function(o,s){r=t('<form style="display:none;"></form>'),r.attr("accept-charset",n.formAcceptCharset),a=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+a+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+a+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+a+"_method=PATCH",n.type="POST"),i=t('<iframe src="javascript:false;" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var e,a=t.isArray(n.paramName)?n.paramName:[n.paramName];i.unbind("load").bind("load",function(){var e;try{if(e=i.contents(),!e.length||!e[0].firstChild)throw new Error}catch(n){e=void 0}s(200,"success",{iframe:e}),t('<iframe src="javascript:false;"></iframe>').appendTo(r),r.remove()}),r.prop("target",i.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&t.each(n.formData,function(e,n){t('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(r)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(e=n.fileInput.clone(),n.fileInput.after(function(t){return e[t]}),n.paramName&&n.fileInput.each(function(e){t(this).prop("name",a[e]||n.paramName)}),r.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),r.submit(),e&&e.length&&n.fileInput.each(function(n,r){var i=t(e[n]);t(r).prop("name",i.prop("name")),i.replaceWith(r)})}),r.append(i).appendTo(document.body)},abort:function(){i&&i.unbind("load").prop("src","javascript".concat(":false;")),r&&r.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),define("iframe-transport",function(){}),function(t){t(window.jQuery)}(function(t){t.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,formData:function(t){return t.serializeArray()},add:function(e,n){(n.autoUpload||n.autoUpload!==!1&&(t(this).data("blueimp-fileupload")||t(this).data("fileupload")).options.autoUpload)&&n.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var r=t-this.timestamp;return(!this.bitrate||!n||r>n)&&(this.bitrate=(e-this.loaded)*(1e3/r)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"==typeof e.formData?e.formData(e.form):t.isArray(e.formData)?e.formData:e.formData?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_initProgressObject:function(t){t._progress={loaded:0,total:0,bitrate:0}},_onProgress:function(t,e){if(t.lengthComputable){var n,r=+new Date;if(e._time&&e.progressInterval&&r-e._time<e.progressInterval&&t.loaded!==t.total)return;e._time=r,n=Math.floor(t.loaded/t.total*(e.chunkSize||e._progress.total))+(e.uploadedBytes||0),this._progress.loaded+=n-e._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,e.bitrateInterval),e._progress.loaded=e.loaded=n,e._progress.bitrate=e.bitrate=e._bitrateTimer.getBitrate(r,n,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,this._progress)}},_initProgressListener:function(e){var n=this,r=e.xhr?e.xhr():t.ajaxSettings.xhr();r.upload&&(t(r.upload).bind("progress",function(t){var r=t.originalEvent;t.lengthComputable=r.lengthComputable,t.loaded=r.loaded,t.total=r.total,n._onProgress(t,e)}),e.xhr=function(){return r})},_initXHRData:function(e){var n,r=e.files[0],i=e.multipart||!t.support.xhrFileUpload,a=e.paramName[0];if(e.headers=e.headers||{},e.contentRange&&(e.headers["Content-Range"]=e.contentRange),i){if(t.support.xhrFormDataFileUpload){if(e.postMessage)n=this._getFormData(e),e.blob?n.push({name:a,value:e.blob}):t.each(e.files,function(t,r){n.push({name:e.paramName[t]||a,value:r})});else{if(e.formData instanceof FormData)n=e.formData;else{n=new FormData;var o=this._getFormData(e);log(o),t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})}e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',n.append(a,e.blob,r.name)):t.each(e.files,function(t,r){(window.Blob&&r instanceof Blob||window.File&&r instanceof File)&&n.append(e.paramName[t]||a,r,r.name)})}e.data=n}}else e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',e.contentType=r.type,e.data=e.blob||r;e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t,"iframe")},_getParamName:function(e){var n=t(e.fileInput),r=e.paramName;return r?t.isArray(r)||(r=[r]):(r=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",i=(e.prop("files")||[1]).length;i;)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.urlFunc&&(e.url=e.urlFunc()),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,r){var i=t.Deferred(),a=i.promise();return n=n||this.options.context||a,e===!0?i.resolveWith(n,r):e===!1&&i.rejectWith(n,r),a.abort=i.promise,this._enhancePromise(a)},_addConvenienceMethods:function(t,e){var n=this;e.submit=function(){return"pending"!==this.state()&&(e.jqXHR=this.jqXHR=n._trigger("submit",t,this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},e.abort=function(){return this.jqXHR?this.jqXHR.abort():this._getXHRPromise()},e.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):void 0},e.progress=function(){return this._progress}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(e,n){var r,i,a=this,o=e.files[0],s=o.size,l=e.uploadedBytes=e.uploadedBytes||0,c=e.maxChunkSize||s,u=o.slice||o.webkitSlice||o.mozSlice,h=t.Deferred(),f=h.promise();return this._isXHRUpload(e)&&u&&(l||s>c)&&!e.data?n?!0:l>=s?(o.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",o.error])):(i=function(){var n=t.extend({},e),f=n._progress.loaded;n.blob=u.call(o,l,l+c,o.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,a._initXHRData(n),a._initProgressListener(n),r=(a._trigger("chunksend",null,n)!==!1&&t.ajax(n)||a._getXHRPromise(!1,n.context)).done(function(r,o,c){l=a._getUploadedBytes(c)||l+n.chunkSize,n._progress.loaded===f&&a._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=l,n.result=r,n.textStatus=o,n.jqXHR=c,a._trigger("chunkdone",null,n),a._trigger("chunkalways",null,n),s>l?i():h.resolveWith(n.context,[r,o,c])}).fail(function(t,e,r){n.jqXHR=t,n.textStatus=e,n.errorThrown=r,a._trigger("chunkfail",null,n),a._trigger("chunkalways",null,n),h.rejectWith(n.context,[t,e,r])})},this._enhancePromise(f),f.abort=function(){return r.abort()},i(),f):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),e._progress||(e._progress={}),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,r,i){var a=i._progress.total;i._progress.loaded<a&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:a,total:a}),i),i.result=e,i.textStatus=n,i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(t,e,n,r){r.jqXHR=t,r.textStatus=e,r.errorThrown=n,this._trigger("fail",null,r),r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total)},_onAlways:function(t,e,n,r){this._active-=1,this._trigger("always",null,r),0===this._active&&this._trigger("stop")},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var r,i,a,o,s=this,l=s._getAJAXSettings(n),c=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,r=r||((i||s._trigger("send",e,l)===!1)&&s._getXHRPromise(!1,l.context,i)||s._chunkedUpload(l)||t.ajax(l)).done(function(t,e,n){s._onDone(t,e,n,l)}).fail(function(t,e,n){s._onFail(t,e,n,l)}).always(function(t,e,n){if(s._sending-=1,s._onAlways(t,e,n,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var r=s._slots.shift();r;){if("pending"===s._getDeferredState(r)){r.resolve();break}r=s._slots.shift()}})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=t.Deferred(),this._slots.push(a),o=a.pipe(c)):o=this._sequence=this._sequence.pipe(c,c),o.abort=function(){return i=[void 0,"abort","abort"],r?r.abort():(a&&a.rejectWith(l.context,i),c())},this._enhancePromise(o)):c()},_onAdd:function(e,n){var r,i,a,o,s=this,l=!0,c=t.extend({},this.options,n),u=c.limitMultiFileUploads,h=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(a=[],r=[],o=0;o<n.files.length;o+=u)a.push(n.files.slice(o,o+u)),i=h.slice(o,o+u),i.length||(i=h),r.push(i);else r=h;else a=[n.files],r=[h];return n.originalFiles=n.files,t.each(a||n.files,function(i,o){var c=t.extend({},n);return c.files=a?o:[o],c.paramName=r[i],s._initProgressObject(c),s._addConvenienceMethods(e,c),l=s._trigger("add",e,c)}),l},_replaceFileInput:function(e){var n=e.clone(!0);t("<form></form>").append(n)[0].reset(),e.after(n).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,r){return r===e[0]?n[0]:r}),e[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,n){var r,i=this,a=t.Deferred(),o=function(t){t&&!t.entry&&(t.entry=e),a.resolve([t])};return n=n||"",e.isFile?e._file?(e._file.relativePath=n,a.resolve(e._file)):e.file(function(t){t.relativePath=n,a.resolve(t)},o):e.isDirectory?(r=e.createReader(),r.readEntries(function(t){i._handleFileTreeEntries(t,n+e.name+"/").done(function(t){a.resolve(t)}).fail(o)},o)):a.resolve([]),a.promise()},_handleFileTreeEntries:function(e,n){var r=this;return t.when.apply(t,t.map(e,function(t){return r._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,r,i=e.prop("webkitEntries")||e.prop("entries");if(i&&i.length)return this._handleFileTreeEntries(i);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(r=e.prop("value"),!r)return t.Deferred().resolve([]).promise();n=[{name:r.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,r={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(r.fileInput).always(function(t){r.files=t,n.options.replaceFileInput&&n._replaceFileInput(r.fileInput),n._trigger("change",e,r)!==!1&&n._onAdd(e,r)})},_onPaste:function(e){var n=e.originalEvent.clipboardData,r=n&&n.items||[],i={files:[]};return t.each(r,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e,i)===!1||this._onAdd(e,i)===!1?!1:void 0},_onDrop:function(t){var e=this,n=t.dataTransfer=t.originalEvent.dataTransfer,r={};n&&n.files&&n.files.length&&t.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,e._trigger("drop",t,r)!==!1&&e._onAdd(t,r)})},_onDragOver:function(e){var n=e.dataTransfer=e.originalEvent.dataTransfer;return this._trigger("dragover",e)===!1?!1:void(n&&-1!==t.inArray("Files",n.types)&&(n.dropEffect="copy",e.preventDefault()))},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var r=-1!==t.inArray(e,this._refreshOptionsList);r&&this._destroyEventHandlers(),this._super(e,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_create:function(){var e=this.options;t.extend(e,t(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,r,i=this,a=t.Deferred(),o=a.promise();return o.abort=function(){return r=!0,n?n.abort():(a.reject(null,"abort","abort"),o)},this._getFileInputFiles(e.fileInput).always(function(t){r||(e.files=t,n=i._onSend(null,e).then(function(t,e,n){a.resolve(t,e,n)},function(t,e,n){a.reject(t,e,n)}))}),this._enhancePromise(o)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),define("fileupload",["jquery.ui.widget","iframe-transport"],function(){});var urlPrefix=UrlPrefix;define("editor_drop_paste",["jquery.ui.widget","fileupload"],function(){function t(t){var e="__mcenew"+(new Date).getTime(),n='<div contenteditable="false" id="'+e+'" class="leanote-image-container"><img class="loader" src="/images/ajax-loader.gif"><div class="progress"><div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">0%</div></div></div>';this.containerStr=n,t.insertContent(n);var r=$("#"+e);this.container=r,this.id=e,this.processBar=r.find(".progress-bar")}function e(t,e){function n(t,n){r.parentNode.removeChild(r),e({width:t,height:n})}var r=document.createElement("img");r.onload=function(){n(r.clientWidth,r.clientHeight)},r.onerror=function(){n()},r.src=t;var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left=0,i.width=i.height="auto",document.body.appendChild(r)
}function n(t){var n=tinymce.activeEditor,i=n.dom,a=function(n){function a(){i.setAttrib(o,"src",n.src),n.title&&i.setAttrib(o,"title",n.title),i.setAttrib(o,"id",null)}var o,s={};s.id="__mcenew"+r++,s.src="http://leanote.com/images/loading-24.gif",o=i.createHTML("img",s),tinymce.activeEditor.insertContent(o),o=i.get(s.id),e(t.src,a)},o="";if(fileIds=t.src.split("fileId="),2==fileIds.length&&fileIds[1].length=="53aecf8a8a039a43c8036282".length&&(o=fileIds[1]),o){var s=Note.getCurNote();s&&s.UserId!=UserInfo.UserId?!function(t){ajaxPost("/file/copyImage",{userId:UserInfo.UserId,fileId:o,toUserId:s.UserId},function(e){if(reIsOk(e)&&e.Id){var n=window.location.protocol+"//"+window.location.host;t.src=n+"/file/outputImage?fileId="+e.Id}a(t)})}(t):a(t)}else a(t)}t.prototype.update=function(t){var e=this;t=Math.ceil(100*t),t>=100&&(t=99),t+="%",$("#"+e.id+" .progress-bar").html(t).css("width",t)},t.prototype.replace=function(t){var n=this;e(t,function(){$("#"+n.id).replaceWith('<img src="'+t+'" />')})},t.prototype.remove=function(){var t=this;$("#"+t.id).remove()};var r=1,i=function(){function t(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB"}function e(){$("#upload").css("z-index",12);var t=+$("#mceToolbar").css("height").slice(0,-2);$("#upload").css("top",t-8),$("#upload").show()}function r(){$("#upload").css("z-index",0).css("top","auto").hide()}var i=$("#upload ul");$("#drop a").click(function(){$(this).parent().find("input").click()}),$("#upload").fileupload({dataType:"json",pasteZone:"",acceptFileTypes:/(\.|\/)(gif|jpg|jpeg|png|jpe)$/i,maxFileSize:21e4,dropZone:$("#drop"),formData:function(){return[{name:"albumId",value:""}]},add:function(e,n){var r=$('<li><div class="alert alert-info"><img class="loader" src="/tinymce/plugins/leaui_image/public/images/ajax-loader.gif"> <a class="close" data-dismiss="alert"></a></div></li>');r.find("div").append(n.files[0].name+" <small>[<i>"+t(n.files[0].size)+"</i>]</small>"),n.context=r.appendTo(i);n.submit()},done:function(e,r){if(1==r.result.Ok){r.context.remove();var i={src:urlPrefix+"/file/outputImage?fileId="+r.result.Id};n(i)}else{r.context.empty();var a=$('<li><div class="alert alert-danger"><a class="close" data-dismiss="alert"></a></div></li>');a.find("div").append("<b>Error:</b> "+r.files[0].name+" <small>[<i>"+t(r.files[0].size)+"</i>]</small> "+r.result.Msg),r.context.append(a),setTimeout(function(t){return function(){t.remove()}}(a),2e3)}$("#uploadMsg").scrollTop(1e3)},fail:function(e,n){n.context.empty();var r=$('<li><div class="alert alert-danger"><a class="close" data-dismiss="alert"></a></div></li>');r.find("div").append("<b>Error:</b> "+n.files[0].name+" <small>[<i>"+t(n.files[0].size)+"</i>]</small> "+n.errorThrown),n.context.append(r),setTimeout(function(t){return function(){t.remove()}}(r),2e3),$("#uploadMsg").scrollTop(1e3)}}),$(document).on("drop dragover",function(t){t.preventDefault()}),$(document).bind("dragover",function(t){var n=$("#drop"),i=window.dropZoneTimeout;i?clearTimeout(i):(n.addClass("in"),e());var a=!1,o=t.target;do{if(o===n[0]){a=!0;break}o=o.parentNode}while(null!=o);a?n.addClass("hover"):n.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,n.removeClass("in hover"),r()},100)})},a=function(){var e;$("#editorContent").fileupload({dataType:"json",pasteZone:$("#editorContent"),dropZone:"",maxFileSize:21e4,url:"/file/pasteImage",paramName:"file",formData:function(){return[{name:"from",value:"pasteImage"},{name:"noteId",value:Note.curNoteId}]},progress:function(t,e){e.process.update(e.loaded/e.total)},add:function(n,r){var i=Note.getCurNote();if(!i||i.IsNew)return void alert("This note hasn't saved, please save it firstly!");e=tinymce.EditorManager.activeEditor;var a=new t(e);r.process=a;r.submit()},done:function(t,e){if(1==e.result.Ok){var n=e.result,r=UrlPrefix,i=r+"/file/outputImage?fileId="+n.Id;e.process.replace(i)}else e.process.remove()},fail:function(t,e){e.process.remove()}})};i(),a()});var urlPrefix=UrlPrefix;define("attachment_upload",["jquery.ui.widget","fileupload"],function(){function t(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB"}function e(t,e){var n=$(t);$(e).bind("dragover",function(t){t.preventDefault();var e=window.dropZoneTimeoutAttach;e&&clearTimeout(e);var r=!1,i=t.target;do{if(i===n[0]){r=!0;break}i=i.parentNode}while(null!=i);r?n.addClass("hover"):n.removeClass("hover"),window.dropZoneTimeoutAttach=setTimeout(function(){window.dropZoneTimeoutAttach=null,n.removeClass("in hover")},100)})}e("#dropAttach","#uploadAttach"),e("#dropAvatar","#uploadAvatar");var n=function(){$(".dropzone .btn-choose-file").click(function(){$(this).parent().find("input").click()});var e=$("#attachUploadMsg");$("#uploadAttach").fileupload({dataType:"json",pasteZone:"",dropZone:$("#dropAttach"),formData:function(){return[{name:"noteId",value:Note.curNoteId}]},add:function(n,r){var i=Note.getCurNote();if(!i||i.IsNew)return void alert("This note hasn't saved, please save it firstly!");var a=$('<div class="alert alert-info"><img class="loader" src="/tinymce/plugins/leaui_image/public/images/ajax-loader.gif"> <a class="close" data-dismiss="alert"></a></div>');a.append(r.files[0].name+" <small>[<i>"+t(r.files[0].size)+"</i>]</small>"),e.html(a),r.context=e;var o=r.files[0].size,s=+GlobalConfigs.uploadAttachSize||100;if("number"==typeof o&&o>1048576*s)return a.find("img").remove(),a.removeClass("alert-info").addClass("alert-danger"),a.append(" Warning: File size is bigger than "+s+"M"),void setTimeout(function(t){return function(){t.remove()}}(a),3e3);var l;setTimeout(function(){l=r.submit()},10)},done:function(e,n){if(1==n.result.Ok)n.context.html(""),Attach.addAttach(n.result.Item);else{{n.result}n.context.html("");var r=$('<div class="alert alert-danger"><a class="close" data-dismiss="alert"></a></div>');r.append("<b>Error:</b> "+n.files[0].name+" <small>[<i>"+t(n.files[0].size)+"</i>]</small> "+n.result.Msg),n.context.html(r),setTimeout(function(t){return function(){t.remove()}}(r),3e3)}$("#uploadAttachMsg").scrollTop(1e3)},fail:function(e,n){n.context.html("");var r=$('<div class="alert alert-danger"><a class="close" data-dismiss="alert"></a></div>');r.append("<b>Error:</b> "+n.files[0].name+" <small>[<i>"+t(n.files[0].size)+"</i>]</small> "+n.errorThrown),n.context.html(r),setTimeout(function(t){return function(){t.remove()}}(r),3e3),$("#uploadAttachMsg").scrollTop(1e3)}});var n=$("#avatarUploadMsg");$("#uploadAvatar").fileupload({dataType:"json",dropZone:$("#dropAvatar"),pasteZone:"",add:function(e,r){var i=$('<div class="alert alert-info"><img class="loader" src="/tinymce/plugins/leaui_image/public/images/ajax-loader.gif"> <a class="close" data-dismiss="alert"></a></div>');i.append(r.files[0].name+" <small>[<i>"+t(r.files[0].size)+"</i>]</small>"),n.html(i),r.context=n;var a=r.files[0].size,o=+GlobalConfigs.uploadAvatarSize||100;if("number"==typeof a&&a>1048576*o)return i.find("img").remove(),i.removeClass("alert-info").addClass("alert-danger"),i.append(" Warning: File size is bigger than "+o+"M"),void setTimeout(function(t){return function(){t.remove()}}(i),3e3);var s;setTimeout(function(){s=r.submit()},10)},done:function(e,n){if(1==n.result.Ok){n.context.html("");var r=n.result;$("#avatar").attr("src",UrlPrefix+"/"+r.Id)}else{var r=n.result;n.context.html("");var i=$('<div class="alert alert-danger"><a class="close" data-dismiss="alert"></a></div>');i.append("<b>Error:</b> "+n.files[0].name+" <small>[<i>"+t(n.files[0].size)+"</i>]</small> "+n.result.Msg),n.context.html(i),setTimeout(function(t){return function(){t.remove()}}(i),3e3)}},fail:function(e,n){n.context.html("");var r=$('<div class="alert alert-danger"><a class="close" data-dismiss="alert"></a></div>');r.append("<b>Error:</b> "+n.files[0].name+" <small>[<i>"+t(n.files[0].size)+"</i>]</small> "+n.errorThrown),n.context.html(r),setTimeout(function(t){return function(){t.remove()}}(r),3e3)}})};n()}),requirejs.config({waitSeconds:0,packages:[{name:"css",location:"bower-libs/require-css",main:"css"},{name:"less",location:"bower-libs/require-less",main:"less"}],paths:{underscore:"bower-libs/underscore/underscore",crel:"bower-libs/crel/crel",jgrowl:"bower-libs/jgrowl/jquery.jgrowl",mousetrap:"bower-libs/mousetrap/mousetrap","mousetrap-record":"bower-libs/mousetrap/plugins/record/mousetrap-record",toMarkdown:"bower-libs/to-markdown/src/to-markdown",text:"bower-libs/requirejs-text/text",mathjax:"../libs/MathJax/MathJax.js?config=TeX-AMS_HTML",bootstrap:"bower-libs/bootstrap/dist/js/bootstrap",requirejs:"bower-libs/requirejs/require","google-code-prettify":"bower-libs/google-code-prettify/src/prettify",highlightjs:"libs/highlight/highlight.pack","jquery-waitforimages":"bower-libs/waitForImages/src/jquery.waitforimages","jquery-ui":"bower-libs/jquery-ui/ui/jquery-ui","jquery-ui-core":"bower-libs/jquery-ui/ui/jquery.ui.core","jquery-ui-widget":"bower-libs/jquery-ui/ui/jquery.ui.widget","jquery-ui-mouse":"bower-libs/jquery-ui/ui/jquery.ui.mouse","jquery-ui-draggable":"bower-libs/jquery-ui/ui/jquery.ui.draggable","jquery-ui-effect":"bower-libs/jquery-ui/ui/jquery.ui.effect","jquery-ui-effect-slide":"bower-libs/jquery-ui/ui/jquery.ui.effect-slide",FileSaver:"bower-libs/FileSaver/FileSaver",stacktrace:"bower-libs/stacktrace/stacktrace","requirejs-text":"bower-libs/requirejs-text/text","bootstrap-tour":"bower-libs/bootstrap-tour/build/js/bootstrap-tour",css_browser_selector:"bower-libs/css_browser_selector/css_browser_selector","pagedown-extra":"bower-libs/pagedown-extra/node-pagedown-extra",pagedownExtra:"bower-libs/pagedown-extra/Markdown.Extra",pagedown:"libs/Markdown.Editor","require-css":"bower-libs/require-css/css",xregexp:"bower-libs/xregexp/xregexp-all",yaml:"bower-libs/yaml.js/bin/yaml","yaml.js":"bower-libs/yaml.js","yaml-js":"bower-libs/yaml.js/bin/yaml",css:"bower-libs/require-css/css","css-builder":"bower-libs/require-css/css-builder",normalize:"bower-libs/require-css/normalize",prism:"bower-libs/prism/prism","prism-core":"bower-libs/prism/components/prism-core",MutationObservers:"bower-libs/MutationObservers/MutationObserver",WeakMap:"bower-libs/WeakMap/weakmap",rangy:"bower-libs/rangy/rangy-core","rangy-cssclassapplier":"bower-libs/rangy/rangy-cssclassapplier",diff_match_patch:"bower-libs/google-diff-match-patch-js/diff_match_patch",diff_match_patch_uncompressed:"bower-libs/google-diff-match-patch-js/diff_match_patch_uncompressed",jsondiffpatch:"bower-libs/jsondiffpatch/build/bundle",hammerjs:"bower-libs/hammerjs/hammer",Diagram:"bower-libs/js-sequence-diagrams/src/sequence-diagram","diagram-grammar":"bower-libs/js-sequence-diagrams/build/diagram-grammar",raphael:"bower-libs/raphael/raphael","flow-chart":"bower-libs/flowchart/release/flowchart.amd-1.3.4.min",flowchart:"bower-libs/flowchart/release/flowchart-1.3.4.min",monetizejs:"bower-libs/monetizejs/src/monetize","to-markdown":"bower-libs/to-markdown/src/to-markdown",waitForImages:"bower-libs/waitForImages/dist/jquery.waitforimages",MathJax:"../libs/MathJax/MathJax",alertify:"bower-libs/alertify.js/lib/alertify",editor_drop_paste:"app/editor_drop_paste",attachment_upload:"app/attachment_upload","jquery.ui.widget":"app/libs/jquery.ui.widget",fileupload:"app/libs/jquery.fileupload","iframe-transport":"app/libs/jquery.iframe-transport"},shim:{underscore:{exports:"_"},mathjax:["libs/mathjax_init"],jgrowl:{deps:[],exports:"jQuery.jGrowl"},diff_match_patch_uncompressed:{exports:"diff_match_patch"},jsondiffpatch:["diff_match_patch_uncompressed"],rangy:{exports:"rangy"},"rangy-cssclassapplier":["rangy"],mousetrap:{exports:"Mousetrap"},"yaml-js":{exports:"YAML"},"prism-core":{exports:"Prism"},"bower-libs/prism/components/prism-markup":["prism-core"],"libs/prism-latex":["prism-core"],"libs/prism-markdown":["bower-libs/prism/components/prism-markup","libs/prism-latex"],"bootstrap-record":["mousetrap"],toMarkdown:{deps:[],exports:"toMarkdown"},stacktrace:{exports:"printStackTrace"},FileSaver:{exports:"saveAs"},MutationObservers:["WeakMap"],highlightjs:{exports:"hljs"},"bootstrap-tour":{deps:["bootstrap"],exports:"Tour"},bootstrap:[],"jquery-waitforimages":[],pagedown:["libs/Markdown.Converter"],pagedownExtra:["libs/Markdown.Converter"],"flow-chart":["raphael"],"diagram-grammar":["underscore"],Diagram:["raphael","diagram-grammar"],fileupload:{deps:["jquery.ui.widget","iframe-transport"]}}}),window.viewerMode=!1,window.theme="default";var themeModule="less!themes/"+window.theme;-1!==window.baseDir.indexOf("-min")&&(themeModule="css!themes/"+window.theme),require(["rangy","core","eventMgr","css","rangy-cssclassapplier","editor_drop_paste","attachment_upload"],function(t,e){window.noStart||$(function(){t.init(),e.onReady()})}),define("main",function(){});